var S2=Object.defineProperty;var k2=t=>{throw TypeError(t)};var C2=(t,e,n)=>e in t?S2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var of=(t,e,n)=>C2(t,typeof e!="symbol"?e+"":e,n);var jo=(t,e,n)=>e.has(t)?k2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function _m(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function To(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fb={exports:{}},ud={},Bb={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=Symbol.for("react.element"),x2=Symbol.for("react.portal"),T2=Symbol.for("react.fragment"),w2=Symbol.for("react.strict_mode"),E2=Symbol.for("react.profiler"),_2=Symbol.for("react.provider"),P2=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),O2=Symbol.for("react.suspense"),M2=Symbol.for("react.memo"),I2=Symbol.for("react.lazy"),Vv=Symbol.iterator;function N2(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$b=Object.assign,Vb={};function wo(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qb(){}qb.prototype=wo.prototype;function Pm(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}var Rm=Pm.prototype=new qb;Rm.constructor=Pm;$b(Rm,wo.prototype);Rm.isPureReactComponent=!0;var qv=Array.isArray,Hb=Object.prototype.hasOwnProperty,Om={current:null},Wb={key:!0,ref:!0,__self:!0,__source:!0};function Kb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Hb.call(e,r)&&!Wb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wc,type:t,key:s,ref:o,props:i,_owner:Om.current}}function D2(t,e){return{$$typeof:wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mm(t){return typeof t=="object"&&t!==null&&t.$$typeof===wc}function A2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hv=/\/+/g;function af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A2(""+t.key):e.toString(36)}function xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wc:case x2:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+af(o,0):r,qv(i)?(n="",t!=null&&(n=t.replace(Hv,"$&/")+"/"),xl(i,e,n,"",function(l){return l})):i!=null&&(Mm(i)&&(i=D2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qv(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+af(s,a);o+=xl(s,e,n,c,i)}else if(c=N2(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+af(s,a++),o+=xl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(t,e,n){if(t==null)return t;var r=[],i=0;return xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Tl={transition:null},j2={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Tl,ReactCurrentOwner:Om};function Qb(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!Mm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=wo;he.Fragment=T2;he.Profiler=E2;he.PureComponent=Pm;he.StrictMode=w2;he.Suspense=O2;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j2;he.act=Qb;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$b({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Om.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Hb.call(e,c)&&!Wb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:wc,type:t.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:P2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_2,_context:t},t.Consumer=t};he.createElement=Kb;he.createFactory=function(t){var e=Kb.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:R2,render:t}};he.isValidElement=Mm;he.lazy=function(t){return{$$typeof:I2,_payload:{_status:-1,_result:t},_init:L2}};he.memo=function(t,e){return{$$typeof:M2,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Tl.transition;Tl.transition={};try{t()}finally{Tl.transition=e}};he.unstable_act=Qb;he.useCallback=function(t,e){return At.current.useCallback(t,e)};he.useContext=function(t){return At.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return At.current.useDeferredValue(t)};he.useEffect=function(t,e){return At.current.useEffect(t,e)};he.useId=function(){return At.current.useId()};he.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return At.current.useMemo(t,e)};he.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};he.useRef=function(t){return At.current.useRef(t)};he.useState=function(t){return At.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return At.current.useTransition()};he.version="18.3.1";Bb.exports=he;var g=Bb.exports;const _e=To(g),yh=_m({__proto__:null,default:_e},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2=g,F2=Symbol.for("react.element"),B2=Symbol.for("react.fragment"),z2=Object.prototype.hasOwnProperty,$2=U2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V2={key:!0,ref:!0,__self:!0,__source:!0};function Gb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)z2.call(e,r)&&!V2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:F2,type:t,key:s,ref:o,props:i,_owner:$2.current}}ud.Fragment=B2;ud.jsx=Gb;ud.jsxs=Gb;Fb.exports=ud;var m=Fb.exports,bh={},Jb={exports:{}},on={},Yb={exports:{}},Xb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var W=z.length;z.push(Q);e:for(;0<W;){var ce=W-1>>>1,oe=z[ce];if(0<i(oe,Q))z[ce]=Q,z[W]=oe,W=ce;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],W=z.pop();if(W!==Q){z[0]=W;e:for(var ce=0,oe=z.length,ye=oe>>>1;ce<ye;){var ot=2*(ce+1)-1,kn=z[ot],_t=ot+1,ls=z[_t];if(0>i(kn,W))_t<oe&&0>i(ls,kn)?(z[ce]=ls,z[_t]=W,ce=_t):(z[ce]=kn,z[ot]=W,ce=ot);else if(_t<oe&&0>i(ls,W))z[ce]=ls,z[_t]=W,ce=_t;else break e}}return Q}function i(z,Q){var W=z.sortIndex-Q.sortIndex;return W!==0?W:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var Q=n(l);Q!==null;){if(Q.callback===null)r(l);else if(Q.startTime<=z)r(l),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(l)}}function C(z){if(y=!1,S(z),!p)if(n(c)!==null)p=!0,ee(T);else{var Q=n(l);Q!==null&&Z(C,Q.startTime-z)}}function T(z,Q){p=!1,y&&(y=!1,v(E),E=-1),h=!0;var W=f;try{for(S(Q),d=n(c);d!==null&&(!(d.expirationTime>Q)||z&&!I());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,f=d.priorityLevel;var oe=ce(d.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(c)&&r(c),S(Q)}else r(c);d=n(c)}if(d!==null)var ye=!0;else{var ot=n(l);ot!==null&&Z(C,ot.startTime-Q),ye=!1}return ye}finally{d=null,f=W,h=!1}}var x=!1,w=null,E=-1,P=5,M=-1;function I(){return!(t.unstable_now()-M<P)}function A(){if(w!==null){var z=t.unstable_now();M=z;var Q=!0;try{Q=w(!0,z)}finally{Q?q():(x=!1,w=null)}}else x=!1}var q;if(typeof b=="function")q=function(){b(A)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=A,q=function(){ne.postMessage(null)}}else q=function(){k(A,0)};function ee(z){w=z,x||(x=!0,q())}function Z(z,Q){E=k(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,ee(T))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var W=f;f=Q;try{return z()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=f;f=z;try{return Q()}finally{f=W}},t.unstable_scheduleCallback=function(z,Q,W){var ce=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ce+W:ce):W=ce,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,z={id:u++,callback:Q,priorityLevel:z,startTime:W,expirationTime:oe,sortIndex:-1},W>ce?(z.sortIndex=W,e(l,z),n(c)===null&&z===n(l)&&(y?(v(E),E=-1):y=!0,Z(C,W-ce))):(z.sortIndex=oe,e(c,z),p||h||(p=!0,ee(T))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var Q=f;return function(){var W=f;f=Q;try{return z.apply(this,arguments)}finally{f=W}}}})(Xb);Yb.exports=Xb;var q2=Yb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2=g,rn=q2;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zb=new Set,ja={};function Xi(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(ja[t]=e,t=0;t<e.length;t++)Zb.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,W2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wv={},Kv={};function K2(t){return Sh.call(Kv,t)?!0:Sh.call(Wv,t)?!1:W2.test(t)?Kv[t]=!0:(Wv[t]=!0,!1)}function Q2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G2(t,e,n,r){if(e===null||typeof e>"u"||Q2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Im=/[\-:]([a-z])/g;function Nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Im,Nm);ht[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Im,Nm);ht[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Im,Nm);ht[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dm(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G2(e,n,i,r)&&(n=null),r||i===null?K2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=H2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gc=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),eS=Symbol.for("react.provider"),tS=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),xh=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),nS=Symbol.for("react.offscreen"),Qv=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Qv&&t[Qv]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,cf;function oa(t){if(cf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cf=e&&e[1]||""}return`
`+cf+t}var lf=!1;function uf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oa(t):""}function J2(t){switch(t.tag){case 5:return oa(t.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 2:case 15:return t=uf(t.type,!1),t;case 11:return t=uf(t.type.render,!1),t;case 1:return t=uf(t.type,!0),t;default:return""}}function Th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case Ts:return"Portal";case kh:return"Profiler";case Am:return"StrictMode";case Ch:return"Suspense";case xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tS:return(t.displayName||"Context")+".Consumer";case eS:return(t._context.displayName||"Context")+".Provider";case Lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jm:return e=t.displayName||null,e!==null?e:Th(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return Th(t(e))}catch{}}return null}function Y2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===Am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X2(t){var e=rS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=X2(t))}function iS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wh(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sS(t,e){e=e.checked,e!=null&&Dm(t,"checked",e,!1)}function Eh(t,e){sS(t,e);var n=oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_h(t,e.type,n):e.hasOwnProperty("defaultValue")&&_h(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _h(t,e,n){(e!=="number"||pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var aa=Array.isArray;function Bs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(aa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function oS(t,e){var n=oi(e.value),r=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yc,cS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yc=Yc||document.createElement("div"),Yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ua(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z2=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){Z2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function lS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function uS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var e_=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(e_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=null;function Um(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nh=null,zs=null,$s=null;function Zv(t){if(t=Pc(t)){if(typeof Nh!="function")throw Error($(280));var e=t.stateNode;e&&(e=md(e),Nh(t.stateNode,t.type,e))}}function dS(t){zs?$s?$s.push(t):$s=[t]:zs=t}function fS(){if(zs){var t=zs,e=$s;if($s=zs=null,Zv(t),e)for(t=0;t<e.length;t++)Zv(e[t])}}function hS(t,e){return t(e)}function pS(){}var df=!1;function mS(t,e,n){if(df)return t(e,n);df=!0;try{return hS(t,e,n)}finally{df=!1,(zs!==null||$s!==null)&&(pS(),fS())}}function Fa(t,e){var n=t.stateNode;if(n===null)return null;var r=md(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Dh=!1;if(Cr)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Dh=!1}function t_(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var va=!1,mu=null,gu=!1,Ah=null,n_={onError:function(t){va=!0,mu=t}};function r_(t,e,n,r,i,s,o,a,c){va=!1,mu=null,t_.apply(n_,arguments)}function i_(t,e,n,r,i,s,o,a,c){if(r_.apply(this,arguments),va){if(va){var l=mu;va=!1,mu=null}else throw Error($(198));gu||(gu=!0,Ah=l)}}function Zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e0(t){if(Zi(t)!==t)throw Error($(188))}function s_(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return e0(i),t;if(s===r)return e0(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function vS(t){return t=s_(t),t!==null?yS(t):null}function yS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yS(t);if(e!==null)return e;t=t.sibling}return null}var bS=rn.unstable_scheduleCallback,t0=rn.unstable_cancelCallback,o_=rn.unstable_shouldYield,a_=rn.unstable_requestPaint,Ke=rn.unstable_now,c_=rn.unstable_getCurrentPriorityLevel,Fm=rn.unstable_ImmediatePriority,SS=rn.unstable_UserBlockingPriority,vu=rn.unstable_NormalPriority,l_=rn.unstable_LowPriority,kS=rn.unstable_IdlePriority,dd=null,Jn=null;function u_(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(dd,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:h_,d_=Math.log,f_=Math.LN2;function h_(t){return t>>>=0,t===0?32:31-(d_(t)/f_|0)|0}var Xc=64,Zc=4194304;function ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ca(a):(s&=o,s!==0&&(r=ca(s)))}else o=n&~i,o!==0?r=ca(o):s!==0&&(r=ca(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function p_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=p_(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CS(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function ff(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function g_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Bm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function xS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TS,zm,wS,ES,_S,jh=!1,el=[],Jr=null,Yr=null,Xr=null,Ba=new Map,za=new Map,qr=[],v_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function Bo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pc(e),e!==null&&zm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function y_(t,e,n,r,i){switch(e){case"focusin":return Jr=Bo(Jr,t,e,n,r,i),!0;case"dragenter":return Yr=Bo(Yr,t,e,n,r,i),!0;case"mouseover":return Xr=Bo(Xr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ba.set(s,Bo(Ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,za.set(s,Bo(za.get(s)||null,t,e,n,r,i)),!0}return!1}function PS(t){var e=Ri(t.target);if(e!==null){var n=Zi(e);if(n!==null){if(e=n.tag,e===13){if(e=gS(n),e!==null){t.blockedOn=e,_S(t.priority,function(){wS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ih=r,n.target.dispatchEvent(r),Ih=null}else return e=Pc(n),e!==null&&zm(e),t.blockedOn=n,!1;e.shift()}return!0}function r0(t,e,n){wl(t)&&n.delete(e)}function b_(){jh=!1,Jr!==null&&wl(Jr)&&(Jr=null),Yr!==null&&wl(Yr)&&(Yr=null),Xr!==null&&wl(Xr)&&(Xr=null),Ba.forEach(r0),za.forEach(r0)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,b_)))}function $a(t){function e(i){return zo(i,t)}if(0<el.length){zo(el[0],t);for(var n=1;n<el.length;n++){var r=el[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jr!==null&&zo(Jr,t),Yr!==null&&zo(Yr,t),Xr!==null&&zo(Xr,t),Ba.forEach(e),za.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)PS(n),n.blockedOn===null&&qr.shift()}var Vs=Ir.ReactCurrentBatchConfig,bu=!0;function S_(t,e,n,r){var i=ke,s=Vs.transition;Vs.transition=null;try{ke=1,$m(t,e,n,r)}finally{ke=i,Vs.transition=s}}function k_(t,e,n,r){var i=ke,s=Vs.transition;Vs.transition=null;try{ke=4,$m(t,e,n,r)}finally{ke=i,Vs.transition=s}}function $m(t,e,n,r){if(bu){var i=Uh(t,e,n,r);if(i===null)Cf(t,e,r,Su,n),n0(t,r);else if(y_(i,t,e,n,r))r.stopPropagation();else if(n0(t,r),e&4&&-1<v_.indexOf(t)){for(;i!==null;){var s=Pc(i);if(s!==null&&TS(s),s=Uh(t,e,n,r),s===null&&Cf(t,e,r,Su,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cf(t,e,r,null,n)}}var Su=null;function Uh(t,e,n,r){if(Su=null,t=Um(r),t=Ri(t),t!==null)if(e=Zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Su=t,null}function RS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c_()){case Fm:return 1;case SS:return 4;case vu:case l_:return 16;case kS:return 536870912;default:return 16}default:return 16}}var Kr=null,Vm=null,El=null;function OS(){if(El)return El;var t,e=Vm,n=e.length,r,i="value"in Kr?Kr.value:Kr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return El=i.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tl(){return!0}function i0(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tl:i0,this.isPropagationStopped=i0,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=an(Eo),_c=ze({},Eo,{view:0,detail:0}),C_=an(_c),hf,pf,$o,fd=ze({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$o&&($o&&t.type==="mousemove"?(hf=t.screenX-$o.screenX,pf=t.screenY-$o.screenY):pf=hf=0,$o=t),hf)},movementY:function(t){return"movementY"in t?t.movementY:pf}}),s0=an(fd),x_=ze({},fd,{dataTransfer:0}),T_=an(x_),w_=ze({},_c,{relatedTarget:0}),mf=an(w_),E_=ze({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),__=an(E_),P_=ze({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),R_=an(P_),O_=ze({},Eo,{data:0}),o0=an(O_),M_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N_[t])?!!e[t]:!1}function Hm(){return D_}var A_=ze({},_c,{key:function(t){if(t.key){var e=M_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hm,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L_=an(A_),j_=ze({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a0=an(j_),U_=ze({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hm}),F_=an(U_),B_=ze({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),z_=an(B_),$_=ze({},fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V_=an($_),q_=[9,13,27,32],Wm=Cr&&"CompositionEvent"in window,ya=null;Cr&&"documentMode"in document&&(ya=document.documentMode);var H_=Cr&&"TextEvent"in window&&!ya,MS=Cr&&(!Wm||ya&&8<ya&&11>=ya),c0=" ",l0=!1;function IS(t,e){switch(t){case"keyup":return q_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function W_(t,e){switch(t){case"compositionend":return NS(e);case"keypress":return e.which!==32?null:(l0=!0,c0);case"textInput":return t=e.data,t===c0&&l0?null:t;default:return null}}function K_(t,e){if(Es)return t==="compositionend"||!Wm&&IS(t,e)?(t=OS(),El=Vm=Kr=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MS&&e.locale!=="ko"?null:e.data;default:return null}}var Q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q_[t.type]:e==="textarea"}function DS(t,e,n,r){dS(r),e=ku(e,"onChange"),0<e.length&&(n=new qm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ba=null,Va=null;function G_(t){HS(t,0)}function hd(t){var e=Rs(t);if(iS(e))return t}function J_(t,e){if(t==="change")return e}var AS=!1;if(Cr){var gf;if(Cr){var vf="oninput"in document;if(!vf){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),vf=typeof d0.oninput=="function"}gf=vf}else gf=!1;AS=gf&&(!document.documentMode||9<document.documentMode)}function f0(){ba&&(ba.detachEvent("onpropertychange",LS),Va=ba=null)}function LS(t){if(t.propertyName==="value"&&hd(Va)){var e=[];DS(e,Va,t,Um(t)),mS(G_,e)}}function Y_(t,e,n){t==="focusin"?(f0(),ba=e,Va=n,ba.attachEvent("onpropertychange",LS)):t==="focusout"&&f0()}function X_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hd(Va)}function Z_(t,e){if(t==="click")return hd(e)}function eP(t,e){if(t==="input"||t==="change")return hd(e)}function tP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:tP;function qa(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sh.call(e,i)||!Ln(t[i],e[i]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p0(t,e){var n=h0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h0(n)}}function jS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function US(){for(var t=window,e=pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pu(t.document)}return e}function Km(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nP(t){var e=US(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jS(n.ownerDocument.documentElement,n)){if(r!==null&&Km(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=p0(n,s);var o=p0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rP=Cr&&"documentMode"in document&&11>=document.documentMode,_s=null,Fh=null,Sa=null,Bh=!1;function m0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bh||_s==null||_s!==pu(r)||(r=_s,"selectionStart"in r&&Km(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&qa(Sa,r)||(Sa=r,r=ku(Fh,"onSelect"),0<r.length&&(e=new qm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_s)))}function nl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},yf={},FS={};Cr&&(FS=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function pd(t){if(yf[t])return yf[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FS)return yf[t]=e[n];return t}var BS=pd("animationend"),zS=pd("animationiteration"),$S=pd("animationstart"),VS=pd("transitionend"),qS=new Map,g0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){qS.set(t,e),Xi(e,[t])}for(var bf=0;bf<g0.length;bf++){var Sf=g0[bf],iP=Sf.toLowerCase(),sP=Sf[0].toUpperCase()+Sf.slice(1);hi(iP,"on"+sP)}hi(BS,"onAnimationEnd");hi(zS,"onAnimationIteration");hi($S,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(VS,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oP=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function v0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,i_(r,e,void 0,t),t.currentTarget=null}function HS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;v0(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;v0(i,a,l),s=c}}}if(gu)throw t=Ah,gu=!1,Ah=null,t}function Ie(t,e){var n=e[Hh];n===void 0&&(n=e[Hh]=new Set);var r=t+"__bubble";n.has(r)||(WS(e,t,2,!1),n.add(r))}function kf(t,e,n){var r=0;e&&(r|=4),WS(n,t,r,e)}var rl="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[rl]){t[rl]=!0,Zb.forEach(function(n){n!=="selectionchange"&&(oP.has(n)||kf(n,!1,t),kf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rl]||(e[rl]=!0,kf("selectionchange",!1,e))}}function WS(t,e,n,r){switch(RS(e)){case 1:var i=S_;break;case 4:i=k_;break;default:i=$m}n=i.bind(null,e,n,t),i=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ri(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mS(function(){var l=s,u=Um(n),d=[];e:{var f=qS.get(t);if(f!==void 0){var h=qm,p=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":h=L_;break;case"focusin":p="focus",h=mf;break;case"focusout":p="blur",h=mf;break;case"beforeblur":case"afterblur":h=mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=s0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=T_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=F_;break;case BS:case zS:case $S:h=__;break;case VS:h=z_;break;case"scroll":h=C_;break;case"wheel":h=V_;break;case"copy":case"cut":case"paste":h=R_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=a0}var y=(e&4)!==0,k=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var b=l,S;b!==null;){S=b;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,v!==null&&(C=Fa(b,v),C!=null&&y.push(Wa(b,C,S)))),k)break;b=b.return}0<y.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ih&&(p=n.relatedTarget||n.fromElement)&&(Ri(p)||p[xr]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Ri(p):null,p!==null&&(k=Zi(p),p!==k||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(y=s0,C="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(y=a0,C="onPointerLeave",v="onPointerEnter",b="pointer"),k=h==null?f:Rs(h),S=p==null?f:Rs(p),f=new y(C,b+"leave",h,n,u),f.target=k,f.relatedTarget=S,C=null,Ri(u)===l&&(y=new y(v,b+"enter",p,n,u),y.target=S,y.relatedTarget=k,C=y),k=C,h&&p)t:{for(y=h,v=p,b=0,S=y;S;S=ps(S))b++;for(S=0,C=v;C;C=ps(C))S++;for(;0<b-S;)y=ps(y),b--;for(;0<S-b;)v=ps(v),S--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=ps(y),v=ps(v)}y=null}else y=null;h!==null&&y0(d,f,h,y,!1),p!==null&&k!==null&&y0(d,k,p,y,!0)}}e:{if(f=l?Rs(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=J_;else if(u0(f))if(AS)T=eP;else{T=X_;var x=Y_}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=Z_);if(T&&(T=T(t,l))){DS(d,T,n,u);break e}x&&x(t,f,l),t==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&_h(f,"number",f.value)}switch(x=l?Rs(l):window,t){case"focusin":(u0(x)||x.contentEditable==="true")&&(_s=x,Fh=l,Sa=null);break;case"focusout":Sa=Fh=_s=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,m0(d,n,u);break;case"selectionchange":if(rP)break;case"keydown":case"keyup":m0(d,n,u)}var w;if(Wm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Es?IS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(MS&&n.locale!=="ko"&&(Es||E!=="onCompositionStart"?E==="onCompositionEnd"&&Es&&(w=OS()):(Kr=u,Vm="value"in Kr?Kr.value:Kr.textContent,Es=!0)),x=ku(l,E),0<x.length&&(E=new o0(E,t,null,n,u),d.push({event:E,listeners:x}),w?E.data=w:(w=NS(n),w!==null&&(E.data=w)))),(w=H_?W_(t,n):K_(t,n))&&(l=ku(l,"onBeforeInput"),0<l.length&&(u=new o0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=w))}HS(d,e)})}function Wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fa(t,n),s!=null&&r.unshift(Wa(t,s,i)),s=Fa(t,e),s!=null&&r.push(Wa(t,s,i))),t=t.return}return r}function ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=Fa(n,s),c!=null&&o.unshift(Wa(n,c,a))):i||(c=Fa(n,s),c!=null&&o.push(Wa(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aP=/\r\n?/g,cP=/\u0000|\uFFFD/g;function b0(t){return(typeof t=="string"?t:""+t).replace(aP,`
`).replace(cP,"")}function il(t,e,n){if(e=b0(e),b0(t)!==e&&n)throw Error($(425))}function Cu(){}var zh=null,$h=null;function Vh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qh=typeof setTimeout=="function"?setTimeout:void 0,lP=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,uP=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(t){return S0.resolve(null).then(t).catch(dP)}:qh;function dP(t){setTimeout(function(){throw t})}function xf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$a(e)}function Zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Qn="__reactFiber$"+_o,Ka="__reactProps$"+_o,xr="__reactContainer$"+_o,Hh="__reactEvents$"+_o,fP="__reactListeners$"+_o,hP="__reactHandles$"+_o;function Ri(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k0(t);t!==null;){if(n=t[Qn])return n;t=k0(t)}return e}t=n,n=t.parentNode}return null}function Pc(t){return t=t[Qn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function md(t){return t[Ka]||null}var Wh=[],Os=-1;function pi(t){return{current:t}}function Ne(t){0>Os||(t.current=Wh[Os],Wh[Os]=null,Os--)}function Oe(t,e){Os++,Wh[Os]=t.current,t.current=e}var ai={},Ct=pi(ai),Bt=pi(!1),Bi=ai;function ao(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function xu(){Ne(Bt),Ne(Ct)}function C0(t,e,n){if(Ct.current!==ai)throw Error($(168));Oe(Ct,e),Oe(Bt,n)}function KS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Y2(t)||"Unknown",i));return ze({},n,r)}function Tu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Bi=Ct.current,Oe(Ct,t),Oe(Bt,Bt.current),!0}function x0(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=KS(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,Ne(Bt),Ne(Ct),Oe(Ct,t)):Ne(Bt),Oe(Bt,n)}var hr=null,gd=!1,Tf=!1;function QS(t){hr===null?hr=[t]:hr.push(t)}function pP(t){gd=!0,QS(t)}function mi(){if(!Tf&&hr!==null){Tf=!0;var t=0,e=ke;try{var n=hr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,gd=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),bS(Fm,mi),i}finally{ke=e,Tf=!1}}return null}var Ms=[],Is=0,wu=null,Eu=0,cn=[],ln=0,zi=null,gr=1,vr="";function Ti(t,e){Ms[Is++]=Eu,Ms[Is++]=wu,wu=t,Eu=e}function GS(t,e,n){cn[ln++]=gr,cn[ln++]=vr,cn[ln++]=zi,zi=t;var r=gr;t=vr;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gr=1<<32-Nn(e)+i|n<<i|r,vr=s+t}else gr=1<<s|n<<i|r,vr=t}function Qm(t){t.return!==null&&(Ti(t,1),GS(t,1,0))}function Gm(t){for(;t===wu;)wu=Ms[--Is],Ms[Is]=null,Eu=Ms[--Is],Ms[Is]=null;for(;t===zi;)zi=cn[--ln],cn[ln]=null,vr=cn[--ln],cn[ln]=null,gr=cn[--ln],cn[ln]=null}var Zt=null,Jt=null,je=!1,Rn=null;function JS(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=Zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zi!==null?{id:gr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Jt=null,!0):!1;default:return!1}}function Kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(je){var e=Jt;if(e){var n=e;if(!T0(t,e)){if(Kh(t))throw Error($(418));e=Zr(n.nextSibling);var r=Zt;e&&T0(t,e)?JS(r,n):(t.flags=t.flags&-4097|2,je=!1,Zt=t)}}else{if(Kh(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,Zt=t}}}function w0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function sl(t){if(t!==Zt)return!1;if(!je)return w0(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vh(t.type,t.memoizedProps)),e&&(e=Jt)){if(Kh(t))throw YS(),Error($(418));for(;e;)JS(t,e),e=Zr(e.nextSibling)}if(w0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Zt?Zr(t.stateNode.nextSibling):null;return!0}function YS(){for(var t=Jt;t;)t=Zr(t.nextSibling)}function co(){Jt=Zt=null,je=!1}function Jm(t){Rn===null?Rn=[t]:Rn.push(t)}var mP=Ir.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ol(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E0(t){var e=t._init;return e(t._payload)}function XS(t){function e(v,b){if(t){var S=v.deletions;S===null?(v.deletions=[b],v.flags|=16):S.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=ri(v,b),v.index=0,v.sibling=null,v}function s(v,b,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<b?(v.flags|=2,b):S):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,S,C){return b===null||b.tag!==6?(b=Mf(S,v.mode,C),b.return=v,b):(b=i(b,S),b.return=v,b)}function c(v,b,S,C){var T=S.type;return T===ws?u(v,b,S.props.children,C,S.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zr&&E0(T)===b.type)?(C=i(b,S.props),C.ref=Vo(v,b,S),C.return=v,C):(C=Dl(S.type,S.key,S.props,null,v.mode,C),C.ref=Vo(v,b,S),C.return=v,C)}function l(v,b,S,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=If(S,v.mode,C),b.return=v,b):(b=i(b,S.children||[]),b.return=v,b)}function u(v,b,S,C,T){return b===null||b.tag!==7?(b=Li(S,v.mode,C,T),b.return=v,b):(b=i(b,S),b.return=v,b)}function d(v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Mf(""+b,v.mode,S),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gc:return S=Dl(b.type,b.key,b.props,null,v.mode,S),S.ref=Vo(v,null,b),S.return=v,S;case Ts:return b=If(b,v.mode,S),b.return=v,b;case zr:var C=b._init;return d(v,C(b._payload),S)}if(aa(b)||Uo(b))return b=Li(b,v.mode,S,null),b.return=v,b;ol(v,b)}return null}function f(v,b,S,C){var T=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(v,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gc:return S.key===T?c(v,b,S,C):null;case Ts:return S.key===T?l(v,b,S,C):null;case zr:return T=S._init,f(v,b,T(S._payload),C)}if(aa(S)||Uo(S))return T!==null?null:u(v,b,S,C,null);ol(v,S)}return null}function h(v,b,S,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(S)||null,a(b,v,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Gc:return v=v.get(C.key===null?S:C.key)||null,c(b,v,C,T);case Ts:return v=v.get(C.key===null?S:C.key)||null,l(b,v,C,T);case zr:var x=C._init;return h(v,b,S,x(C._payload),T)}if(aa(C)||Uo(C))return v=v.get(S)||null,u(b,v,C,T,null);ol(b,C)}return null}function p(v,b,S,C){for(var T=null,x=null,w=b,E=b=0,P=null;w!==null&&E<S.length;E++){w.index>E?(P=w,w=null):P=w.sibling;var M=f(v,w,S[E],C);if(M===null){w===null&&(w=P);break}t&&w&&M.alternate===null&&e(v,w),b=s(M,b,E),x===null?T=M:x.sibling=M,x=M,w=P}if(E===S.length)return n(v,w),je&&Ti(v,E),T;if(w===null){for(;E<S.length;E++)w=d(v,S[E],C),w!==null&&(b=s(w,b,E),x===null?T=w:x.sibling=w,x=w);return je&&Ti(v,E),T}for(w=r(v,w);E<S.length;E++)P=h(w,v,E,S[E],C),P!==null&&(t&&P.alternate!==null&&w.delete(P.key===null?E:P.key),b=s(P,b,E),x===null?T=P:x.sibling=P,x=P);return t&&w.forEach(function(I){return e(v,I)}),je&&Ti(v,E),T}function y(v,b,S,C){var T=Uo(S);if(typeof T!="function")throw Error($(150));if(S=T.call(S),S==null)throw Error($(151));for(var x=T=null,w=b,E=b=0,P=null,M=S.next();w!==null&&!M.done;E++,M=S.next()){w.index>E?(P=w,w=null):P=w.sibling;var I=f(v,w,M.value,C);if(I===null){w===null&&(w=P);break}t&&w&&I.alternate===null&&e(v,w),b=s(I,b,E),x===null?T=I:x.sibling=I,x=I,w=P}if(M.done)return n(v,w),je&&Ti(v,E),T;if(w===null){for(;!M.done;E++,M=S.next())M=d(v,M.value,C),M!==null&&(b=s(M,b,E),x===null?T=M:x.sibling=M,x=M);return je&&Ti(v,E),T}for(w=r(v,w);!M.done;E++,M=S.next())M=h(w,v,E,M.value,C),M!==null&&(t&&M.alternate!==null&&w.delete(M.key===null?E:M.key),b=s(M,b,E),x===null?T=M:x.sibling=M,x=M);return t&&w.forEach(function(A){return e(v,A)}),je&&Ti(v,E),T}function k(v,b,S,C){if(typeof S=="object"&&S!==null&&S.type===ws&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Gc:e:{for(var T=S.key,x=b;x!==null;){if(x.key===T){if(T=S.type,T===ws){if(x.tag===7){n(v,x.sibling),b=i(x,S.props.children),b.return=v,v=b;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zr&&E0(T)===x.type){n(v,x.sibling),b=i(x,S.props),b.ref=Vo(v,x,S),b.return=v,v=b;break e}n(v,x);break}else e(v,x);x=x.sibling}S.type===ws?(b=Li(S.props.children,v.mode,C,S.key),b.return=v,v=b):(C=Dl(S.type,S.key,S.props,null,v.mode,C),C.ref=Vo(v,b,S),C.return=v,v=C)}return o(v);case Ts:e:{for(x=S.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(v,b.sibling),b=i(b,S.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=If(S,v.mode,C),b.return=v,v=b}return o(v);case zr:return x=S._init,k(v,b,x(S._payload),C)}if(aa(S))return p(v,b,S,C);if(Uo(S))return y(v,b,S,C);ol(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,S),b.return=v,v=b):(n(v,b),b=Mf(S,v.mode,C),b.return=v,v=b),o(v)):n(v,b)}return k}var lo=XS(!0),ZS=XS(!1),_u=pi(null),Pu=null,Ns=null,Ym=null;function Xm(){Ym=Ns=Pu=null}function Zm(t){var e=_u.current;Ne(_u),t._currentValue=e}function Gh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Pu=t,Ym=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function vn(t){var e=t._currentValue;if(Ym!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(Pu===null)throw Error($(308));Ns=t,Pu.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var Oi=null;function eg(t){Oi===null?Oi=[t]:Oi.push(t)}function ek(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,eg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function tg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tr(t,n)}return i=r.interleaved,i===null?(e.next=e,eg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tr(t,n)}function Pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}function _0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ru(t,e,n,r){var i=t.updateQueue;$r=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(f=e,h=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=ze({},d,f);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vi|=o,t.lanes=o,t.memoizedState=d}}function P0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Rc={},Yn=pi(Rc),Qa=pi(Rc),Ga=pi(Rc);function Mi(t){if(t===Rc)throw Error($(174));return t}function ng(t,e){switch(Oe(Ga,e),Oe(Qa,t),Oe(Yn,Rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rh(e,t)}Ne(Yn),Oe(Yn,e)}function uo(){Ne(Yn),Ne(Qa),Ne(Ga)}function nk(t){Mi(Ga.current);var e=Mi(Yn.current),n=Rh(e,t.type);e!==n&&(Oe(Qa,t),Oe(Yn,n))}function rg(t){Qa.current===t&&(Ne(Yn),Ne(Qa))}var Fe=pi(0);function Ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function ig(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var Rl=Ir.ReactCurrentDispatcher,Ef=Ir.ReactCurrentBatchConfig,$i=0,Be=null,et=null,nt=null,Mu=!1,ka=!1,Ja=0,gP=0;function mt(){throw Error($(321))}function sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function og(t,e,n,r,i,s){if($i=s,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?SP:kP,t=n(r,i),ka){s=0;do{if(ka=!1,Ja=0,25<=s)throw Error($(301));s+=1,nt=et=null,e.updateQueue=null,Rl.current=CP,t=n(r,i)}while(ka)}if(Rl.current=Iu,e=et!==null&&et.next!==null,$i=0,nt=et=Be=null,Mu=!1,e)throw Error($(300));return t}function ag(){var t=Ja!==0;return Ja=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Be.memoizedState=nt=t:nt=nt.next=t,nt}function yn(){if(et===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=nt===null?Be.memoizedState:nt.next;if(e!==null)nt=e,et=t;else{if(t===null)throw Error($(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},nt===null?Be.memoizedState=nt=t:nt=nt.next=t}return nt}function Ya(t,e){return typeof e=="function"?e(t):e}function _f(t){var e=yn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if(($i&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Be.lanes|=u,Vi|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Ln(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Be.lanes|=s,Vi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pf(t){var e=yn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ln(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rk(){}function ik(t,e){var n=Be,r=yn(),i=e(),s=!Ln(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,cg(ak.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Xa(9,ok.bind(null,n,r,i,e),void 0,null),st===null)throw Error($(349));$i&30||sk(n,e,i)}return i}function sk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ok(t,e,n,r){e.value=n,e.getSnapshot=r,ck(e)&&lk(t)}function ak(t,e,n){return n(function(){ck(e)&&lk(t)})}function ck(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function lk(t){var e=Tr(t,1);e!==null&&Dn(e,t,1,-1)}function R0(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:t},e.queue=t,t=t.dispatch=bP.bind(null,Be,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uk(){return yn().memoizedState}function Ol(t,e,n,r){var i=qn();Be.flags|=t,i.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function vd(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(et!==null){var o=et.memoizedState;if(s=o.destroy,r!==null&&sg(r,o.deps)){i.memoizedState=Xa(e,n,s,r);return}}Be.flags|=t,i.memoizedState=Xa(1|e,n,s,r)}function O0(t,e){return Ol(8390656,8,t,e)}function cg(t,e){return vd(2048,8,t,e)}function dk(t,e){return vd(4,2,t,e)}function fk(t,e){return vd(4,4,t,e)}function hk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pk(t,e,n){return n=n!=null?n.concat([t]):null,vd(4,4,hk.bind(null,e,t),n)}function lg(){}function mk(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gk(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vk(t,e,n){return $i&21?(Ln(n,e)||(n=CS(),Be.lanes|=n,Vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function vP(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Ef.transition;Ef.transition={};try{t(!1),e()}finally{ke=n,Ef.transition=r}}function yk(){return yn().memoizedState}function yP(t,e,n){var r=ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bk(t))Sk(e,n);else if(n=ek(t,e,n,r),n!==null){var i=Nt();Dn(n,t,r,i),kk(n,e,r)}}function bP(t,e,n){var r=ni(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bk(t))Sk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ln(a,o)){var c=e.interleaved;c===null?(i.next=i,eg(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=ek(t,e,i,r),n!==null&&(i=Nt(),Dn(n,t,r,i),kk(n,e,r))}}function bk(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function Sk(t,e){ka=Mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}var Iu={readContext:vn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},SP={readContext:vn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:O0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,hk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yP.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:R0,useDebugValue:lg,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=R0(!1),e=t[0];return t=vP.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,i=qn();if(je){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),st===null)throw Error($(349));$i&30||sk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,O0(ak.bind(null,r,s,t),[t]),r.flags|=2048,Xa(9,ok.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qn(),e=st.identifierPrefix;if(je){var n=vr,r=gr;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:vn,useCallback:mk,useContext:vn,useEffect:cg,useImperativeHandle:pk,useInsertionEffect:dk,useLayoutEffect:fk,useMemo:gk,useReducer:_f,useRef:uk,useState:function(){return _f(Ya)},useDebugValue:lg,useDeferredValue:function(t){var e=yn();return vk(e,et.memoizedState,t)},useTransition:function(){var t=_f(Ya)[0],e=yn().memoizedState;return[t,e]},useMutableSource:rk,useSyncExternalStore:ik,useId:yk,unstable_isNewReconciler:!1},CP={readContext:vn,useCallback:mk,useContext:vn,useEffect:cg,useImperativeHandle:pk,useInsertionEffect:dk,useLayoutEffect:fk,useMemo:gk,useReducer:Pf,useRef:uk,useState:function(){return Pf(Ya)},useDebugValue:lg,useDeferredValue:function(t){var e=yn();return et===null?e.memoizedState=t:vk(e,et.memoizedState,t)},useTransition:function(){var t=Pf(Ya)[0],e=yn().memoizedState;return[t,e]},useMutableSource:rk,useSyncExternalStore:ik,useId:yk,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yd={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=ni(t),s=br(r,i);s.payload=e,n!=null&&(s.callback=n),e=ei(t,s,i),e!==null&&(Dn(e,t,i,r),Pl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=ni(t),s=br(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ei(t,s,i),e!==null&&(Dn(e,t,i,r),Pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=ni(t),i=br(n,r);i.tag=2,e!=null&&(i.callback=e),e=ei(t,i,r),e!==null&&(Dn(e,t,r,n),Pl(e,t,r))}};function M0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!qa(n,r)||!qa(i,s):!0}function Ck(t,e,n){var r=!1,i=ai,s=e.contextType;return typeof s=="object"&&s!==null?s=vn(s):(i=zt(e)?Bi:Ct.current,r=e.contextTypes,s=(r=r!=null)?ao(t,i):ai),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function I0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yd.enqueueReplaceState(e,e.state,null)}function Yh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vn(s):(s=zt(e)?Bi:Ct.current,i.context=ao(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yd.enqueueReplaceState(i,i.state,null),Ru(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fo(t,e){try{var n="",r=e;do n+=J2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xP=typeof WeakMap=="function"?WeakMap:Map;function xk(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Du||(Du=!0,cp=r),Xh(t,e)},n}function Tk(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xh(t,e),typeof r!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function N0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jP.bind(null,t,e,n),e.then(t,t))}function D0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ei(n,e,1))),n.lanes|=1),t)}var TP=Ir.ReactCurrentOwner,Ft=!1;function It(t,e,n,r){e.child=t===null?ZS(e,null,n,r):lo(e,t.child,n,r)}function L0(t,e,n,r,i){n=n.render;var s=e.ref;return qs(e,i),r=og(t,e,n,r,s,i),n=ag(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(je&&n&&Qm(e),e.flags|=1,It(t,e,r,i),e.child)}function j0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wk(t,e,s,r,i)):(t=Dl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(o,r)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function wk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(qa(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,wr(t,e,i)}return Zh(t,e,n,r,i)}function Ek(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(As,Qt),Qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(As,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(As,Qt),Qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(As,Qt),Qt|=r;return It(t,e,i,n),e.child}function _k(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,i){var s=zt(n)?Bi:Ct.current;return s=ao(e,s),qs(e,i),n=og(t,e,n,r,s,i),r=ag(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(je&&r&&Qm(e),e.flags|=1,It(t,e,n,i),e.child)}function U0(t,e,n,r,i){if(zt(n)){var s=!0;Tu(e)}else s=!1;if(qs(e,i),e.stateNode===null)Ml(t,e),Ck(e,n,r),Yh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=vn(l):(l=zt(n)?Bi:Ct.current,l=ao(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&I0(e,o,r,l),$r=!1;var f=e.memoizedState;o.state=f,Ru(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Bt.current||$r?(typeof u=="function"&&(Jh(e,n,u,r),c=e.memoizedState),(a=$r||M0(e,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tk(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Tn(e.type,a),o.props=l,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=vn(c):(c=zt(n)?Bi:Ct.current,c=ao(e,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&I0(e,o,r,c),$r=!1,f=e.memoizedState,o.state=f,Ru(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||Bt.current||$r?(typeof h=="function"&&(Jh(e,n,h,r),p=e.memoizedState),(l=$r||M0(e,n,l,r,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ep(t,e,n,r,s,i)}function ep(t,e,n,r,i,s){_k(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&x0(e,n,!1),wr(t,e,s);r=e.stateNode,TP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lo(e,t.child,null,s),e.child=lo(e,null,a,s)):It(t,e,a,s),e.memoizedState=r.state,i&&x0(e,n,!0),e.child}function Pk(t){var e=t.stateNode;e.pendingContext?C0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C0(t,e.context,!1),ng(t,e.containerInfo)}function F0(t,e,n,r,i){return co(),Jm(i),e.flags|=256,It(t,e,n,r),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rk(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Fe,i&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kd(o,r,0,null),t=Li(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=np(n),e.memoizedState=tp,t):ug(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ri(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ri(a,s):(s=Li(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?np(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tp,r}return s=t.child,t=s.sibling,r=ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ug(t,e){return e=kd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function al(t,e,n,r){return r!==null&&Jm(r),lo(e,t.child,null,n),t=ug(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rf(Error($(422))),al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kd({mode:"visible",children:r.children},i,0,null),s=Li(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lo(e,t.child,null,o),e.child.memoizedState=np(o),e.memoizedState=tp,s);if(!(e.mode&1))return al(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Rf(s,r,void 0),al(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(t,i),Dn(r,t,i,-1))}return gg(),r=Rf(Error($(421))),al(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=Zr(i.nextSibling),Zt=e,je=!0,Rn=null,t!==null&&(cn[ln++]=gr,cn[ln++]=vr,cn[ln++]=zi,gr=t.id,vr=t.overflow,zi=e),e=ug(e,r.children),e.flags|=4096,e)}function B0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gh(t.return,e,n)}function Of(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ok(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(It(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B0(t,n,e);else if(t.tag===19)B0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ou(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Of(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ou(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Of(e,!0,n,null,s);break;case"together":Of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EP(t,e,n){switch(e.tag){case 3:Pk(e),co();break;case 5:nk(e);break;case 1:zt(e.type)&&Tu(e);break;case 4:ng(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(_u,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?Rk(t,e,n):(Oe(Fe,Fe.current&1),t=wr(t,e,n),t!==null?t.sibling:null);Oe(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ok(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,Ek(t,e,n)}return wr(t,e,n)}var Mk,rp,Ik,Nk;Mk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rp=function(){};Ik=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Yn.current);var s=null;switch(n){case"input":i=wh(t,i),r=wh(t,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=Ph(t,i),r=Ph(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cu)}Oh(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ja.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ja.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Ie("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};Nk=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _P(t,e,n){var r=e.pendingProps;switch(Gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return zt(e.type)&&xu(),gt(e),null;case 3:return r=e.stateNode,uo(),Ne(Bt),Ne(Ct),ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(dp(Rn),Rn=null))),rp(t,e),gt(e),null;case 5:rg(e);var i=Mi(Ga.current);if(n=e.type,t!==null&&e.stateNode!=null)Ik(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return gt(e),null}if(t=Mi(Yn.current),sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qn]=e,r[Ka]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<la.length;i++)Ie(la[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Gv(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":Yv(r,s),Ie("invalid",r)}Oh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&il(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&il(r.textContent,a,t),i=["children",""+a]):ja.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Jc(r),Jv(r,s,!0);break;case"textarea":Jc(r),Xv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qn]=e,t[Ka]=r,Mk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<la.length;i++)Ie(la[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":Gv(t,r),i=wh(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Yv(t,r),i=Ph(t,r),Ie("invalid",t);break;default:i=r}Oh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?uS(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cS(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ua(t,c):typeof c=="number"&&Ua(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ja.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ie("scroll",t):c!=null&&Dm(t,s,c,o))}switch(n){case"input":Jc(t),Jv(t,r,!1);break;case"textarea":Jc(t),Xv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)Nk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Mi(Ga.current),Mi(Yn.current),sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:il(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&il(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return gt(e),null;case 13:if(Ne(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Jt!==null&&e.mode&1&&!(e.flags&128))YS(),co(),e.flags|=98560,s=!1;else if(s=sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Qn]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else Rn!==null&&(dp(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?tt===0&&(tt=3):gg())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return uo(),rp(t,e),t===null&&Ha(e.stateNode.containerInfo),gt(e),null;case 10:return Zm(e.type._context),gt(e),null;case 17:return zt(e.type)&&xu(),gt(e),null;case 19:if(Ne(Fe),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qo(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ou(t),o!==null){for(e.flags|=128,qo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>ho&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ou(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return gt(e),null}else 2*Ke()-s.renderingStartTime>ho&&n!==1073741824&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=Fe.current,Oe(Fe,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return mg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function PP(t,e){switch(Gm(e),e.tag){case 1:return zt(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uo(),Ne(Bt),Ne(Ct),ig(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rg(e),null;case 13:if(Ne(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Fe),null;case 4:return uo(),null;case 10:return Zm(e.type._context),null;case 22:case 23:return mg(),null;case 24:return null;default:return null}}var cl=!1,bt=!1,RP=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function ip(t,e,n){try{n()}catch(r){He(t,e,r)}}var z0=!1;function OP(t,e){if(zh=bu,t=US(),Km(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},bu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,k=p.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Tn(e.type,y),k);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){He(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return p=z0,z0=!1,p}function Ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ip(e,n,s)}i=i.next}while(i!==r)}}function bd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dk(t){var e=t.alternate;e!==null&&(t.alternate=null,Dk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[Ka],delete e[Hh],delete e[fP],delete e[hP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ak(t){return t.tag===5||t.tag===3||t.tag===4}function $0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ak(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cu));else if(r!==4&&(t=t.child,t!==null))for(op(t,e,n),t=t.sibling;t!==null;)op(t,e,n),t=t.sibling}function ap(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ap(t,e,n),t=t.sibling;t!==null;)ap(t,e,n),t=t.sibling}var lt=null,wn=!1;function jr(t,e,n){for(n=n.child;n!==null;)Lk(t,e,n),n=n.sibling}function Lk(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:bt||Ds(n,e);case 6:var r=lt,i=wn;lt=null,jr(t,e,n),lt=r,wn=i,lt!==null&&(wn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(wn?(t=lt,n=n.stateNode,t.nodeType===8?xf(t.parentNode,n):t.nodeType===1&&xf(t,n),$a(t)):xf(lt,n.stateNode));break;case 4:r=lt,i=wn,lt=n.stateNode.containerInfo,wn=!0,jr(t,e,n),lt=r,wn=i;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ip(n,e,o),i=i.next}while(i!==r)}jr(t,e,n);break;case 1:if(!bt&&(Ds(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}jr(t,e,n);break;case 21:jr(t,e,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,jr(t,e,n),bt=r):jr(t,e,n);break;default:jr(t,e,n)}}function V0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RP),e.forEach(function(r){var i=FP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,wn=!1;break e;case 3:lt=a.stateNode.containerInfo,wn=!0;break e;case 4:lt=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(lt===null)throw Error($(160));Lk(s,o,i),lt=null,wn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){He(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jk(e,t),e=e.sibling}function jk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),$n(t),r&4){try{Ca(3,t,t.return),bd(3,t)}catch(y){He(t,t.return,y)}try{Ca(5,t,t.return)}catch(y){He(t,t.return,y)}}break;case 1:Cn(e,t),$n(t),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(Cn(e,t),$n(t),r&512&&n!==null&&Ds(n,n.return),t.flags&32){var i=t.stateNode;try{Ua(i,"")}catch(y){He(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sS(i,s),Mh(a,o);var l=Mh(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?uS(i,d):u==="dangerouslySetInnerHTML"?cS(i,d):u==="children"?Ua(i,d):Dm(i,u,d,l)}switch(a){case"input":Eh(i,s);break;case"textarea":oS(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Bs(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Bs(i,!!s.multiple,s.defaultValue,!0):Bs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ka]=s}catch(y){He(t,t.return,y)}}break;case 6:if(Cn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){He(t,t.return,y)}}break;case 3:if(Cn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(y){He(t,t.return,y)}break;case 4:Cn(e,t),$n(t);break;case 13:Cn(e,t),$n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hg=Ke())),r&4&&V0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(bt=(l=bt)||u,Cn(e,t),bt=l):Cn(e,t),$n(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Y=t,u=t.child;u!==null;){for(d=Y=u;Y!==null;){switch(f=Y,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ca(4,f,f.return);break;case 1:Ds(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){He(r,n,y)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){H0(d);continue}}h!==null?(h.return=f,Y=h):H0(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=lS("display",o))}catch(y){He(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(y){He(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cn(e,t),$n(t),r&4&&V0(t);break;case 21:break;default:Cn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ak(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ua(i,""),r.flags&=-33);var s=$0(t);ap(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$0(t);op(t,a,o);break;default:throw Error($(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MP(t,e,n){Y=t,Uk(t)}function Uk(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cl;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||bt;a=cl;var l=bt;if(cl=o,(bt=c)&&!l)for(Y=i;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?W0(i):c!==null?(c.return=o,Y=c):W0(i);for(;s!==null;)Y=s,Uk(s),s=s.sibling;Y=i,cl=a,bt=l}q0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):q0(t)}}function q0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||bd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&$a(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}bt||e.flags&512&&sp(e)}catch(f){He(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function H0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function W0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bd(4,e)}catch(c){He(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){He(e,i,c)}}var s=e.return;try{sp(e)}catch(c){He(e,s,c)}break;case 5:var o=e.return;try{sp(e)}catch(c){He(e,o,c)}}}catch(c){He(e,e.return,c)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var IP=Math.ceil,Nu=Ir.ReactCurrentDispatcher,dg=Ir.ReactCurrentOwner,gn=Ir.ReactCurrentBatchConfig,ve=0,st=null,Ye=null,ft=0,Qt=0,As=pi(0),tt=0,Za=null,Vi=0,Sd=0,fg=0,xa=null,Ut=null,hg=0,ho=1/0,fr=null,Du=!1,cp=null,ti=null,ll=!1,Qr=null,Au=0,Ta=0,lp=null,Il=-1,Nl=0;function Nt(){return ve&6?Ke():Il!==-1?Il:Il=Ke()}function ni(t){return t.mode&1?ve&2&&ft!==0?ft&-ft:mP.transition!==null?(Nl===0&&(Nl=CS()),Nl):(t=ke,t!==0||(t=window.event,t=t===void 0?16:RS(t.type)),t):1}function Dn(t,e,n,r){if(50<Ta)throw Ta=0,lp=null,Error($(185));Ec(t,n,r),(!(ve&2)||t!==st)&&(t===st&&(!(ve&2)&&(Sd|=n),tt===4&&Hr(t,ft)),$t(t,r),n===1&&ve===0&&!(e.mode&1)&&(ho=Ke()+500,gd&&mi()))}function $t(t,e){var n=t.callbackNode;m_(t,e);var r=yu(t,t===st?ft:0);if(r===0)n!==null&&t0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t0(n),e===1)t.tag===0?pP(K0.bind(null,t)):QS(K0.bind(null,t)),uP(function(){!(ve&6)&&mi()}),n=null;else{switch(xS(r)){case 1:n=Fm;break;case 4:n=SS;break;case 16:n=vu;break;case 536870912:n=kS;break;default:n=vu}n=Wk(n,Fk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Fk(t,e){if(Il=-1,Nl=0,ve&6)throw Error($(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=yu(t,t===st?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lu(t,r);else{e=r;var i=ve;ve|=2;var s=zk();(st!==t||ft!==e)&&(fr=null,ho=Ke()+500,Ai(t,e));do try{AP();break}catch(a){Bk(t,a)}while(!0);Xm(),Nu.current=s,ve=i,Ye!==null?e=0:(st=null,ft=0,e=tt)}if(e!==0){if(e===2&&(i=Lh(t),i!==0&&(r=i,e=up(t,i))),e===1)throw n=Za,Ai(t,0),Hr(t,r),$t(t,Ke()),n;if(e===6)Hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!NP(i)&&(e=Lu(t,r),e===2&&(s=Lh(t),s!==0&&(r=s,e=up(t,s))),e===1))throw n=Za,Ai(t,0),Hr(t,r),$t(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:wi(t,Ut,fr);break;case 3:if(Hr(t,r),(r&130023424)===r&&(e=hg+500-Ke(),10<e)){if(yu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qh(wi.bind(null,t,Ut,fr),e);break}wi(t,Ut,fr);break;case 4:if(Hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IP(r/1960))-r,10<r){t.timeoutHandle=qh(wi.bind(null,t,Ut,fr),r);break}wi(t,Ut,fr);break;case 5:wi(t,Ut,fr);break;default:throw Error($(329))}}}return $t(t,Ke()),t.callbackNode===n?Fk.bind(null,t):null}function up(t,e){var n=xa;return t.current.memoizedState.isDehydrated&&(Ai(t,e).flags|=256),t=Lu(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&dp(e)),t}function dp(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function NP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ln(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~fg,e&=~Sd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function K0(t){if(ve&6)throw Error($(327));Hs();var e=yu(t,0);if(!(e&1))return $t(t,Ke()),null;var n=Lu(t,e);if(t.tag!==0&&n===2){var r=Lh(t);r!==0&&(e=r,n=up(t,r))}if(n===1)throw n=Za,Ai(t,0),Hr(t,e),$t(t,Ke()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wi(t,Ut,fr),$t(t,Ke()),null}function pg(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ho=Ke()+500,gd&&mi())}}function qi(t){Qr!==null&&Qr.tag===0&&!(ve&6)&&Hs();var e=ve;ve|=1;var n=gn.transition,r=ke;try{if(gn.transition=null,ke=1,t)return t()}finally{ke=r,gn.transition=n,ve=e,!(ve&6)&&mi()}}function mg(){Qt=As.current,Ne(As)}function Ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lP(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Gm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xu();break;case 3:uo(),Ne(Bt),Ne(Ct),ig();break;case 5:rg(r);break;case 4:uo();break;case 13:Ne(Fe);break;case 19:Ne(Fe);break;case 10:Zm(r.type._context);break;case 22:case 23:mg()}n=n.return}if(st=t,Ye=t=ri(t.current,null),ft=Qt=e,tt=0,Za=null,fg=Sd=Vi=0,Ut=xa=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Oi=null}return t}function Bk(t,e){do{var n=Ye;try{if(Xm(),Rl.current=Iu,Mu){for(var r=Be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}if($i=0,nt=et=Be=null,ka=!1,Ja=0,dg.current=null,n===null||n.return===null){tt=1,Za=e,Ye=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=ft,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=D0(o);if(h!==null){h.flags&=-257,A0(h,o,a,s,e),h.mode&1&&N0(s,l,e),e=h,c=l;var p=e.updateQueue;if(p===null){var y=new Set;y.add(c),e.updateQueue=y}else p.add(c);break e}else{if(!(e&1)){N0(s,l,e),gg();break e}c=Error($(426))}}else if(je&&a.mode&1){var k=D0(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),A0(k,o,a,s,e),Jm(fo(c,a));break e}}s=c=fo(c,a),tt!==4&&(tt=2),xa===null?xa=[s]:xa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=xk(s,c,e);_0(s,v);break e;case 1:a=c;var b=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ti===null||!ti.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Tk(s,a,e);_0(s,C);break e}}s=s.return}while(s!==null)}Vk(n)}catch(T){e=T,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function zk(){var t=Nu.current;return Nu.current=Iu,t===null?Iu:t}function gg(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Vi&268435455)&&!(Sd&268435455)||Hr(st,ft)}function Lu(t,e){var n=ve;ve|=2;var r=zk();(st!==t||ft!==e)&&(fr=null,Ai(t,e));do try{DP();break}catch(i){Bk(t,i)}while(!0);if(Xm(),ve=n,Nu.current=r,Ye!==null)throw Error($(261));return st=null,ft=0,tt}function DP(){for(;Ye!==null;)$k(Ye)}function AP(){for(;Ye!==null&&!o_();)$k(Ye)}function $k(t){var e=Hk(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?Vk(t):Ye=e,dg.current=null}function Vk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PP(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ye=null;return}}else if(n=_P(n,e,Qt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);tt===0&&(tt=5)}function wi(t,e,n){var r=ke,i=gn.transition;try{gn.transition=null,ke=1,LP(t,e,n,r)}finally{gn.transition=i,ke=r}return null}function LP(t,e,n,r){do Hs();while(Qr!==null);if(ve&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(g_(t,s),t===st&&(Ye=st=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ll||(ll=!0,Wk(vu,function(){return Hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gn.transition,gn.transition=null;var o=ke;ke=1;var a=ve;ve|=4,dg.current=null,OP(t,n),jk(n,t),nP($h),bu=!!zh,$h=zh=null,t.current=n,MP(n),a_(),ve=a,ke=o,gn.transition=s}else t.current=n;if(ll&&(ll=!1,Qr=t,Au=i),s=t.pendingLanes,s===0&&(ti=null),u_(n.stateNode),$t(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Du)throw Du=!1,t=cp,cp=null,t;return Au&1&&t.tag!==0&&Hs(),s=t.pendingLanes,s&1?t===lp?Ta++:(Ta=0,lp=t):Ta=0,mi(),null}function Hs(){if(Qr!==null){var t=xS(Au),e=gn.transition,n=ke;try{if(gn.transition=null,ke=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Au=0,ve&6)throw Error($(331));var i=ve;for(ve|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Y=l;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:Ca(8,u,s)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var f=u.sibling,h=u.return;if(Dk(u),u===l){Y=null;break}if(f!==null){f.return=h,Y=f;break}Y=h}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ca(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Y=v;break e}Y=s.return}}var b=t.current;for(Y=b;Y!==null;){o=Y;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Y=S;else e:for(o=b;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bd(9,a)}}catch(T){He(a,a.return,T)}if(a===o){Y=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Y=C;break e}Y=a.return}}if(ve=i,mi(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(dd,t)}catch{}r=!0}return r}finally{ke=n,gn.transition=e}}return!1}function Q0(t,e,n){e=fo(n,e),e=xk(t,e,1),t=ei(t,e,1),e=Nt(),t!==null&&(Ec(t,1,e),$t(t,e))}function He(t,e,n){if(t.tag===3)Q0(t,t,n);else for(;e!==null;){if(e.tag===3){Q0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ti===null||!ti.has(r))){t=fo(n,t),t=Tk(e,t,1),e=ei(e,t,1),t=Nt(),e!==null&&(Ec(e,1,t),$t(e,t));break}}e=e.return}}function jP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>Ke()-hg?Ai(t,0):fg|=n),$t(t,e)}function qk(t,e){e===0&&(t.mode&1?(e=Zc,Zc<<=1,!(Zc&130023424)&&(Zc=4194304)):e=1);var n=Nt();t=Tr(t,e),t!==null&&(Ec(t,e,n),$t(t,n))}function UP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qk(t,n)}function FP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),qk(t,n)}var Hk;Hk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,EP(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,je&&e.flags&1048576&&GS(e,Eu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ml(t,e),t=e.pendingProps;var i=ao(e,Ct.current);qs(e,n),i=og(null,e,r,t,i,n);var s=ag();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,Tu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tg(e),i.updater=yd,e.stateNode=i,i._reactInternals=e,Yh(e,r,t,n),e=ep(null,e,r,!0,s,n)):(e.tag=0,je&&s&&Qm(e),It(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ml(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zP(r),t=Tn(r,t),i){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=U0(null,e,r,t,n);break e;case 11:e=L0(null,e,r,t,n);break e;case 14:e=j0(null,e,r,Tn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Zh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),U0(t,e,r,i,n);case 3:e:{if(Pk(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tk(t,e),Ru(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fo(Error($(423)),e),e=F0(t,e,r,n,i);break e}else if(r!==i){i=fo(Error($(424)),e),e=F0(t,e,r,n,i);break e}else for(Jt=Zr(e.stateNode.containerInfo.firstChild),Zt=e,je=!0,Rn=null,n=ZS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===i){e=wr(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return nk(e),t===null&&Qh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Vh(r,i)?o=null:s!==null&&Vh(r,s)&&(e.flags|=32),_k(t,e),It(t,e,o,n),e.child;case 6:return t===null&&Qh(e),null;case 13:return Rk(t,e,n);case 4:return ng(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lo(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),L0(t,e,r,i,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Oe(_u,r._currentValue),r._currentValue=o,s!==null)if(Ln(s.value,o)){if(s.children===i.children&&!Bt.current){e=wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=br(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Gh(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qs(e,n),i=vn(i),r=r(i),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),j0(t,e,r,i,n);case 15:return wk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Ml(t,e),e.tag=1,zt(r)?(t=!0,Tu(e)):t=!1,qs(e,n),Ck(e,r,i),Yh(e,r,i,n),ep(null,e,r,!0,t,n);case 19:return Ok(t,e,n);case 22:return Ek(t,e,n)}throw Error($(156,e.tag))};function Wk(t,e){return bS(t,e)}function BP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new BP(t,e,n,r)}function vg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zP(t){if(typeof t=="function")return vg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lm)return 11;if(t===jm)return 14}return 2}function ri(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ws:return Li(n.children,i,s,e);case Am:o=8,i|=8;break;case kh:return t=hn(12,n,e,i|2),t.elementType=kh,t.lanes=s,t;case Ch:return t=hn(13,n,e,i),t.elementType=Ch,t.lanes=s,t;case xh:return t=hn(19,n,e,i),t.elementType=xh,t.lanes=s,t;case nS:return kd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eS:o=10;break e;case tS:o=9;break e;case Lm:o=11;break e;case jm:o=14;break e;case zr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=hn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Li(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function kd(t,e,n,r){return t=hn(22,t,r,e),t.elementType=nS,t.lanes=n,t.stateNode={isHidden:!1},t}function Mf(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function If(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $P(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yg(t,e,n,r,i,s,o,a,c){return t=new $P(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tg(s),t}function VP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kk(t){if(!t)return ai;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(zt(n))return KS(t,n,e)}return e}function Qk(t,e,n,r,i,s,o,a,c){return t=yg(n,r,!0,t,i,s,o,a,c),t.context=Kk(null),n=t.current,r=Nt(),i=ni(n),s=br(r,i),s.callback=e??null,ei(n,s,i),t.current.lanes=i,Ec(t,i,r),$t(t,r),t}function Cd(t,e,n,r){var i=e.current,s=Nt(),o=ni(i);return n=Kk(n),e.context===null?e.context=n:e.pendingContext=n,e=br(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ei(i,e,o),t!==null&&(Dn(t,i,o,s),Pl(t,i,o)),o}function ju(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bg(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function qP(){return null}var Gk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sg(t){this._internalRoot=t}xd.prototype.render=Sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Cd(t,e,null,null)};xd.prototype.unmount=Sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qi(function(){Cd(null,t,null,null)}),e[xr]=null}};function xd(t){this._internalRoot=t}xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=ES();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&PS(t)}};function kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J0(){}function HP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=ju(o);s.call(l)}}var o=Qk(e,r,t,0,null,!1,!1,"",J0);return t._reactRootContainer=o,t[xr]=o.current,Ha(t.nodeType===8?t.parentNode:t),qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=ju(c);a.call(l)}}var c=yg(t,0,!1,null,null,!1,!1,"",J0);return t._reactRootContainer=c,t[xr]=c.current,Ha(t.nodeType===8?t.parentNode:t),qi(function(){Cd(e,c,n,r)}),c}function wd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=ju(o);a.call(c)}}Cd(e,o,t,i)}else o=HP(n,e,t,i,r);return ju(o)}TS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ca(e.pendingLanes);n!==0&&(Bm(e,n|1),$t(e,Ke()),!(ve&6)&&(ho=Ke()+500,mi()))}break;case 13:qi(function(){var r=Tr(t,1);if(r!==null){var i=Nt();Dn(r,t,1,i)}}),bg(t,1)}};zm=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Nt();Dn(e,t,134217728,n)}bg(t,134217728)}};wS=function(t){if(t.tag===13){var e=ni(t),n=Tr(t,e);if(n!==null){var r=Nt();Dn(n,t,e,r)}bg(t,e)}};ES=function(){return ke};_S=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Nh=function(t,e,n){switch(e){case"input":if(Eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=md(r);if(!i)throw Error($(90));iS(r),Eh(r,i)}}}break;case"textarea":oS(t,n);break;case"select":e=n.value,e!=null&&Bs(t,!!n.multiple,e,!1)}};hS=pg;pS=qi;var WP={usingClientEntryPoint:!1,Events:[Pc,Rs,md,dS,fS,pg]},Ho={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KP={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vS(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||qP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{dd=ul.inject(KP),Jn=ul}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(e))throw Error($(200));return VP(t,e,null,n)};on.createRoot=function(t,e){if(!kg(t))throw Error($(299));var n=!1,r="",i=Gk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yg(t,1,!1,null,null,n,!1,r,i),t[xr]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Sg(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=vS(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return qi(t)};on.hydrate=function(t,e,n){if(!Td(e))throw Error($(200));return wd(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!kg(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Gk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Qk(e,null,t,1,n??null,i,!1,s,o),t[xr]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xd(e)};on.render=function(t,e,n){if(!Td(e))throw Error($(200));return wd(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Td(t))throw Error($(40));return t._reactRootContainer?(qi(function(){wd(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};on.unstable_batchedUpdates=pg;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Td(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return wd(t,e,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function Jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jk)}catch(t){console.error(t)}}Jk(),Jb.exports=on;var Cg=Jb.exports;const QP=To(Cg),GP=_m({__proto__:null,default:QP},[Cg]);var Y0=Cg;bh.createRoot=Y0.createRoot,bh.hydrateRoot=Y0.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)}var Je;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Je||(Je={}));const X0="popstate";function JP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ec("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hi(i)}return XP(e,n,null,t)}function de(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function po(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YP(){return Math.random().toString(36).substr(2,8)}function Z0(t,e){return{usr:t.state,key:t.key,idx:e}}function ec(t,e,n,r){return n===void 0&&(n=null),Ue({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gi(e):e,{state:n,key:e&&e.key||r||YP()})}function Hi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Je.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Ue({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Je.Pop;let k=u(),v=k==null?null:k-l;l=k,c&&c({action:a,location:y.location,delta:v})}function f(k,v){a=Je.Push;let b=ec(y.location,k,v);l=u()+1;let S=Z0(b,l),C=y.createHref(b);try{o.pushState(S,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(C)}s&&c&&c({action:a,location:y.location,delta:1})}function h(k,v){a=Je.Replace;let b=ec(y.location,k,v);l=u();let S=Z0(b,l),C=y.createHref(b);o.replaceState(S,"",C),s&&c&&c({action:a,location:y.location,delta:0})}function p(k){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof k=="string"?k:Hi(k);return b=b.replace(/ $/,"%20"),de(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let y={get action(){return a},get location(){return t(i,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(X0,d),c=k,()=>{i.removeEventListener(X0,d),c=null}},createHref(k){return e(i,k)},createURL:p,encodeLocation(k){let v=p(k);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(k){return o.go(k)}};return y}var Pe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Pe||(Pe={}));const ZP=new Set(["lazy","caseSensitive","path","id","index","children"]);function e5(t){return t.index===!0}function tc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(de(i.index!==!0||!i.children,"Cannot specify children on an index route"),de(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),e5(i)){let c=Ue({},i,e(i),{id:a});return r[a]=c,c}else{let c=Ue({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=tc(i.children,e,o,r)),c}})}function _i(t,e,n){return n===void 0&&(n="/"),Al(t,e,n,!1)}function Al(t,e,n,r){let i=typeof e=="string"?gi(e):e,s=Po(i.pathname||"/",n);if(s==null)return null;let o=Yk(t);n5(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=h5(s);a=d5(o[c],l,r)}return a}function t5(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Yk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(de(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Sr([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(de(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Yk(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:l5(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Xk(s.path))i(s,o,c)}),e}function Xk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Xk(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function n5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:u5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r5=/^:[\w-]+$/,i5=3,s5=2,o5=1,a5=10,c5=-2,ey=t=>t==="*";function l5(t,e){let n=t.split("/"),r=n.length;return n.some(ey)&&(r+=c5),e&&(r+=s5),n.filter(i=>!ey(i)).reduce((i,s)=>i+(r5.test(s)?i5:s===""?o5:a5),r)}function u5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function d5(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=ty({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=ty({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Sr([s,d.pathname]),pathnameBase:g5(Sr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Sr([s,d.pathnameBase]))}return o}function ty(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=f5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function f5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),po(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function h5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return po(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function p5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gi(t):t;return{pathname:n?n.startsWith("/")?n:m5(n,e):e,search:v5(r),hash:y5(i)}}function m5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Nf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ed(t,e){let n=Zk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _d(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=gi(t):(i=Ue({},t),de(!i.pathname||!i.pathname.includes("?"),Nf("?","pathname","search",i)),de(!i.pathname||!i.pathname.includes("#"),Nf("#","pathname","hash",i)),de(!i.search||!i.search.includes("#"),Nf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=p5(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),g5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),v5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,y5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Pd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eC=["post","put","patch","delete"],b5=new Set(eC),S5=["get",...eC],k5=new Set(S5),C5=new Set([301,302,303,307,308]),x5=new Set([307,308]),Df={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},T5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),tC="remix-router-transitions";function E5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;de(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let _=t.detectErrorBoundary;i=O=>({hasErrorBoundary:_(O)})}else i=w5;let s={},o=tc(t.routes,i,void 0,s),a,c=t.basename||"/",l=t.unstable_dataStrategy||M5,u=t.unstable_patchRoutesOnMiss,d=Ue({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,h=new Set,p=null,y=null,k=null,v=t.hydrationData!=null,b=_i(o,t.history.location,c),S=null;if(b==null&&!u){let _=Ot(404,{pathname:t.history.location.pathname}),{matches:O,route:N}=dy(o);b=O,S={[N.id]:_}}b&&u&&!t.hydrationData&&sf(b,o,t.history.location.pathname).active&&(b=null);let C;if(!b)C=!1,b=[];else if(b.some(_=>_.route.lazy))C=!1;else if(!b.some(_=>_.route.loader))C=!0;else if(d.v7_partialHydration){let _=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null,N=F=>F.route.loader?typeof F.route.loader=="function"&&F.route.loader.hydrate===!0?!1:_&&_[F.route.id]!==void 0||O&&O[F.route.id]!==void 0:!0;if(O){let F=b.findIndex(J=>O[J.route.id]!==void 0);C=b.slice(0,F+1).every(N)}else C=b.every(N)}else C=t.hydrationData!=null;let T,x={historyAction:t.history.action,location:t.history.location,matches:b,initialized:C,navigation:Df,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},w=Je.Pop,E=!1,P,M=!1,I=new Map,A=null,q=!1,V=!1,ne=[],ee=[],Z=new Map,z=0,Q=-1,W=new Map,ce=new Set,oe=new Map,ye=new Map,ot=new Set,kn=new Map,_t=new Map,ls=new Map,ef=!1;function r2(){if(f=t.history.listen(_=>{let{action:O,location:N,delta:F}=_;if(ef){ef=!1;return}po(_t.size===0||F!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let J=Fv({currentLocation:x.location,nextLocation:N,historyAction:O});if(J&&F!=null){ef=!0,t.history.go(F*-1),$c(J,{state:"blocked",location:N,proceed(){$c(J,{state:"proceeding",proceed:void 0,reset:void 0,location:N}),t.history.go(F)},reset(){let te=new Map(x.blockers);te.set(J,Wo),Pt({blockers:te})}});return}return xi(O,N)}),n){q5(e,I);let _=()=>H5(e,I);e.addEventListener("pagehide",_),A=()=>e.removeEventListener("pagehide",_)}return x.initialized||xi(Je.Pop,x.location,{initialHydration:!0}),T}function i2(){f&&f(),A&&A(),h.clear(),P&&P.abort(),x.fetchers.forEach((_,O)=>zc(O)),x.blockers.forEach((_,O)=>Uv(O))}function s2(_){return h.add(_),()=>h.delete(_)}function Pt(_,O){O===void 0&&(O={}),x=Ue({},x,_);let N=[],F=[];d.v7_fetcherPersist&&x.fetchers.forEach((J,te)=>{J.state==="idle"&&(ot.has(te)?F.push(te):N.push(te))}),[...h].forEach(J=>J(x,{deletedFetchers:F,unstable_viewTransitionOpts:O.viewTransitionOpts,unstable_flushSync:O.flushSync===!0})),d.v7_fetcherPersist&&(N.forEach(J=>x.fetchers.delete(J)),F.forEach(J=>zc(J)))}function us(_,O,N){var F,J;let{flushSync:te}=N===void 0?{}:N,ae=x.actionData!=null&&x.navigation.formMethod!=null&&En(x.navigation.formMethod)&&x.navigation.state==="loading"&&((F=_.state)==null?void 0:F._isRedirect)!==!0,K;O.actionData?Object.keys(O.actionData).length>0?K=O.actionData:K=null:ae?K=x.actionData:K=null;let le=O.loaderData?ly(x.loaderData,O.loaderData,O.matches||[],O.errors):x.loaderData,re=x.blockers;re.size>0&&(re=new Map(re),re.forEach((Se,we)=>re.set(we,Wo)));let ie=E===!0||x.navigation.formMethod!=null&&En(x.navigation.formMethod)&&((J=_.state)==null?void 0:J._isRedirect)!==!0;a&&(o=a,a=void 0),q||w===Je.Pop||(w===Je.Push?t.history.push(_,_.state):w===Je.Replace&&t.history.replace(_,_.state));let Ce;if(w===Je.Pop){let Se=I.get(x.location.pathname);Se&&Se.has(_.pathname)?Ce={currentLocation:x.location,nextLocation:_}:I.has(_.pathname)&&(Ce={currentLocation:_,nextLocation:x.location})}else if(M){let Se=I.get(x.location.pathname);Se?Se.add(_.pathname):(Se=new Set([_.pathname]),I.set(x.location.pathname,Se)),Ce={currentLocation:x.location,nextLocation:_}}Pt(Ue({},O,{actionData:K,loaderData:le,historyAction:w,location:_,initialized:!0,navigation:Df,revalidation:"idle",restoreScrollPosition:zv(_,O.matches||x.matches),preventScrollReset:ie,blockers:re}),{viewTransitionOpts:Ce,flushSync:te===!0}),w=Je.Pop,E=!1,M=!1,q=!1,V=!1,ne=[],ee=[]}async function Mv(_,O){if(typeof _=="number"){t.history.go(_);return}let N=fp(x.location,x.matches,c,d.v7_prependBasename,_,d.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:F,submission:J,error:te}=ny(d.v7_normalizeFormMethod,!1,N,O),ae=x.location,K=ec(x.location,F,O&&O.state);K=Ue({},K,t.history.encodeLocation(K));let le=O&&O.replace!=null?O.replace:void 0,re=Je.Push;le===!0?re=Je.Replace:le===!1||J!=null&&En(J.formMethod)&&J.formAction===x.location.pathname+x.location.search&&(re=Je.Replace);let ie=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,Ce=(O&&O.unstable_flushSync)===!0,Se=Fv({currentLocation:ae,nextLocation:K,historyAction:re});if(Se){$c(Se,{state:"blocked",location:K,proceed(){$c(Se,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Mv(_,O)},reset(){let we=new Map(x.blockers);we.set(Se,Wo),Pt({blockers:we})}});return}return await xi(re,K,{submission:J,pendingError:te,preventScrollReset:ie,replace:O&&O.replace,enableViewTransition:O&&O.unstable_viewTransition,flushSync:Ce})}function o2(){if(tf(),Pt({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){xi(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}xi(w||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation})}}async function xi(_,O,N){P&&P.abort(),P=null,w=_,q=(N&&N.startUninterruptedRevalidation)===!0,g2(x.location,x.matches),E=(N&&N.preventScrollReset)===!0,M=(N&&N.enableViewTransition)===!0;let F=a||o,J=N&&N.overrideNavigation,te=_i(F,O,c),ae=(N&&N.flushSync)===!0,K=sf(te,F,O.pathname);if(K.active&&K.matches&&(te=K.matches),!te){let{error:be,notFoundMatches:at,route:Ge}=nf(O.pathname);us(O,{matches:at,loaderData:{},errors:{[Ge.id]:be}},{flushSync:ae});return}if(x.initialized&&!V&&j5(x.location,O)&&!(N&&N.submission&&En(N.submission.formMethod))){us(O,{matches:te},{flushSync:ae});return}P=new AbortController;let le=ms(t.history,O,P.signal,N&&N.submission),re;if(N&&N.pendingError)re=[Ls(te).route.id,{type:Pe.error,error:N.pendingError}];else if(N&&N.submission&&En(N.submission.formMethod)){let be=await a2(le,O,N.submission,te,K.active,{replace:N.replace,flushSync:ae});if(be.shortCircuited)return;if(be.pendingActionResult){let[at,Ge]=be.pendingActionResult;if(Gt(Ge)&&Pd(Ge.error)&&Ge.error.status===404){P=null,us(O,{matches:be.matches,loaderData:{},errors:{[at]:Ge.error}});return}}te=be.matches||te,re=be.pendingActionResult,J=Af(O,N.submission),ae=!1,K.active=!1,le=ms(t.history,le.url,le.signal)}let{shortCircuited:ie,matches:Ce,loaderData:Se,errors:we}=await c2(le,O,te,K.active,J,N&&N.submission,N&&N.fetcherSubmission,N&&N.replace,N&&N.initialHydration===!0,ae,re);ie||(P=null,us(O,Ue({matches:Ce||te},uy(re),{loaderData:Se,errors:we})))}async function a2(_,O,N,F,J,te){te===void 0&&(te={}),tf();let ae=$5(O,N);if(Pt({navigation:ae},{flushSync:te.flushSync===!0}),J){let re=await qc(F,O.pathname,_.signal);if(re.type==="aborted")return{shortCircuited:!0};if(re.type==="error"){let{boundaryId:ie,error:Ce}=Vc(O.pathname,re);return{matches:re.partialMatches,pendingActionResult:[ie,{type:Pe.error,error:Ce}]}}else if(re.matches)F=re.matches;else{let{notFoundMatches:ie,error:Ce,route:Se}=nf(O.pathname);return{matches:ie,pendingActionResult:[Se.id,{type:Pe.error,error:Ce}]}}}let K,le=ua(F,O);if(!le.route.action&&!le.route.lazy)K={type:Pe.error,error:Ot(405,{method:_.method,pathname:O.pathname,routeId:le.route.id})};else if(K=(await Ao("action",_,[le],F))[0],_.signal.aborted)return{shortCircuited:!0};if(Ni(K)){let re;return te&&te.replace!=null?re=te.replace:re=oy(K.response.headers.get("Location"),new URL(_.url),c)===x.location.pathname+x.location.search,await Do(_,K,{submission:N,replace:re}),{shortCircuited:!0}}if(Ii(K))throw Ot(400,{type:"defer-action"});if(Gt(K)){let re=Ls(F,le.route.id);return(te&&te.replace)!==!0&&(w=Je.Push),{matches:F,pendingActionResult:[re.route.id,K]}}return{matches:F,pendingActionResult:[le.route.id,K]}}async function c2(_,O,N,F,J,te,ae,K,le,re,ie){let Ce=J||Af(O,te),Se=te||ae||py(Ce),we=!q&&(!d.v7_partialHydration||!le);if(F){if(we){let $e=Iv(ie);Pt(Ue({navigation:Ce},$e!==void 0?{actionData:$e}:{}),{flushSync:re})}let ue=await qc(N,O.pathname,_.signal);if(ue.type==="aborted")return{shortCircuited:!0};if(ue.type==="error"){let{boundaryId:$e,error:Kt}=Vc(O.pathname,ue);return{matches:ue.partialMatches,loaderData:{},errors:{[$e]:Kt}}}else if(ue.matches)N=ue.matches;else{let{error:$e,notFoundMatches:Kt,route:De}=nf(O.pathname);return{matches:Kt,loaderData:{},errors:{[De.id]:$e}}}}let be=a||o,[at,Ge]=ry(t.history,x,N,Se,O,d.v7_partialHydration&&le===!0,d.v7_skipActionErrorRevalidation,V,ne,ee,ot,oe,ce,be,c,ie);if(rf(ue=>!(N&&N.some($e=>$e.route.id===ue))||at&&at.some($e=>$e.route.id===ue)),Q=++z,at.length===0&&Ge.length===0){let ue=Lv();return us(O,Ue({matches:N,loaderData:{},errors:ie&&Gt(ie[1])?{[ie[0]]:ie[1].error}:null},uy(ie),ue?{fetchers:new Map(x.fetchers)}:{}),{flushSync:re}),{shortCircuited:!0}}if(we){let ue={};if(!F){ue.navigation=Ce;let $e=Iv(ie);$e!==void 0&&(ue.actionData=$e)}Ge.length>0&&(ue.fetchers=l2(Ge)),Pt(ue,{flushSync:re})}Ge.forEach(ue=>{Z.has(ue.key)&&Ar(ue.key),ue.controller&&Z.set(ue.key,ue.controller)});let Lo=()=>Ge.forEach(ue=>Ar(ue.key));P&&P.signal.addEventListener("abort",Lo);let{loaderResults:Lr,fetcherResults:ds}=await Nv(x.matches,N,at,Ge,_);if(_.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Lo),Ge.forEach(ue=>Z.delete(ue.key));let fs=fy([...Lr,...ds]);if(fs){if(fs.idx>=at.length){let ue=Ge[fs.idx-at.length].key;ce.add(ue)}return await Do(_,fs.result,{replace:K}),{shortCircuited:!0}}let{loaderData:hs,errors:zn}=cy(x,N,at,Lr,ie,Ge,ds,kn);kn.forEach((ue,$e)=>{ue.subscribe(Kt=>{(Kt||ue.done)&&kn.delete($e)})}),d.v7_partialHydration&&le&&x.errors&&Object.entries(x.errors).filter(ue=>{let[$e]=ue;return!at.some(Kt=>Kt.route.id===$e)}).forEach(ue=>{let[$e,Kt]=ue;zn=Object.assign(zn||{},{[$e]:Kt})});let Hc=Lv(),Wc=jv(Q),Kc=Hc||Wc||Ge.length>0;return Ue({matches:N,loaderData:hs,errors:zn},Kc?{fetchers:new Map(x.fetchers)}:{})}function Iv(_){if(_&&!Gt(_[1]))return{[_[0]]:_[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function l2(_){return _.forEach(O=>{let N=x.fetchers.get(O.key),F=Ko(void 0,N?N.data:void 0);x.fetchers.set(O.key,F)}),new Map(x.fetchers)}function u2(_,O,N,F){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Z.has(_)&&Ar(_);let J=(F&&F.unstable_flushSync)===!0,te=a||o,ae=fp(x.location,x.matches,c,d.v7_prependBasename,N,d.v7_relativeSplatPath,O,F==null?void 0:F.relative),K=_i(te,ae,c),le=sf(K,te,ae);if(le.active&&le.matches&&(K=le.matches),!K){cr(_,O,Ot(404,{pathname:ae}),{flushSync:J});return}let{path:re,submission:ie,error:Ce}=ny(d.v7_normalizeFormMethod,!0,ae,F);if(Ce){cr(_,O,Ce,{flushSync:J});return}let Se=ua(K,re);if(E=(F&&F.preventScrollReset)===!0,ie&&En(ie.formMethod)){d2(_,O,re,Se,K,le.active,J,ie);return}oe.set(_,{routeId:O,path:re}),f2(_,O,re,Se,K,le.active,J,ie)}async function d2(_,O,N,F,J,te,ae,K){tf(),oe.delete(_);function le(De){if(!De.route.action&&!De.route.lazy){let lr=Ot(405,{method:K.formMethod,pathname:N,routeId:O});return cr(_,O,lr,{flushSync:ae}),!0}return!1}if(!te&&le(F))return;let re=x.fetchers.get(_);Dr(_,V5(K,re),{flushSync:ae});let ie=new AbortController,Ce=ms(t.history,N,ie.signal,K);if(te){let De=await qc(J,N,Ce.signal);if(De.type==="aborted")return;if(De.type==="error"){let{error:lr}=Vc(N,De);cr(_,O,lr,{flushSync:ae});return}else if(De.matches){if(J=De.matches,F=ua(J,N),le(F))return}else{cr(_,O,Ot(404,{pathname:N}),{flushSync:ae});return}}Z.set(_,ie);let Se=z,be=(await Ao("action",Ce,[F],J))[0];if(Ce.signal.aborted){Z.get(_)===ie&&Z.delete(_);return}if(d.v7_fetcherPersist&&ot.has(_)){if(Ni(be)||Gt(be)){Dr(_,Br(void 0));return}}else{if(Ni(be))if(Z.delete(_),Q>Se){Dr(_,Br(void 0));return}else return ce.add(_),Dr(_,Ko(K)),Do(Ce,be,{fetcherSubmission:K});if(Gt(be)){cr(_,O,be.error);return}}if(Ii(be))throw Ot(400,{type:"defer-action"});let at=x.navigation.location||x.location,Ge=ms(t.history,at,ie.signal),Lo=a||o,Lr=x.navigation.state!=="idle"?_i(Lo,x.navigation.location,c):x.matches;de(Lr,"Didn't find any matches after fetcher action");let ds=++z;W.set(_,ds);let fs=Ko(K,be.data);x.fetchers.set(_,fs);let[hs,zn]=ry(t.history,x,Lr,K,at,!1,d.v7_skipActionErrorRevalidation,V,ne,ee,ot,oe,ce,Lo,c,[F.route.id,be]);zn.filter(De=>De.key!==_).forEach(De=>{let lr=De.key,$v=x.fetchers.get(lr),b2=Ko(void 0,$v?$v.data:void 0);x.fetchers.set(lr,b2),Z.has(lr)&&Ar(lr),De.controller&&Z.set(lr,De.controller)}),Pt({fetchers:new Map(x.fetchers)});let Hc=()=>zn.forEach(De=>Ar(De.key));ie.signal.addEventListener("abort",Hc);let{loaderResults:Wc,fetcherResults:Kc}=await Nv(x.matches,Lr,hs,zn,Ge);if(ie.signal.aborted)return;ie.signal.removeEventListener("abort",Hc),W.delete(_),Z.delete(_),zn.forEach(De=>Z.delete(De.key));let ue=fy([...Wc,...Kc]);if(ue){if(ue.idx>=hs.length){let De=zn[ue.idx-hs.length].key;ce.add(De)}return Do(Ge,ue.result)}let{loaderData:$e,errors:Kt}=cy(x,x.matches,hs,Wc,void 0,zn,Kc,kn);if(x.fetchers.has(_)){let De=Br(be.data);x.fetchers.set(_,De)}jv(ds),x.navigation.state==="loading"&&ds>Q?(de(w,"Expected pending action"),P&&P.abort(),us(x.navigation.location,{matches:Lr,loaderData:$e,errors:Kt,fetchers:new Map(x.fetchers)})):(Pt({errors:Kt,loaderData:ly(x.loaderData,$e,Lr,Kt),fetchers:new Map(x.fetchers)}),V=!1)}async function f2(_,O,N,F,J,te,ae,K){let le=x.fetchers.get(_);Dr(_,Ko(K,le?le.data:void 0),{flushSync:ae});let re=new AbortController,ie=ms(t.history,N,re.signal);if(te){let be=await qc(J,N,ie.signal);if(be.type==="aborted")return;if(be.type==="error"){let{error:at}=Vc(N,be);cr(_,O,at,{flushSync:ae});return}else if(be.matches)J=be.matches,F=ua(J,N);else{cr(_,O,Ot(404,{pathname:N}),{flushSync:ae});return}}Z.set(_,re);let Ce=z,we=(await Ao("loader",ie,[F],J))[0];if(Ii(we)&&(we=await oC(we,ie.signal,!0)||we),Z.get(_)===re&&Z.delete(_),!ie.signal.aborted){if(ot.has(_)){Dr(_,Br(void 0));return}if(Ni(we))if(Q>Ce){Dr(_,Br(void 0));return}else{ce.add(_),await Do(ie,we);return}if(Gt(we)){cr(_,O,we.error);return}de(!Ii(we),"Unhandled fetcher deferred data"),Dr(_,Br(we.data))}}async function Do(_,O,N){let{submission:F,fetcherSubmission:J,replace:te}=N===void 0?{}:N;O.response.headers.has("X-Remix-Revalidate")&&(V=!0);let ae=O.response.headers.get("Location");de(ae,"Expected a Location header on the redirect Response"),ae=oy(ae,new URL(_.url),c);let K=ec(x.location,ae,{_isRedirect:!0});if(n){let we=!1;if(O.response.headers.has("X-Remix-Reload-Document"))we=!0;else if(Tg.test(ae)){const be=t.history.createURL(ae);we=be.origin!==e.location.origin||Po(be.pathname,c)==null}if(we){te?e.location.replace(ae):e.location.assign(ae);return}}P=null;let le=te===!0?Je.Replace:Je.Push,{formMethod:re,formAction:ie,formEncType:Ce}=x.navigation;!F&&!J&&re&&ie&&Ce&&(F=py(x.navigation));let Se=F||J;if(x5.has(O.response.status)&&Se&&En(Se.formMethod))await xi(le,K,{submission:Ue({},Se,{formAction:ae}),preventScrollReset:E});else{let we=Af(K,F);await xi(le,K,{overrideNavigation:we,fetcherSubmission:J,preventScrollReset:E})}}async function Ao(_,O,N,F){try{let J=await I5(l,_,O,N,F,s,i);return await Promise.all(J.map((te,ae)=>{if(F5(te)){let K=te.result;return{type:Pe.redirect,response:A5(K,O,N[ae].route.id,F,c,d.v7_relativeSplatPath)}}return D5(te)}))}catch(J){return N.map(()=>({type:Pe.error,error:J}))}}async function Nv(_,O,N,F,J){let[te,...ae]=await Promise.all([N.length?Ao("loader",J,N,O):[],...F.map(K=>{if(K.matches&&K.match&&K.controller){let le=ms(t.history,K.path,K.controller.signal);return Ao("loader",le,[K.match],K.matches).then(re=>re[0])}else return Promise.resolve({type:Pe.error,error:Ot(404,{pathname:K.path})})})]);return await Promise.all([hy(_,N,te,te.map(()=>J.signal),!1,x.loaderData),hy(_,F.map(K=>K.match),ae,F.map(K=>K.controller?K.controller.signal:null),!0)]),{loaderResults:te,fetcherResults:ae}}function tf(){V=!0,ne.push(...rf()),oe.forEach((_,O)=>{Z.has(O)&&(ee.push(O),Ar(O))})}function Dr(_,O,N){N===void 0&&(N={}),x.fetchers.set(_,O),Pt({fetchers:new Map(x.fetchers)},{flushSync:(N&&N.flushSync)===!0})}function cr(_,O,N,F){F===void 0&&(F={});let J=Ls(x.matches,O);zc(_),Pt({errors:{[J.route.id]:N},fetchers:new Map(x.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Dv(_){return d.v7_fetcherPersist&&(ye.set(_,(ye.get(_)||0)+1),ot.has(_)&&ot.delete(_)),x.fetchers.get(_)||T5}function zc(_){let O=x.fetchers.get(_);Z.has(_)&&!(O&&O.state==="loading"&&W.has(_))&&Ar(_),oe.delete(_),W.delete(_),ce.delete(_),ot.delete(_),x.fetchers.delete(_)}function h2(_){if(d.v7_fetcherPersist){let O=(ye.get(_)||0)-1;O<=0?(ye.delete(_),ot.add(_)):ye.set(_,O)}else zc(_);Pt({fetchers:new Map(x.fetchers)})}function Ar(_){let O=Z.get(_);de(O,"Expected fetch controller: "+_),O.abort(),Z.delete(_)}function Av(_){for(let O of _){let N=Dv(O),F=Br(N.data);x.fetchers.set(O,F)}}function Lv(){let _=[],O=!1;for(let N of ce){let F=x.fetchers.get(N);de(F,"Expected fetcher: "+N),F.state==="loading"&&(ce.delete(N),_.push(N),O=!0)}return Av(_),O}function jv(_){let O=[];for(let[N,F]of W)if(F<_){let J=x.fetchers.get(N);de(J,"Expected fetcher: "+N),J.state==="loading"&&(Ar(N),W.delete(N),O.push(N))}return Av(O),O.length>0}function p2(_,O){let N=x.blockers.get(_)||Wo;return _t.get(_)!==O&&_t.set(_,O),N}function Uv(_){x.blockers.delete(_),_t.delete(_)}function $c(_,O){let N=x.blockers.get(_)||Wo;de(N.state==="unblocked"&&O.state==="blocked"||N.state==="blocked"&&O.state==="blocked"||N.state==="blocked"&&O.state==="proceeding"||N.state==="blocked"&&O.state==="unblocked"||N.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+N.state+" -> "+O.state);let F=new Map(x.blockers);F.set(_,O),Pt({blockers:F})}function Fv(_){let{currentLocation:O,nextLocation:N,historyAction:F}=_;if(_t.size===0)return;_t.size>1&&po(!1,"A router only supports one blocker at a time");let J=Array.from(_t.entries()),[te,ae]=J[J.length-1],K=x.blockers.get(te);if(!(K&&K.state==="proceeding")&&ae({currentLocation:O,nextLocation:N,historyAction:F}))return te}function nf(_){let O=Ot(404,{pathname:_}),N=a||o,{matches:F,route:J}=dy(N);return rf(),{notFoundMatches:F,route:J,error:O}}function Vc(_,O){return{boundaryId:Ls(O.partialMatches).route.id,error:Ot(400,{type:"route-discovery",pathname:_,message:O.error!=null&&"message"in O.error?O.error:String(O.error)})}}function rf(_){let O=[];return kn.forEach((N,F)=>{(!_||_(F))&&(N.cancel(),O.push(F),kn.delete(F))}),O}function m2(_,O,N){if(p=_,k=O,y=N||null,!v&&x.navigation===Df){v=!0;let F=zv(x.location,x.matches);F!=null&&Pt({restoreScrollPosition:F})}return()=>{p=null,k=null,y=null}}function Bv(_,O){return y&&y(_,O.map(F=>t5(F,x.loaderData)))||_.key}function g2(_,O){if(p&&k){let N=Bv(_,O);p[N]=k()}}function zv(_,O){if(p){let N=Bv(_,O),F=p[N];if(typeof F=="number")return F}return null}function sf(_,O,N){if(u)if(_){let F=_[_.length-1].route;if(F.path&&(F.path==="*"||F.path.endsWith("/*")))return{active:!0,matches:Al(O,N,c,!0)}}else return{active:!0,matches:Al(O,N,c,!0)||[]};return{active:!1,matches:null}}async function qc(_,O,N){let F=_,J=F.length>0?F[F.length-1].route:null;for(;;){let te=a==null,ae=a||o;try{await O5(u,O,F,ae,s,i,ls,N)}catch(ie){return{type:"error",error:ie,partialMatches:F}}finally{te&&(o=[...o])}if(N.aborted)return{type:"aborted"};let K=_i(ae,O,c),le=!1;if(K){let ie=K[K.length-1].route;if(ie.index)return{type:"success",matches:K};if(ie.path&&ie.path.length>0)if(ie.path==="*")le=!0;else return{type:"success",matches:K}}let re=Al(ae,O,c,!0);if(!re||F.map(ie=>ie.route.id).join("-")===re.map(ie=>ie.route.id).join("-"))return{type:"success",matches:le?K:null};if(F=re,J=F[F.length-1].route,J.path==="*")return{type:"success",matches:F}}}function v2(_){s={},a=tc(_,i,void 0,s)}function y2(_,O){let N=a==null;rC(_,O,a||o,s,i),N&&(o=[...o],Pt({}))}return T={get basename(){return c},get future(){return d},get state(){return x},get routes(){return o},get window(){return e},initialize:r2,subscribe:s2,enableScrollRestoration:m2,navigate:Mv,fetch:u2,revalidate:o2,createHref:_=>t.history.createHref(_),encodeLocation:_=>t.history.encodeLocation(_),getFetcher:Dv,deleteFetcher:h2,dispose:i2,getBlocker:p2,deleteBlocker:Uv,patchRoutes:y2,_internalFetchControllers:Z,_internalActiveDeferreds:kn,_internalSetRoutes:v2},T}function _5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function fp(t,e,n,r,i,s,o,a){let c,l;if(o){c=[];for(let d of e)if(c.push(d),d.route.id===o){l=d;break}}else c=e,l=e[e.length-1];let u=_d(i||".",Ed(c,s),Po(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!wg(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Sr([n,u.pathname])),Hi(u)}function ny(t,e,n,r){if(!r||!_5(r))return{path:n};if(r.formMethod&&!z5(r.formMethod))return{path:n,error:Ot(405,{method:r.formMethod})};let i=()=>({path:n,error:Ot(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=iC(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!En(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[y,k]=p;return""+h+y+"="+k+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!En(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}de(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=hp(r.formData),l=r.formData;else if(r.body instanceof FormData)c=hp(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=ay(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=ay(c)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(En(u.formMethod))return{path:n,submission:u};let d=gi(n);return e&&d.search&&wg(d.search)&&c.append("index",""),d.search="?"+c,{path:Hi(d),submission:u}}function P5(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function ry(t,e,n,r,i,s,o,a,c,l,u,d,f,h,p,y){let k=y?Gt(y[1])?y[1].error:y[1].data:void 0,v=t.createURL(e.location),b=t.createURL(i),S=y&&Gt(y[1])?y[0]:void 0,C=S?P5(n,S):n,T=y?y[1].statusCode:void 0,x=o&&T&&T>=400,w=C.filter((P,M)=>{let{route:I}=P;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return typeof I.loader!="function"||I.loader.hydrate?!0:e.loaderData[I.id]===void 0&&(!e.errors||e.errors[I.id]===void 0);if(R5(e.loaderData,e.matches[M],P)||c.some(V=>V===P.route.id))return!0;let A=e.matches[M],q=P;return iy(P,Ue({currentUrl:v,currentParams:A.params,nextUrl:b,nextParams:q.params},r,{actionResult:k,actionStatus:T,defaultShouldRevalidate:x?!1:a||v.pathname+v.search===b.pathname+b.search||v.search!==b.search||nC(A,q)}))}),E=[];return d.forEach((P,M)=>{if(s||!n.some(ne=>ne.route.id===P.routeId)||u.has(M))return;let I=_i(h,P.path,p);if(!I){E.push({key:M,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let A=e.fetchers.get(M),q=ua(I,P.path),V=!1;f.has(M)?V=!1:l.includes(M)?V=!0:A&&A.state!=="idle"&&A.data===void 0?V=a:V=iy(q,Ue({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:k,actionStatus:T,defaultShouldRevalidate:x?!1:a})),V&&E.push({key:M,routeId:P.routeId,path:P.path,matches:I,match:q,controller:new AbortController})}),[w,E]}function R5(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function nC(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function iy(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function O5(t,e,n,r,i,s,o,a){let c=[e,...n.map(l=>l.route.id)].join("-");try{let l=o.get(c);l||(l=t({path:e,matches:n,patch:(u,d)=>{a.aborted||rC(u,d,r,i,s)}}),o.set(c,l)),l&&U5(l)&&await l}finally{o.delete(c)}}function rC(t,e,n,r,i){if(t){var s;let o=r[t];de(o,"No route found to patch children into: routeId = "+t);let a=tc(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=tc(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function sy(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];de(i,"No route found in manifest");let s={};for(let o in r){let c=i[o]!==void 0&&o!=="hasErrorBoundary";po(!c,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!ZP.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Ue({},e(i),{lazy:void 0}))}function M5(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function I5(t,e,n,r,i,s,o,a){let c=r.reduce((d,f)=>d.add(f.route.id),new Set),l=new Set,u=await t({matches:i.map(d=>{let f=c.has(d.route.id);return Ue({},d,{shouldLoad:f,resolve:p=>(l.add(d.route.id),f?N5(e,n,d,s,o,p,a):Promise.resolve({type:Pe.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>de(l.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((d,f)=>c.has(i[f].route.id))}async function N5(t,e,n,r,i,s,o){let a,c,l=u=>{let d,f=new Promise((y,k)=>d=k);c=()=>d(),e.signal.addEventListener("abort",c);let h=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:o},...y!==void 0?[y]:[]),p;return s?p=s(y=>h(y)):p=(async()=>{try{return{type:"data",result:await h()}}catch(y){return{type:"error",result:y}}})(),Promise.race([p,f])};try{let u=n.route[t];if(n.route.lazy)if(u){let d,[f]=await Promise.all([l(u).catch(h=>{d=h}),sy(n.route,i,r)]);if(d!==void 0)throw d;a=f}else if(await sy(n.route,i,r),u=n.route[t],u)a=await l(u);else if(t==="action"){let d=new URL(e.url),f=d.pathname+d.search;throw Ot(405,{method:e.method,pathname:f,routeId:n.route.id})}else return{type:Pe.data,result:void 0};else if(u)a=await l(u);else{let d=new URL(e.url),f=d.pathname+d.search;throw Ot(404,{pathname:f})}de(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Pe.error,result:u}}finally{c&&e.signal.removeEventListener("abort",c)}return a}async function D5(t){let{result:e,type:n,status:r}=t;if(sC(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Pe.error,error:a}}return n===Pe.error?{type:Pe.error,error:new xg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Pe.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Pe.error)return{type:Pe.error,error:e,statusCode:Pd(e)?e.status:r};if(B5(e)){var i,s;return{type:Pe.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Pe.data,data:e,statusCode:r}}function A5(t,e,n,r,i,s){let o=t.headers.get("Location");if(de(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Tg.test(o)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);o=fp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function oy(t,e,n){if(Tg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Po(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ms(t,e,n,r){let i=t.createURL(iC(e)).toString(),s={signal:n};if(r&&En(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=hp(r.formData):s.body=r.formData}return new Request(i,s)}function hp(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function ay(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function L5(t,e,n,r,i,s){let o={},a=null,c,l=!1,u={},d=r&&Gt(r[1])?r[1].error:void 0;return n.forEach((f,h)=>{let p=e[h].route.id;if(de(!Ni(f),"Cannot handle redirect results in processLoaderData"),Gt(f)){let y=f.error;d!==void 0&&(y=d,d=void 0),a=a||{};{let k=Ls(t,p);a[k.route.id]==null&&(a[k.route.id]=y)}o[p]=void 0,l||(l=!0,c=Pd(f.error)?f.error.status:500),f.headers&&(u[p]=f.headers)}else Ii(f)?(i.set(p,f.deferredData),o[p]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(c=f.statusCode),f.headers&&(u[p]=f.headers)):(o[p]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(c=f.statusCode),f.headers&&(u[p]=f.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:c||200,loaderHeaders:u}}function cy(t,e,n,r,i,s,o,a){let{loaderData:c,errors:l}=L5(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:f,controller:h}=s[u];de(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(h&&h.signal.aborted))if(Gt(p)){let y=Ls(t.matches,f==null?void 0:f.route.id);l&&l[y.route.id]||(l=Ue({},l,{[y.route.id]:p.error})),t.fetchers.delete(d)}else if(Ni(p))de(!1,"Unhandled fetcher revalidation redirect");else if(Ii(p))de(!1,"Unhandled fetcher deferred data");else{let y=Br(p.data);t.fetchers.set(d,y)}}return{loaderData:c,errors:l}}function ly(t,e,n,r){let i=Ue({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function uy(t){return t?Gt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ls(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function dy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ot(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?c='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?c="defer() is not supported in actions":s==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new xg(t||500,a,new Error(c),!0)}function fy(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ni(n))return{result:n,idx:e}}}function iC(t){let e=typeof t=="string"?gi(t):t;return Hi(Ue({},e,{hash:""}))}function j5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function U5(t){return typeof t=="object"&&t!=null&&"then"in t}function F5(t){return sC(t.result)&&C5.has(t.result.status)}function Ii(t){return t.type===Pe.deferred}function Gt(t){return t.type===Pe.error}function Ni(t){return(t&&t.type)===Pe.redirect}function B5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function sC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function z5(t){return k5.has(t.toLowerCase())}function En(t){return b5.has(t.toLowerCase())}async function hy(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],c=e[o];if(!c)continue;let l=t.find(d=>d.route.id===c.route.id),u=l!=null&&!nC(l,c)&&(s&&s[c.route.id])!==void 0;if(Ii(a)&&(i||u)){let d=r[o];de(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await oC(a,d,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function oC(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Pe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Pe.error,error:i}}return{type:Pe.data,data:t.deferredData.data}}}function wg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ua(t,e){let n=typeof e=="string"?gi(e).search:e.search;if(t[t.length-1].route.index&&wg(n||""))return t[t.length-1];let r=Zk(t);return r[r.length-1]}function py(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Af(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ko(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function V5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Br(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function q5(t,e){try{let n=t.sessionStorage.getItem(tC);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function H5(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(tC,JSON.stringify(n))}catch(r){po(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(this,arguments)}const Rd=g.createContext(null),aC=g.createContext(null),vi=g.createContext(null),Eg=g.createContext(null),ir=g.createContext({outlet:null,matches:[],isDataRoute:!1}),cC=g.createContext(null);function W5(t,e){let{relative:n}=e===void 0?{}:e;Ro()||de(!1);let{basename:r,navigator:i}=g.useContext(vi),{hash:s,pathname:o,search:a}=uC(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Sr([r,o])),i.createHref({pathname:c,search:a,hash:s})}function Ro(){return g.useContext(Eg)!=null}function yi(){return Ro()||de(!1),g.useContext(Eg).location}function lC(t){g.useContext(vi).static||g.useLayoutEffect(t)}function bi(){let{isDataRoute:t}=g.useContext(ir);return t?oR():K5()}function K5(){Ro()||de(!1);let t=g.useContext(Rd),{basename:e,future:n,navigator:r}=g.useContext(vi),{matches:i}=g.useContext(ir),{pathname:s}=yi(),o=JSON.stringify(Ed(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return lC(()=>{a.current=!0}),g.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=_d(l,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Sr([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const Q5=g.createContext(null);function G5(t){let e=g.useContext(ir).outlet;return e&&g.createElement(Q5.Provider,{value:t},e)}function Od(){let{matches:t}=g.useContext(ir),e=t[t.length-1];return e?e.params:{}}function uC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(vi),{matches:i}=g.useContext(ir),{pathname:s}=yi(),o=JSON.stringify(Ed(i,r.v7_relativeSplatPath));return g.useMemo(()=>_d(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function J5(t,e,n,r){Ro()||de(!1);let{navigator:i}=g.useContext(vi),{matches:s}=g.useContext(ir),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=yi(),u;u=l;let d=u.pathname||"/",f=d;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let h=_i(t,{pathname:f});return tR(h&&h.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Sr([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Sr([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r)}function Y5(){let t=sR(),e=Pd(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const X5=g.createElement(Y5,null);class Z5 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ir.Provider,{value:this.props.routeContext},g.createElement(cC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eR(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(Rd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ir.Provider,{value:e},r)}function tR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||de(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,y=null,k=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||X5,c&&(l<0&&f===0?(aR("route-fallback"),p=!0,k=null):l===f&&(p=!0,k=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),b=()=>{let S;return h?S=y:p?S=k:d.route.Component?S=g.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,g.createElement(eR,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?g.createElement(Z5,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var dC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dC||{}),Fu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fu||{});function nR(t){let e=g.useContext(Rd);return e||de(!1),e}function rR(t){let e=g.useContext(aC);return e||de(!1),e}function iR(t){let e=g.useContext(ir);return e||de(!1),e}function fC(t){let e=iR(),n=e.matches[e.matches.length-1];return n.route.id||de(!1),n.route.id}function sR(){var t;let e=g.useContext(cC),n=rR(Fu.UseRouteError),r=fC(Fu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oR(){let{router:t}=nR(dC.UseNavigateStable),e=fC(Fu.UseNavigateStable),n=g.useRef(!1);return lC(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Uu({fromRouteId:e},s)))},[t,e])}const my={};function aR(t,e,n){my[t]||(my[t]=!0)}function cR(t){let{to:e,replace:n,state:r,relative:i}=t;Ro()||de(!1);let{future:s,static:o}=g.useContext(vi),{matches:a}=g.useContext(ir),{pathname:c}=yi(),l=bi(),u=_d(e,Ed(a,s.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return g.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function hC(t){return G5(t.context)}function lR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Je.Pop,navigator:s,static:o=!1,future:a}=t;Ro()&&de(!1);let c=e.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:c,navigator:s,static:o,future:Uu({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=gi(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,y=g.useMemo(()=>{let k=Po(u,c);return k==null?null:{location:{pathname:k,search:d,hash:f,state:h,key:p},navigationType:i}},[c,u,d,f,h,p,i]);return y==null?null:g.createElement(vi.Provider,{value:l},g.createElement(Eg.Provider,{children:n,value:y}))}new Promise(()=>{});function uR(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:g.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(this,arguments)}function dR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function fR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hR(t,e){return t.button===0&&(!e||e==="_self")&&!fR(t)}const pR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],mR="6";try{window.__reactRouterVersion=mR}catch{}function gR(t,e){return E5({basename:void 0,future:nc({},void 0,{v7_prependBasename:!0}),history:JP({window:void 0}),hydrationData:vR(),routes:t,mapRouteProperties:uR,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function vR(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=nc({},e,{errors:yR(e.errors)})),e}function yR(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new xg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const bR=g.createContext({isTransitioning:!1}),SR=g.createContext(new Map),kR="startTransition",gy=yh[kR],CR="flushSync",vy=GP[CR];function xR(t){gy?gy(t):t()}function Qo(t){vy?vy(t):t()}class TR{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function wR(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=g.useState(n.state),[o,a]=g.useState(),[c,l]=g.useState({isTransitioning:!1}),[u,d]=g.useState(),[f,h]=g.useState(),[p,y]=g.useState(),k=g.useRef(new Map),{v7_startTransition:v}=r||{},b=g.useCallback(E=>{v?xR(E):E()},[v]),S=g.useCallback((E,P)=>{let{deletedFetchers:M,unstable_flushSync:I,unstable_viewTransitionOpts:A}=P;M.forEach(V=>k.current.delete(V)),E.fetchers.forEach((V,ne)=>{V.data!==void 0&&k.current.set(ne,V.data)});let q=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!A||q){I?Qo(()=>s(E)):b(()=>s(E));return}if(I){Qo(()=>{f&&(u&&u.resolve(),f.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let V=n.window.document.startViewTransition(()=>{Qo(()=>s(E))});V.finished.finally(()=>{Qo(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})})}),Qo(()=>h(V));return}f?(u&&u.resolve(),f.skipTransition(),y({state:E,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(a(E),l({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[n.window,f,u,k,b]);g.useLayoutEffect(()=>n.subscribe(S),[n,S]),g.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new TR)},[c]),g.useEffect(()=>{if(u&&o&&n.window){let E=o,P=u.promise,M=n.window.document.startViewTransition(async()=>{b(()=>s(E)),await P});M.finished.finally(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})}),h(M)}},[b,o,u,n.window]),g.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),g.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),y(void 0))},[c.isTransitioning,p]),g.useEffect(()=>{},[]);let C=g.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:E=>n.navigate(E),push:(E,P,M)=>n.navigate(E,{state:P,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(E,P,M)=>n.navigate(E,{replace:!0,state:P,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),T=n.basename||"/",x=g.useMemo(()=>({router:n,navigator:C,static:!1,basename:T}),[n,C,T]),w=g.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return g.createElement(g.Fragment,null,g.createElement(Rd.Provider,{value:x},g.createElement(aC.Provider,{value:i},g.createElement(SR.Provider,{value:k.current},g.createElement(bR.Provider,{value:c},g.createElement(lR,{basename:T,location:i.location,navigationType:i.historyAction,navigator:C,future:w},i.initialized||n.future.v7_partialHydration?g.createElement(ER,{routes:n.routes,future:n.future,state:i}):e))))),null)}const ER=g.memo(_R);function _R(t){let{routes:e,future:n,state:r}=t;return J5(e,void 0,r,n)}const PR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,unstable_viewTransition:d}=e,f=dR(e,pR),{basename:h}=g.useContext(vi),p,y=!1;if(typeof l=="string"&&RR.test(l)&&(p=l,PR))try{let S=new URL(window.location.href),C=l.startsWith("//")?new URL(S.protocol+l):new URL(l),T=Po(C.pathname,h);C.origin===S.origin&&T!=null?l=T+C.search+C.hash:y=!0}catch{}let k=W5(l,{relative:i}),v=OR(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,unstable_viewTransition:d});function b(S){r&&r(S),S.defaultPrevented||v(S)}return g.createElement("a",nc({},f,{href:p||k,onClick:y||s?r:b,ref:n,target:c}))});var yy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yy||(yy={}));var by;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(by||(by={}));function OR(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,c=bi(),l=yi(),u=uC(t,{relative:o});return g.useCallback(d=>{if(hR(d,n)){d.preventDefault();let f=r!==void 0?r:Hi(l)===Hi(u);c(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,c,u,r,i,n,t,s,o,a])}function MR(){return m.jsx(_e.Fragment,{children:m.jsx(m.Fragment,{children:m.jsxs("div",{className:"lg:px-24 lg:py-24 md:py-20 md:px-44 px-4 py-24 items-center flex justify-center flex-col-reverse lg:flex-row md:gap-28 gap-16",children:[m.jsx("div",{className:"xl:pt-24 w-full xl:w-1/2 relative pb-12 lg:pb-0",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute",children:m.jsxs("div",{className:"",children:[m.jsx("h1",{className:"my-2 text-gray-800 font-bold text-2xl",children:"Looks like you've found the doorway to the great nothing"}),m.jsx("p",{className:"my-2 mb-9 text-gray-800",children:"Sorry about that! Please visit our hompage to get where you need to go."}),m.jsx(Le,{to:"/",className:"sm:w-full lg:w-auto mt-[5rem] border rounded md py-4 px-8 text-center bg-primary text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-opacity-50",children:"Go Home"})]})}),m.jsx("div",{children:m.jsx("img",{src:"https://i.ibb.co/G9DC8S0/404-2.png"})})]})}),m.jsx("div",{children:m.jsx("img",{src:"https://i.ibb.co/ck1SGFJ/Group.png"})})]})})})}function rc(){return m.jsxs(_e.Fragment,{children:[" ",m.jsxs(Le,{to:"/",className:"text-white text-[2rem] font-extrabold font-serif text-center",children:[m.jsx("span",{className:"text-primary",children:"CON"}),m.jsx("span",{children:"VOVE"})]})]})}function IR(){return m.jsx(_e.Fragment,{children:m.jsxs("footer",{className:"bg-black font-sans tracking-wide  ",children:[m.jsxs("div",{className:"max-w-screen-xl mx-auto px-10 py-14 grid sm:grid-cols-2 gap-10",children:[m.jsxs("div",{children:[m.jsx("div",{className:" mb-7",children:m.jsx(rc,{})}),m.jsx("h4",{className:"text-white text-lg font-semibold mb-7",children:"About Us"}),m.jsx("p",{className:"text-gray-300 text-sm",children:"Best choice for get better live streaming experience with your community"}),m.jsxs("ul",{className:"space-y-4 mt-5",children:[m.jsxs("li",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-block w-4 h-4 fill-current text-white mr-4",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"m14 9.09 8.81 1.75c.71.15 1.19.75 1.19 1.46v10.2c0 .83-.67 1.5-1.5 1.5h-9c.28 0 .5-.22.5-.5V23h8.5c.27 0 .5-.22.5-.5V12.3c0-.23-.16-.44-.39-.49L14 10.11z","data-original":"#000000"}),m.jsx("path",{d:"M19.5 14c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm0 3c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm0 3c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zM14 23.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-14c0-.15.07-.29.18-.39.12-.09.27-.13.42-.1l.4.08V23z","data-original":"#000000"}),m.jsx("path",{d:"M13 23v.5c0 .28.22.5.5.5h-4c.28 0 .5-.22.5-.5V23zM10.5 5c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm.5 3.5c0 .28-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2c.28 0 .5.22.5.5zm-.5 2.5c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm0 3c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm-4.5.5c0 .28-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2c.28 0 .5.22.5.5zM5.5 5c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm0 3c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm0 3c.28 0 .5.22.5.5s-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zM9 18.5c0-.28-.23-.5-.5-.5h-3c-.28 0-.5.22-.5.5V23H4v-4.5c0-.83.67-1.5 1.5-1.5h3c.83 0 1.5.67 1.5 1.5V23H9z","data-original":"#000000"}),m.jsx("path",{d:"M5 23h5v.5c0 .28-.22.5-.5.5h-5c-.28 0-.5-.22-.5-.5V23z","data-original":"#000000"}),m.jsx("path",{d:"m1.75.2 10.99 1.67c.73.12 1.26.74 1.26 1.48v5.74l-.4-.08c-.15-.03-.3.01-.42.1-.11.1-.18.24-.18.39V3.35c0-.25-.18-.46-.42-.5L1.59 1.19c-.03-.01-.06-.01-.09-.01-.12 0-.23.04-.32.12-.12.1-.18.23-.18.38V22.5c0 .28.23.5.5.5H4v.5c0 .28.22.5.5.5h-3C.67 24 0 23.33 0 22.5V1.68C0 1.24.19.82.53.54.87.25 1.31.13 1.75.2z","data-original":"#000000"})]}),m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Admin"})]}),m.jsxs("li",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-block w-4 h-4 fill-current text-white mr-4",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M27 7h-5V6c0-1.654-1.346-3-3-3h-6c-1.654 0-3 1.346-3 3v1H5c-1.654 0-3 1.346-3 3v16c0 1.654 1.346 3 3 3h22c1.654 0 3-1.346 3-3V10c0-1.654-1.346-3-3-3zM12 6c0-.551.449-1 1-1h6c.551 0 1 .449 1 1v1h-8zm-1 3h15.798l-3.036 4.555a.998.998 0 0 1-.832.445h-3.114A2.996 2.996 0 0 0 17 12h-2a2.996 2.996 0 0 0-2.816 2H9.07a1 1 0 0 1-.832-.445L5.202 9zm7 6c0 .551-.449 1-1 1h-2c-.551 0-1-.449-1-1s.449-1 1-1h2c.551 0 1 .449 1 1zm10 11c0 .551-.449 1-1 1H5c-.551 0-1-.449-1-1V10.803l2.574 3.861A2.996 2.996 0 0 0 9.07 16h3.114A2.996 2.996 0 0 0 15 18h2a2.996 2.996 0 0 0 2.816-2h3.114c1.005 0 1.938-.5 2.496-1.336L28 10.803z","data-original":"#000000"})}),m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Security"})]}),m.jsxs("li",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inline-block w-4 h-4 fill-current text-white mr-4",viewBox:"0 0 64 64",children:m.jsx("path",{d:"m52.148 42.678-6.479-4.527a5 5 0 0 0-6.963 1.238l-1.504 2.156c-2.52-1.69-5.333-4.05-8.014-6.732-2.68-2.68-5.04-5.493-6.73-8.013l2.154-1.504a4.96 4.96 0 0 0 2.064-3.225 4.98 4.98 0 0 0-.826-3.739l-4.525-6.478C20.378 10.5 18.85 9.69 17.24 9.69a4.69 4.69 0 0 0-1.628.291 8.97 8.97 0 0 0-1.685.828l-.895.63a6.782 6.782 0 0 0-.63.563c-1.092 1.09-1.866 2.472-2.303 4.104-1.865 6.99 2.754 17.561 11.495 26.301 7.34 7.34 16.157 11.9 23.011 11.9 1.175 0 2.281-.136 3.29-.406 1.633-.436 3.014-1.21 4.105-2.302.199-.199.388-.407.591-.67l.63-.899a9.007 9.007 0 0 0 .798-1.64c.763-2.06-.007-4.41-1.871-5.713z","data-original":"#000000"})}),m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Support"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-white text-lg font-semibold mb-7",children:"Products"}),m.jsxs("ul",{className:"list-none space-y-4",children:[m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Best Features"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Update arrivals"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Pricing"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Live"})})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-white text-lg font-semibold mb-7",children:"Resources"}),m.jsxs("ul",{className:"list-none space-y-4",children:[m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Documentation"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Tutorials"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"Blog"})}),m.jsx("li",{children:m.jsx(Le,{to:"/",className:"hover:text-white text-gray-300 text-sm",children:"FAQ"})})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-white text-lg font-semibold mb-7",children:"Subscribe"}),m.jsx("p",{className:"text-gray-300 mb-5",children:"Subscribe to our newsletter to receive updates and exclusive features."}),m.jsx("form",{children:m.jsxs("div",{className:"flex",children:[m.jsx("input",{type:"email",className:"px-4 py-4 text-sm rounded-l-md w-full focus:outline-none bg-gray-50",placeholder:"Enter your email address"}),m.jsx("button",{type:"button",className:"bg-gray-600 hover:bg-gray-500 text-white px-4 rounded-r-md text-sm tracking-wide transition-all",children:"Subscribe"})]})})]})]}),m.jsx("div",{className:"bg-gray-800 py-5 px-4 text-center",children:m.jsxs("p",{className:"text-gray-300 text-sm",children:[" 2024",m.jsx(Le,{to:"https://www.linkedin.com/in/sarwar-asik/",target:"_blank",className:"hover:underline mx-1",children:"Study Live"}),"All Rights Reserved."]})})]})})}class da extends Error{}da.prototype.name="InvalidTokenError";function NR(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function DR(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return NR(e)}catch{return atob(e)}}function AR(t,e){if(typeof t!="string")throw new da("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new da(`Invalid token specified: missing part #${n+1}`);let i;try{i=DR(r)}catch(s){throw new da(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new da(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const es="https://study-live-server.onrender.com/api/v1",LR="https://study-live-server.onrender.com",Md="study-auth",jR=t=>AR(t),pC=(t,e)=>typeof window>"u"?"":localStorage.setItem(t,e),UR=t=>typeof window>"u"?"":localStorage.getItem(t),Ll=()=>{const t=UR(Md);return t?jR(t):{e:""}},FR=()=>{localStorage.removeItem(Md),Ll()},Et=g.createContext(null),BR=({children:t})=>{const[e,n]=g.useState(Ll()??null),[r,i]=g.useState(!1);g.useEffect(()=>{(async()=>{i(!0);try{const a=await Ll();a!=null&&a.email&&(n(a),localStorage.setItem("userId",a==null?void 0:a.id))}catch(a){console.error("Error fetching user data:",a)}finally{i(!1)}})()},[]);const s=async()=>{i(!0);try{const o=await Ll();o&&n(o)}catch(o){console.error("Error refreshing user data:",o)}finally{i(!1)}};return m.jsx(Et.Provider,{value:{user:e,refreshUser:s,loading:r},children:t})};function Sy({items:t,buttonMenu:e,elementItem:n}){const[r,i]=g.useState(!1),s=g.useRef(null),{user:o,refreshUser:a}=g.useContext(Et),c=()=>{FR(),a()};return g.useEffect(()=>{const l=u=>{s.current&&!s.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),m.jsxs("div",{ref:s,className:"relative w-fit text-white flex items-center justify-center",children:[m.jsx("button",{onClick:()=>i(l=>!l),className:"",children:e}),m.jsxs("ul",{className:`${r?"visible":"invisible"} absolute top-12 z-50 w-full space-y-1 mt-1 cursor-pointer text-center capitalize min-w-fit bg-white`,children:[t.map((l,u)=>m.jsx("li",{onClick:()=>i(!1),className:`rounded-sm bg-primary p-2 ${r?"opacity-100 duration-500":"opacity-0 duration-150"} hover:bg-primary/80 text-nowrap px-3`,style:{transform:`translateY(${r?0:(u+1)*10}px)`},children:l},u)),o.email&&n,(o==null?void 0:o.email)&&m.jsx("button",{onClick:c,className:`rounded-sm bg-red-500 p-2 w-full ${r?"opacity-100 duration-500":"opacity-0 duration-150"} hover:bg-red-700 text-nowrap px-3`,style:{transform:`translateY(${r?0:"30"}px)`},children:"Logout "})]})]})}var mC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ky=_e.createContext&&_e.createContext(mC),zR=["attr","size","title"];function $R(t,e){if(t==null)return{};var n=VR(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VR(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bu.apply(this,arguments)}function Cy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cy(Object(n),!0).forEach(function(r){qR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qR(t,e,n){return e=HR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HR(t){var e=WR(t,"string");return typeof e=="symbol"?e:e+""}function WR(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gC(t){return t&&t.map((e,n)=>_e.createElement(e.tag,zu({key:n},e.attr),gC(e.child)))}function Wt(t){return e=>_e.createElement(KR,Bu({attr:zu({},t.attr)},e),gC(t.child))}function KR(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=$R(t,zR),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),_e.createElement("svg",Bu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:zu(zu({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&_e.createElement("title",null,s),t.children)};return ky!==void 0?_e.createElement(ky.Consumer,null,n=>e(n)):e(mC)}function wa(t){return Wt({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function vC(t){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function yC(t){return Wt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function bC(t){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(t)}function _g(t){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function Pg(t){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M451 374c-15.88-16-54.34-39.35-73-48.76-24.3-12.24-26.3-13.24-45.4.95-12.74 9.47-21.21 17.93-36.12 14.75s-47.31-21.11-75.68-49.39-47.34-61.62-50.53-76.48 5.41-23.23 14.79-36c13.22-18 12.22-21 .92-45.3-8.81-18.9-32.84-57-48.9-72.8C119.9 44 119.9 47 108.83 51.6A160.15 160.15 0 0 0 83 65.37C67 76 58.12 84.83 51.91 98.1s-9 44.38 23.07 102.64 54.57 88.05 101.14 134.49S258.5 406.64 310.85 436c64.76 36.27 89.6 29.2 102.91 23s22.18-15 32.83-31a159.09 159.09 0 0 0 13.8-25.8C465 391.17 468 391.17 451 374z"},child:[]}]})(t)}function QR(t){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 320 192 192m0 128 128-128"},child:[]}]})(t)}function GR(t){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}function SC(t){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z"},child:[]}]})(t)}function JR(t){return Wt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(t)}function YR(t){return Wt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]}]})(t)}function XR(t){return Wt({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},child:[]}]})(t)}var dr=(t=>(t.user="user",t))(dr||{});const ZR=["user"];function ct(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var e4=typeof Symbol=="function"&&Symbol.observable||"@@observable",xy=e4,Lf=()=>Math.random().toString(36).substring(7).split("").join("."),t4={INIT:`@@redux/INIT${Lf()}`,REPLACE:`@@redux/REPLACE${Lf()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lf()}`},$u=t4;function er(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function kC(t,e,n){if(typeof t!="function")throw new Error(ct(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ct(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ct(1));return n(kC)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,c=!1;function l(){o===s&&(o=new Map,s.forEach((k,v)=>{o.set(v,k)}))}function u(){if(c)throw new Error(ct(3));return i}function d(k){if(typeof k!="function")throw new Error(ct(4));if(c)throw new Error(ct(5));let v=!0;l();const b=a++;return o.set(b,k),function(){if(v){if(c)throw new Error(ct(6));v=!1,l(),o.delete(b),s=null}}}function f(k){if(!er(k))throw new Error(ct(7));if(typeof k.type>"u")throw new Error(ct(8));if(typeof k.type!="string")throw new Error(ct(17));if(c)throw new Error(ct(9));try{c=!0,i=r(i,k)}finally{c=!1}return(s=o).forEach(b=>{b()}),k}function h(k){if(typeof k!="function")throw new Error(ct(10));r=k,f({type:$u.REPLACE})}function p(){const k=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(ct(11));function b(){const C=v;C.next&&C.next(u())}return b(),{unsubscribe:k(b)}},[xy](){return this}}}return f({type:$u.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:h,[xy]:p}}function n4(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:$u.INIT})>"u")throw new Error(ct(12));if(typeof n(void 0,{type:$u.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ct(13))})}function CC(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{n4(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let c=!1;const l={};for(let u=0;u<r.length;u++){const d=r[u],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(ct(14));l[d]=p,c=c||p!==h}return c=c||r.length!==Object.keys(o).length,c?l:o}}function Vu(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function r4(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ct(15))};const o={getState:i.getState,dispatch:(c,...l)=>s(c,...l)},a=t.map(c=>c(o));return s=Vu(...a)(i.dispatch),{...i,dispatch:s}}}function xC(t){return er(t)&&"type"in t&&typeof t.type=="string"}var Rg=Symbol.for("immer-nothing"),Ea=Symbol.for("immer-draftable"),qt=Symbol.for("immer-state");function ut(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Wi=Object.getPrototypeOf;function tr(t){return!!t&&!!t[qt]}function jn(t){var e;return t?TC(t)||Array.isArray(t)||!!t[Ea]||!!((e=t.constructor)!=null&&e[Ea])||Oc(t)||Mc(t):!1}var i4=Object.prototype.constructor.toString();function TC(t){if(!t||typeof t!="object")return!1;const e=Wi(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===i4}function s4(t){return tr(t)||ut(15,t),t[qt].base_}function ic(t,e){Ki(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Ki(t){const e=t[qt];return e?e.type_:Array.isArray(t)?1:Oc(t)?2:Mc(t)?3:0}function sc(t,e){return Ki(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jf(t,e){return Ki(t)===2?t.get(e):t[e]}function wC(t,e,n){const r=Ki(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function o4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Oc(t){return t instanceof Map}function Mc(t){return t instanceof Set}function Ei(t){return t.copy_||t.base_}function pp(t,e){if(Oc(t))return new Map(t);if(Mc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=TC(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[qt];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Wi(t),r)}else{const r=Wi(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Og(t,e=!1){return Id(t)||tr(t)||!jn(t)||(Ki(t)>1&&(t.set=t.add=t.clear=t.delete=a4),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Og(r,!0))),t}function a4(){ut(2)}function Id(t){return Object.isFrozen(t)}var mp={};function Qi(t){const e=mp[t];return e||ut(0,t),e}function c4(t,e){mp[t]||(mp[t]=e)}var oc;function EC(){return oc}function l4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ty(t,e){e&&(Qi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function gp(t){vp(t),t.drafts_.forEach(u4),t.drafts_=null}function vp(t){t===oc&&(oc=t.parent_)}function wy(t){return oc=l4(oc,t)}function u4(t){const e=t[qt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Ey(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[qt].modified_&&(gp(e),ut(4)),jn(t)&&(t=qu(e,t),e.parent_||Hu(e,t)),e.patches_&&Qi("Patches").generateReplacementPatches_(n[qt].base_,t,e.patches_,e.inversePatches_)):t=qu(e,n,[]),gp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Rg?t:void 0}function qu(t,e,n){if(Id(e))return e;const r=e[qt];if(!r)return ic(e,(i,s)=>_y(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Hu(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),ic(s,(a,c)=>_y(t,r,i,a,c,n,o)),Hu(t,i,!1),n&&t.patches_&&Qi("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function _y(t,e,n,r,i,s,o){if(tr(i)){const a=s&&e&&e.type_!==3&&!sc(e.assigned_,r)?s.concat(r):void 0,c=qu(t,i,a);if(wC(n,r,c),tr(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(jn(i)&&!Id(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;qu(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Hu(t,i)}}function Hu(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Og(e,n)}function d4(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:EC(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Mg;n&&(i=[r],s=ac);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Mg={get(t,e){if(e===qt)return t;const n=Ei(t);if(!sc(n,e))return f4(t,n,e);const r=n[e];return t.finalized_||!jn(r)?r:r===Uf(t.base_,e)?(Ff(t),t.copy_[e]=bp(r,t)):r},has(t,e){return e in Ei(t)},ownKeys(t){return Reflect.ownKeys(Ei(t))},set(t,e,n){const r=_C(Ei(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Uf(Ei(t),e),s=i==null?void 0:i[qt];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(o4(n,i)&&(n!==void 0||sc(t.base_,e)))return!0;Ff(t),yp(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Uf(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Ff(t),yp(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ei(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ut(11)},getPrototypeOf(t){return Wi(t.base_)},setPrototypeOf(){ut(12)}},ac={};ic(Mg,(t,e)=>{ac[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ac.deleteProperty=function(t,e){return ac.set.call(this,t,e,void 0)};ac.set=function(t,e,n){return Mg.set.call(this,t[0],e,n,t[0])};function Uf(t,e){const n=t[qt];return(n?Ei(n):t)[e]}function f4(t,e,n){var i;const r=_C(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function _C(t,e){if(!(e in t))return;let n=Wi(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Wi(n)}}function yp(t){t.modified_||(t.modified_=!0,t.parent_&&yp(t.parent_))}function Ff(t){t.copy_||(t.copy_=pp(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var h4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(c=s,...l){return o.produce(c,u=>n.call(this,u,...l))}}typeof n!="function"&&ut(6),r!==void 0&&typeof r!="function"&&ut(7);let i;if(jn(e)){const s=wy(this),o=bp(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?gp(s):vp(s)}return Ty(s,r),Ey(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Rg&&(i=void 0),this.autoFreeze_&&Og(i,!0),r){const s=[],o=[];Qi("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else ut(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,c=>e(c,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){jn(t)||ut(8),tr(t)&&(t=p4(t));const e=wy(this),n=bp(t,void 0);return n[qt].isManual_=!0,vp(e),n}finishDraft(t,e){const n=t&&t[qt];(!n||!n.isManual_)&&ut(9);const{scope_:r}=n;return Ty(r,e),Ey(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Qi("Patches").applyPatches_;return tr(t)?r(t,e):this.produce(t,i=>r(i,e))}};function bp(t,e){const n=Oc(t)?Qi("MapSet").proxyMap_(t,e):Mc(t)?Qi("MapSet").proxySet_(t,e):d4(t,e);return(e?e.scope_:EC()).drafts_.push(n),n}function p4(t){return tr(t)||ut(10,t),PC(t)}function PC(t){if(!jn(t)||Id(t))return t;const e=t[qt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=pp(t,e.scope_.immer_.useStrictShallowCopy_)}else n=pp(t,!0);return ic(n,(r,i)=>{wC(n,r,PC(i))}),e&&(e.finalized_=!1),n}function m4(){const e="replace",n="add",r="remove";function i(f,h,p,y){switch(f.type_){case 0:case 2:return o(f,h,p,y);case 1:return s(f,h,p,y);case 3:return a(f,h,p,y)}}function s(f,h,p,y){let{base_:k,assigned_:v}=f,b=f.copy_;b.length<k.length&&([k,b]=[b,k],[p,y]=[y,p]);for(let S=0;S<k.length;S++)if(v[S]&&b[S]!==k[S]){const C=h.concat([S]);p.push({op:e,path:C,value:d(b[S])}),y.push({op:e,path:C,value:d(k[S])})}for(let S=k.length;S<b.length;S++){const C=h.concat([S]);p.push({op:n,path:C,value:d(b[S])})}for(let S=b.length-1;k.length<=S;--S){const C=h.concat([S]);y.push({op:r,path:C})}}function o(f,h,p,y){const{base_:k,copy_:v}=f;ic(f.assigned_,(b,S)=>{const C=jf(k,b),T=jf(v,b),x=S?sc(k,b)?e:n:r;if(C===T&&x===e)return;const w=h.concat(b);p.push(x===r?{op:x,path:w}:{op:x,path:w,value:T}),y.push(x===n?{op:r,path:w}:x===r?{op:n,path:w,value:d(C)}:{op:e,path:w,value:d(C)})})}function a(f,h,p,y){let{base_:k,copy_:v}=f,b=0;k.forEach(S=>{if(!v.has(S)){const C=h.concat([b]);p.push({op:r,path:C,value:S}),y.unshift({op:n,path:C,value:S})}b++}),b=0,v.forEach(S=>{if(!k.has(S)){const C=h.concat([b]);p.push({op:n,path:C,value:S}),y.unshift({op:r,path:C,value:S})}b++})}function c(f,h,p,y){p.push({op:e,path:[],value:h===Rg?void 0:h}),y.push({op:e,path:[],value:f})}function l(f,h){return h.forEach(p=>{const{path:y,op:k}=p;let v=f;for(let T=0;T<y.length-1;T++){const x=Ki(v);let w=y[T];typeof w!="string"&&typeof w!="number"&&(w=""+w),(x===0||x===1)&&(w==="__proto__"||w==="constructor")&&ut(19),typeof v=="function"&&w==="prototype"&&ut(19),v=jf(v,w),typeof v!="object"&&ut(18,y.join("/"))}const b=Ki(v),S=u(p.value),C=y[y.length-1];switch(k){case e:switch(b){case 2:return v.set(C,S);case 3:ut(16);default:return v[C]=S}case n:switch(b){case 1:return C==="-"?v.push(S):v.splice(C,0,S);case 2:return v.set(C,S);case 3:return v.add(S);default:return v[C]=S}case r:switch(b){case 1:return v.splice(C,1);case 2:return v.delete(C);case 3:return v.delete(p.value);default:return delete v[C]}default:ut(17,k)}}),f}function u(f){if(!jn(f))return f;if(Array.isArray(f))return f.map(u);if(Oc(f))return new Map(Array.from(f.entries()).map(([p,y])=>[p,u(y)]));if(Mc(f))return new Set(Array.from(f).map(u));const h=Object.create(Wi(f));for(const p in f)h[p]=u(f[p]);return sc(f,Ea)&&(h[Ea]=f[Ea]),h}function d(f){return tr(f)?u(f):f}c4("Patches",{applyPatches_:l,generatePatches_:i,generateReplacementPatches_:c})}var sn=new h4,Ic=sn.produce,RC=sn.produceWithPatches.bind(sn);sn.setAutoFreeze.bind(sn);sn.setUseStrictShallowCopy.bind(sn);var Py=sn.applyPatches.bind(sn);sn.createDraft.bind(sn);sn.finishDraft.bind(sn);function g4(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function v4(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function y4(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Ry=t=>Array.isArray(t)?t:[t];function b4(t){const e=Array.isArray(t[0])?t[0]:t;return y4(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function S4(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var k4=class{constructor(t){this.value=t}deref(){return this.value}},C4=typeof WeakRef<"u"?WeakRef:k4,x4=0,Oy=1;function dl(){return{s:x4,v:void 0,o:null,p:null}}function Wu(t,e={}){let n=dl();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=n;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const k=y.get(p);k===void 0?(a=dl(),y.set(p,a)):a=k}else{let y=a.p;y===null&&(a.p=y=new Map);const k=y.get(p);k===void 0?(a=dl(),y.set(p,a)):a=k}}const l=a;let u;if(a.s===Oy)u=a.v;else if(u=t.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,u)&&(u=f,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new C4(u):u}return l.s=Oy,l.v=u,u}return o.clearCache=()=>{n=dl(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function T4(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,c={},l=i.pop();typeof l=="object"&&(c=l,l=i.pop()),g4(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const u={...n,...c},{memoize:d,memoizeOptions:f=[],argsMemoize:h=Wu,argsMemoizeOptions:p=[],devModeChecks:y={}}=u,k=Ry(f),v=Ry(p),b=b4(i),S=d(function(){return s++,l.apply(null,arguments)},...k),C=h(function(){o++;const x=S4(b,arguments);return a=S.apply(null,x),a},...v);return Object.assign(C,{resultFunc:l,memoizedResultFunc:S,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Ig=T4(Wu),w4=Object.assign((t,e=Ig)=>{v4(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,c)=>(o[n[c]]=a,o),{}))},{withTypes:()=>w4});function OC(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var E4=OC(),_4=OC,P4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Vu:Vu.apply(null,arguments)},R4=t=>t&&typeof t.match=="function";function An(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(en(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>xC(r)&&r.type===t,n}var MC=class fa extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,fa.prototype)}static get[Symbol.species](){return fa}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new fa(...e[0].concat(this)):new fa(...e.concat(this))}};function My(t){return jn(t)?Ic(t,()=>{}):t}function Iy(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(en(10));const r=n.insert(e,t);return t.set(e,r),r}function O4(t){return typeof t=="boolean"}var M4=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new MC;return n&&(O4(n)?o.push(E4):o.push(_4(n.extraArgument))),o},js="RTK_autoBatch",Go=()=>t=>({payload:t,meta:{[js]:!0}}),IC=t=>e=>{setTimeout(e,t)},I4=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:IC(10),N4=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?I4:t.type==="callback"?t.queueNotification:IC(t.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>i&&u(),f=r.subscribe(d);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[js]),s=!i,s&&(o||(o=!0,c(l))),r.dispatch(u)}finally{i=!0}}})},D4=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new MC(t);return r&&i.push(N4(typeof r=="object"?r:void 0)),i};function A4(t){const e=M4(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(er(n))a=CC(n);else throw new Error(en(1));let c;typeof r=="function"?c=r(e):c=e();let l=Vu;i&&(l=P4({trace:!1,...typeof i=="object"&&i}));const u=r4(...c),d=D4(u);let f=typeof o=="function"?o(d):d();const h=l(...f);return kC(a,s,h)}function NC(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(en(28));if(a in e)throw new Error(en(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function L4(t){return typeof t=="function"}function j4(t,e){let[n,r,i]=NC(e),s;if(L4(t))s=()=>My(t());else{const a=My(t);s=()=>a}function o(a=s(),c){let l=[n[c.type],...r.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return l.filter(u=>!!u).length===0&&(l=[i]),l.reduce((u,d)=>{if(d)if(tr(u)){const h=d(u,c);return h===void 0?u:h}else{if(jn(u))return Ic(u,f=>d(f,c));{const f=d(u,c);if(f===void 0){if(u===null)return u;throw new Error(en(9))}return f}}return u},a)}return o.getInitialState=s,o}var DC=(t,e)=>R4(t)?t.match(e):t(e);function Er(...t){return e=>t.some(n=>DC(n,e))}function _a(...t){return e=>t.every(n=>DC(n,e))}function Nd(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",r=e.indexOf(t.meta.requestStatus)>-1;return n&&r}function Nc(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function Ng(...t){return t.length===0?e=>Nd(e,["pending"]):Nc(t)?Er(...t.map(e=>e.pending)):Ng()(t[0])}function mo(...t){return t.length===0?e=>Nd(e,["rejected"]):Nc(t)?Er(...t.map(e=>e.rejected)):mo()(t[0])}function Dd(...t){const e=n=>n&&n.meta&&n.meta.rejectedWithValue;return t.length===0?_a(mo(...t),e):Nc(t)?_a(mo(...t),e):Dd()(t[0])}function ci(...t){return t.length===0?e=>Nd(e,["fulfilled"]):Nc(t)?Er(...t.map(e=>e.fulfilled)):ci()(t[0])}function Sp(...t){return t.length===0?e=>Nd(e,["pending","fulfilled","rejected"]):Nc(t)?Er(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):Sp()(t[0])}var U4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",AC=(t=21)=>{let e="",n=t;for(;n--;)e+=U4[Math.random()*64|0];return e},F4=["name","message","stack","code"],Bf=class{constructor(t,e){of(this,"_type");this.payload=t,this.meta=e}},Ny=class{constructor(t,e){of(this,"_type");this.payload=t,this.meta=e}},B4=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of F4)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},Dy=(()=>{function t(e,n,r){const i=An(e+"/fulfilled",(c,l,u,d)=>({payload:c,meta:{...d||{},arg:u,requestId:l,requestStatus:"fulfilled"}})),s=An(e+"/pending",(c,l,u)=>({payload:void 0,meta:{...u||{},arg:l,requestId:c,requestStatus:"pending"}})),o=An(e+"/rejected",(c,l,u,d,f)=>({payload:d,error:(r&&r.serializeError||B4)(c||"Rejected"),meta:{...f||{},arg:u,requestId:l,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function a(c){return(l,u,d)=>{const f=r!=null&&r.idGenerator?r.idGenerator(c):AC(),h=new AbortController;let p,y;function k(b){y=b,h.abort()}const v=async function(){var C,T;let b;try{let x=(C=r==null?void 0:r.condition)==null?void 0:C.call(r,c,{getState:u,extra:d});if($4(x)&&(x=await x),x===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const w=new Promise((E,P)=>{p=()=>{P({name:"AbortError",message:y||"Aborted"})},h.signal.addEventListener("abort",p)});l(s(f,c,(T=r==null?void 0:r.getPendingMeta)==null?void 0:T.call(r,{requestId:f,arg:c},{getState:u,extra:d}))),b=await Promise.race([w,Promise.resolve(n(c,{dispatch:l,getState:u,extra:d,requestId:f,signal:h.signal,abort:k,rejectWithValue:(E,P)=>new Bf(E,P),fulfillWithValue:(E,P)=>new Ny(E,P)})).then(E=>{if(E instanceof Bf)throw E;return E instanceof Ny?i(E.payload,f,c,E.meta):i(E,f,c)})])}catch(x){b=x instanceof Bf?o(null,f,c,x.payload,x.meta):o(x,f,c)}finally{p&&h.signal.removeEventListener("abort",p)}return r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition||l(b),b}();return Object.assign(v,{abort:k,requestId:f,arg:c,unwrap(){return v.then(z4)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:Er(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function z4(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function $4(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var V4=Symbol.for("rtk-slice-createasyncthunk");function q4(t,e){return`${t}/${e}`}function H4({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[V4];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(en(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(K4()):i.reducers)||{},c=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(S,C){const T=typeof S=="string"?S:S.type;if(!T)throw new Error(en(12));if(T in l.sliceCaseReducersByType)throw new Error(en(13));return l.sliceCaseReducersByType[T]=C,u},addMatcher(S,C){return l.sliceMatchers.push({matcher:S,reducer:C}),u},exposeAction(S,C){return l.actionCreators[S]=C,u},exposeCaseReducer(S,C){return l.sliceCaseReducersByName[S]=C,u}};c.forEach(S=>{const C=a[S],T={reducerName:S,type:q4(s,S),createNotation:typeof i.reducers=="function"};G4(C)?Y4(T,C,u,e):Q4(T,C,u)});function d(){const[S={},C=[],T=void 0]=typeof i.extraReducers=="function"?NC(i.extraReducers):[i.extraReducers],x={...S,...l.sliceCaseReducersByType};return j4(i.initialState,w=>{for(let E in x)w.addCase(E,x[E]);for(let E of l.sliceMatchers)w.addMatcher(E.matcher,E.reducer);for(let E of C)w.addMatcher(E.matcher,E.reducer);T&&w.addDefaultCase(T)})}const f=S=>S,h=new Map;let p;function y(S,C){return p||(p=d()),p(S,C)}function k(){return p||(p=d()),p.getInitialState()}function v(S,C=!1){function T(w){let E=w[S];return typeof E>"u"&&C&&(E=k()),E}function x(w=f){const E=Iy(h,C,{insert:()=>new WeakMap});return Iy(E,w,{insert:()=>{const P={};for(const[M,I]of Object.entries(i.selectors??{}))P[M]=W4(I,w,k,C);return P}})}return{reducerPath:S,getSelectors:x,get selectors(){return x(T)},selectSlice:T}}const b={name:s,reducer:y,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:k,...v(o),injectInto(S,{reducerPath:C,...T}={}){const x=C??o;return S.inject({reducerPath:x,reducer:y},T),{...b,...v(x,!0)}}};return b}}function W4(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Vr=H4();function K4(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Q4({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!J4(r))throw new Error(en(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?An(t,o):An(t))}function G4(t){return t._reducerDefinitionType==="asyncThunk"}function J4(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Y4({type:t,reducerName:e},n,r,i){if(!i)throw new Error(en(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:c,settled:l,options:u}=n,d=i(t,s,u);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),c&&r.addCase(d.rejected,c),l&&r.addMatcher(d.settled,l),r.exposeCaseReducer(e,{fulfilled:o||fl,pending:a||fl,rejected:c||fl,settled:l||fl})}function fl(){}function en(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var LC=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(LC||{});function X4(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var Ay=er;function jC(t,e){if(t===e||!(Ay(t)&&Ay(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),r=Object.keys(t);let i=n.length===r.length;const s=Array.isArray(e)?[]:{};for(const o of n)s[o]=jC(t[o],e[o]),i&&(i=t[o]===s[o]);return i?t:s}function Ws(t){let e=0;for(const n in t)e++;return e}var Ly=t=>[].concat(...t);function Z4(t){return new RegExp("(^|:)//").test(t)}function e3(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function jy(t){return t!=null}function t3(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var n3=t=>t.replace(/\/$/,""),r3=t=>t.replace(/^\//,"");function i3(t,e){if(!t)return e;if(!e)return t;if(Z4(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=n3(t),e=r3(e),`${t}${n}${e}`}var Uy=(...t)=>fetch(...t),s3=t=>t.status>=200&&t.status<=299,o3=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function Fy(t){if(!er(t))return t;const e={...t};for(const[n,r]of Object.entries(e))r===void 0&&delete e[n];return e}function a3({baseUrl:t,prepareHeaders:e=d=>d,fetchFn:n=Uy,paramsSerializer:r,isJsonContentType:i=o3,jsonContentType:s="application/json",jsonReplacer:o,timeout:a,responseHandler:c,validateStatus:l,...u}={}){return typeof fetch>"u"&&n===Uy&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{const{signal:p,getState:y,extra:k,endpoint:v,forced:b,type:S}=h;let C,{url:T,headers:x=new Headers(u.headers),params:w=void 0,responseHandler:E=c??"json",validateStatus:P=l??s3,timeout:M=a,...I}=typeof f=="string"?{url:f}:f,A={...u,signal:p,...I};x=new Headers(Fy(x)),A.headers=await e(x,{getState:y,extra:k,endpoint:v,forced:b,type:S})||x;const q=oe=>typeof oe=="object"&&(er(oe)||Array.isArray(oe)||typeof oe.toJSON=="function");if(!A.headers.has("content-type")&&q(A.body)&&A.headers.set("content-type",s),q(A.body)&&i(A.headers)&&(A.body=JSON.stringify(A.body,o)),w){const oe=~T.indexOf("?")?"&":"?",ye=r?r(w):new URLSearchParams(Fy(w));T+=oe+ye}T=i3(t,T);const V=new Request(T,A);C={request:new Request(T,A)};let ee,Z=!1,z=M&&setTimeout(()=>{Z=!0,h.abort()},M);try{ee=await n(V)}catch(oe){return{error:{status:Z?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(oe)},meta:C}}finally{z&&clearTimeout(z)}const Q=ee.clone();C.response=Q;let W,ce="";try{let oe;if(await Promise.all([d(ee,E).then(ye=>W=ye,ye=>oe=ye),Q.text().then(ye=>ce=ye,()=>{})]),oe)throw oe}catch(oe){return{error:{status:"PARSING_ERROR",originalStatus:ee.status,data:ce,error:String(oe)},meta:C}}return P(ee,W)?{data:W,meta:C}:{error:{status:ee.status,data:W},meta:C}};async function d(f,h){if(typeof h=="function")return h(f);if(h==="content-type"&&(h=i(f.headers)?"json":"text"),h==="json"){const p=await f.text();return p.length?JSON.parse(p):null}return f.text()}}var By=class{constructor(t,e=void 0){this.value=t,this.meta=e}},Dg=An("__rtkq/focused"),UC=An("__rtkq/unfocused"),Ag=An("__rtkq/online"),FC=An("__rtkq/offline");function BC(t){return t.type==="query"}function c3(t){return t.type==="mutation"}function Lg(t,e,n,r,i,s){return l3(t)?t(e,n,r,i).map(kp).map(s):Array.isArray(t)?t.map(kp).map(s):[]}function l3(t){return typeof t=="function"}function kp(t){return typeof t=="string"?{type:t}:t}function u3(t,e){return t.catch(e)}var cc=Symbol("forceQueryFn"),Cp=t=>typeof t[cc]=="function";function d3({serializeQueryArgs:t,queryThunk:e,mutationThunk:n,api:r,context:i}){const s=new Map,o=new Map,{unsubscribeQueryResult:a,removeMutationResult:c,updateSubscriptionOptions:l}=r.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:y,getRunningQueryThunk:u,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function u(k,v){return b=>{var T;const S=i.endpointDefinitions[k],C=t({queryArgs:v,endpointDefinition:S,endpointName:k});return(T=s.get(b))==null?void 0:T[C]}}function d(k,v){return b=>{var S;return(S=o.get(b))==null?void 0:S[v]}}function f(){return k=>Object.values(s.get(k)||{}).filter(jy)}function h(){return k=>Object.values(o.get(k)||{}).filter(jy)}function p(k,v){const b=(S,{subscribe:C=!0,forceRefetch:T,subscriptionOptions:x,[cc]:w,...E}={})=>(P,M)=>{var oe;const I=t({queryArgs:S,endpointDefinition:v,endpointName:k}),A=e({...E,type:"query",subscribe:C,forceRefetch:T,subscriptionOptions:x,endpointName:k,originalArgs:S,queryCacheKey:I,[cc]:w}),q=r.endpoints[k].select(S),V=P(A),ne=q(M()),{requestId:ee,abort:Z}=V,z=ne.requestId!==ee,Q=(oe=s.get(P))==null?void 0:oe[I],W=()=>q(M()),ce=Object.assign(w?V.then(W):z&&!Q?Promise.resolve(ne):Promise.all([Q,V]).then(W),{arg:S,requestId:ee,subscriptionOptions:x,queryCacheKey:I,abort:Z,async unwrap(){const ye=await ce;if(ye.isError)throw ye.error;return ye.data},refetch:()=>P(b(S,{subscribe:!1,forceRefetch:!0})),unsubscribe(){C&&P(a({queryCacheKey:I,requestId:ee}))},updateSubscriptionOptions(ye){ce.subscriptionOptions=ye,P(l({endpointName:k,requestId:ee,queryCacheKey:I,options:ye}))}});if(!Q&&!z&&!w){const ye=s.get(P)||{};ye[I]=ce,s.set(P,ye),ce.then(()=>{delete ye[I],Ws(ye)||s.delete(P)})}return ce};return b}function y(k){return(v,{track:b=!0,fixedCacheKey:S}={})=>(C,T)=>{const x=n({type:"mutation",endpointName:k,originalArgs:v,track:b,fixedCacheKey:S}),w=C(x),{requestId:E,abort:P,unwrap:M}=w,I=u3(w.unwrap().then(ne=>({data:ne})),ne=>({error:ne})),A=()=>{C(c({requestId:E,fixedCacheKey:S}))},q=Object.assign(I,{arg:w.arg,requestId:E,abort:P,unwrap:M,reset:A}),V=o.get(C)||{};return o.set(C,V),V[E]=q,q.then(()=>{delete V[E],Ws(V)||o.delete(C)}),S&&(V[S]=q,q.then(()=>{V[S]===q&&(delete V[S],Ws(V)||o.delete(C))})),q}}}function zy(t){return t}function f3({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:r,api:i,assertTagType:s}){const o=(b,S,C,T)=>(x,w)=>{const E=n[b],P=r({queryArgs:S,endpointDefinition:E,endpointName:b});if(x(i.internalActions.queryResultPatched({queryCacheKey:P,patches:C})),!T)return;const M=i.endpoints[b].select(S)(w()),I=Lg(E.providesTags,M.data,void 0,S,{},s);x(i.internalActions.updateProvidedBy({queryCacheKey:P,providedTags:I}))},a=(b,S,C,T=!0)=>(x,w)=>{const P=i.endpoints[b].select(S)(w()),M={patches:[],inversePatches:[],undo:()=>x(i.util.patchQueryData(b,S,M.inversePatches,T))};if(P.status==="uninitialized")return M;let I;if("data"in P)if(jn(P.data)){const[A,q,V]=RC(P.data,C);M.patches.push(...q),M.inversePatches.push(...V),I=A}else I=C(P.data),M.patches.push({op:"replace",path:[],value:I}),M.inversePatches.push({op:"replace",path:[],value:P.data});return M.patches.length===0||x(i.util.patchQueryData(b,S,M.patches,T)),M},c=(b,S,C)=>T=>T(i.endpoints[b].initiate(S,{subscribe:!1,forceRefetch:!0,[cc]:()=>({data:C})})),l=async(b,{signal:S,abort:C,rejectWithValue:T,fulfillWithValue:x,dispatch:w,getState:E,extra:P})=>{const M=n[b.endpointName];try{let I=zy,A;const q={signal:S,abort:C,dispatch:w,getState:E,extra:P,endpoint:b.endpointName,type:b.type,forced:b.type==="query"?u(b,E()):void 0},V=b.type==="query"?b[cc]:void 0;if(V?A=V():M.query?(A=await e(M.query(b.originalArgs),q,M.extraOptions),M.transformResponse&&(I=M.transformResponse)):A=await M.queryFn(b.originalArgs,q,M.extraOptions,ne=>e(ne,q,M.extraOptions)),typeof process<"u",A.error)throw new By(A.error,A.meta);return x(await I(A.data,A.meta,b.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:A.meta,[js]:!0})}catch(I){let A=I;if(A instanceof By){let q=zy;M.query&&M.transformErrorResponse&&(q=M.transformErrorResponse);try{return T(await q(A.value,A.meta,b.originalArgs),{baseQueryMeta:A.meta,[js]:!0})}catch(V){A=V}}throw typeof process<"u",console.error(A),A}};function u(b,S){var E,P,M;const C=(P=(E=S[t])==null?void 0:E.queries)==null?void 0:P[b.queryCacheKey],T=(M=S[t])==null?void 0:M.config.refetchOnMountOrArgChange,x=C==null?void 0:C.fulfilledTimeStamp,w=b.forceRefetch??(b.subscribe&&T);return w?w===!0||(Number(new Date)-Number(x))/1e3>=w:!1}const d=Dy(`${t}/executeQuery`,l,{getPendingMeta(){return{startedTimeStamp:Date.now(),[js]:!0}},condition(b,{getState:S}){var M,I,A;const C=S(),T=(I=(M=C[t])==null?void 0:M.queries)==null?void 0:I[b.queryCacheKey],x=T==null?void 0:T.fulfilledTimeStamp,w=b.originalArgs,E=T==null?void 0:T.originalArgs,P=n[b.endpointName];return Cp(b)?!0:(T==null?void 0:T.status)==="pending"?!1:u(b,C)||BC(P)&&((A=P==null?void 0:P.forceRefetch)!=null&&A.call(P,{currentArg:w,previousArg:E,endpointState:T,state:C}))?!0:!x},dispatchConditionRejection:!0}),f=Dy(`${t}/executeMutation`,l,{getPendingMeta(){return{startedTimeStamp:Date.now(),[js]:!0}}}),h=b=>"force"in b,p=b=>"ifOlderThan"in b,y=(b,S,C)=>(T,x)=>{const w=h(C)&&C.force,E=p(C)&&C.ifOlderThan,P=(I=!0)=>{const A={forceRefetch:I,isPrefetch:!0};return i.endpoints[b].initiate(S,A)},M=i.endpoints[b].select(S)(x());if(w)T(P());else if(E){const I=M==null?void 0:M.fulfilledTimeStamp;if(!I){T(P());return}(Number(new Date)-Number(new Date(I)))/1e3>=E&&T(P())}else T(P(!1))};function k(b){return S=>{var C,T;return((T=(C=S==null?void 0:S.meta)==null?void 0:C.arg)==null?void 0:T.endpointName)===b}}function v(b,S){return{matchPending:_a(Ng(b),k(S)),matchFulfilled:_a(ci(b),k(S)),matchRejected:_a(mo(b),k(S))}}return{queryThunk:d,mutationThunk:f,prefetch:y,updateQueryData:a,upsertQueryData:c,patchQueryData:o,buildMatchThunkActions:v}}function zC(t,e,n,r){return Lg(n[t.meta.arg.endpointName][e],ci(t)?t.payload:void 0,Dd(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,r)}function hl(t,e,n){const r=t[e];r&&n(r)}function lc(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function $y(t,e,n){const r=t[lc(e)];r&&n(r)}var Jo={};function h3({reducerPath:t,queryThunk:e,mutationThunk:n,context:{endpointDefinitions:r,apiUid:i,extractRehydrationInfo:s,hasRehydrationInfo:o},assertTagType:a,config:c}){const l=An(`${t}/resetApiState`),u=Vr({name:`${t}/queries`,initialState:Jo,reducers:{removeQueryResult:{reducer(S,{payload:{queryCacheKey:C}}){delete S[C]},prepare:Go()},queryResultPatched:{reducer(S,{payload:{queryCacheKey:C,patches:T}}){hl(S,C,x=>{x.data=Py(x.data,T.concat())})},prepare:Go()}},extraReducers(S){S.addCase(e.pending,(C,{meta:T,meta:{arg:x}})=>{var E;const w=Cp(x);C[E=x.queryCacheKey]??(C[E]={status:"uninitialized",endpointName:x.endpointName}),hl(C,x.queryCacheKey,P=>{P.status="pending",P.requestId=w&&P.requestId?P.requestId:T.requestId,x.originalArgs!==void 0&&(P.originalArgs=x.originalArgs),P.startedTimeStamp=T.startedTimeStamp})}).addCase(e.fulfilled,(C,{meta:T,payload:x})=>{hl(C,T.arg.queryCacheKey,w=>{if(w.requestId!==T.requestId&&!Cp(T.arg))return;const{merge:E}=r[T.arg.endpointName];if(w.status="fulfilled",E)if(w.data!==void 0){const{fulfilledTimeStamp:P,arg:M,baseQueryMeta:I,requestId:A}=T;let q=Ic(w.data,V=>E(V,x,{arg:M.originalArgs,baseQueryMeta:I,fulfilledTimeStamp:P,requestId:A}));w.data=q}else w.data=x;else w.data=r[T.arg.endpointName].structuralSharing??!0?jC(tr(w.data)?s4(w.data):w.data,x):x;delete w.error,w.fulfilledTimeStamp=T.fulfilledTimeStamp})}).addCase(e.rejected,(C,{meta:{condition:T,arg:x,requestId:w},error:E,payload:P})=>{hl(C,x.queryCacheKey,M=>{if(!T){if(M.requestId!==w)return;M.status="rejected",M.error=P??E}})}).addMatcher(o,(C,T)=>{const{queries:x}=s(T);for(const[w,E]of Object.entries(x))((E==null?void 0:E.status)==="fulfilled"||(E==null?void 0:E.status)==="rejected")&&(C[w]=E)})}}),d=Vr({name:`${t}/mutations`,initialState:Jo,reducers:{removeMutationResult:{reducer(S,{payload:C}){const T=lc(C);T in S&&delete S[T]},prepare:Go()}},extraReducers(S){S.addCase(n.pending,(C,{meta:T,meta:{requestId:x,arg:w,startedTimeStamp:E}})=>{w.track&&(C[lc(T)]={requestId:x,status:"pending",endpointName:w.endpointName,startedTimeStamp:E})}).addCase(n.fulfilled,(C,{payload:T,meta:x})=>{x.arg.track&&$y(C,x,w=>{w.requestId===x.requestId&&(w.status="fulfilled",w.data=T,w.fulfilledTimeStamp=x.fulfilledTimeStamp)})}).addCase(n.rejected,(C,{payload:T,error:x,meta:w})=>{w.arg.track&&$y(C,w,E=>{E.requestId===w.requestId&&(E.status="rejected",E.error=T??x)})}).addMatcher(o,(C,T)=>{const{mutations:x}=s(T);for(const[w,E]of Object.entries(x))((E==null?void 0:E.status)==="fulfilled"||(E==null?void 0:E.status)==="rejected")&&w!==(E==null?void 0:E.requestId)&&(C[w]=E)})}}),f=Vr({name:`${t}/invalidation`,initialState:Jo,reducers:{updateProvidedBy:{reducer(S,C){var w,E;const{queryCacheKey:T,providedTags:x}=C.payload;for(const P of Object.values(S))for(const M of Object.values(P)){const I=M.indexOf(T);I!==-1&&M.splice(I,1)}for(const{type:P,id:M}of x){const I=(w=S[P]??(S[P]={}))[E=M||"__internal_without_id"]??(w[E]=[]);I.includes(T)||I.push(T)}},prepare:Go()}},extraReducers(S){S.addCase(u.actions.removeQueryResult,(C,{payload:{queryCacheKey:T}})=>{for(const x of Object.values(C))for(const w of Object.values(x)){const E=w.indexOf(T);E!==-1&&w.splice(E,1)}}).addMatcher(o,(C,T)=>{var w,E;const{provided:x}=s(T);for(const[P,M]of Object.entries(x))for(const[I,A]of Object.entries(M)){const q=(w=C[P]??(C[P]={}))[E=I||"__internal_without_id"]??(w[E]=[]);for(const V of A)q.includes(V)||q.push(V)}}).addMatcher(Er(ci(e),Dd(e)),(C,T)=>{const x=zC(T,"providesTags",r,a),{queryCacheKey:w}=T.meta.arg;f.caseReducers.updateProvidedBy(C,f.actions.updateProvidedBy({queryCacheKey:w,providedTags:x}))})}}),h=Vr({name:`${t}/subscriptions`,initialState:Jo,reducers:{updateSubscriptionOptions(S,C){},unsubscribeQueryResult(S,C){},internal_getRTKQSubscriptions(){}}}),p=Vr({name:`${t}/internalSubscriptions`,initialState:Jo,reducers:{subscriptionsUpdated:{reducer(S,C){return Py(S,C.payload)},prepare:Go()}}}),y=Vr({name:`${t}/config`,initialState:{online:t3(),focused:e3(),middlewareRegistered:!1,...c},reducers:{middlewareRegistered(S,{payload:C}){S.middlewareRegistered=S.middlewareRegistered==="conflict"||i!==C?"conflict":!0}},extraReducers:S=>{S.addCase(Ag,C=>{C.online=!0}).addCase(FC,C=>{C.online=!1}).addCase(Dg,C=>{C.focused=!0}).addCase(UC,C=>{C.focused=!1}).addMatcher(o,C=>({...C}))}}),k=CC({queries:u.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:p.reducer,config:y.reducer}),v=(S,C)=>k(l.match(C)?void 0:S,C),b={...y.actions,...u.actions,...h.actions,...p.actions,...d.actions,...f.actions,resetApiState:l};return{reducer:v,actions:b}}var Di=Symbol.for("RTKQ/skipToken"),$C={status:"uninitialized"},Vy=Ic($C,()=>{}),qy=Ic($C,()=>{});function p3({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const r=d=>Vy,i=d=>qy;return{buildQuerySelector:a,buildMutationSelector:c,selectInvalidatedBy:l,selectCachedArgsForQuery:u};function s(d){return{...d,...X4(d.status)}}function o(d){return d[e]}function a(d,f){return h=>{const p=t({queryArgs:h,endpointDefinition:f,endpointName:d});return n(h===Di?r:v=>{var b,S;return((S=(b=o(v))==null?void 0:b.queries)==null?void 0:S[p])??Vy},s)}}function c(){return d=>{let f;return typeof d=="object"?f=lc(d)??Di:f=d,n(f===Di?i:y=>{var k,v;return((v=(k=o(y))==null?void 0:k.mutations)==null?void 0:v[f])??qy},s)}}function l(d,f){const h=d[e],p=new Set;for(const y of f.map(kp)){const k=h.provided[y.type];if(!k)continue;let v=(y.id!==void 0?k[y.id]:Ly(Object.values(k)))??[];for(const b of v)p.add(b)}return Ly(Array.from(p.values()).map(y=>{const k=h.queries[y];return k?[{queryCacheKey:y,endpointName:k.endpointName,originalArgs:k.originalArgs}]:[]}))}function u(d,f){return Object.values(d[e].queries).filter(h=>(h==null?void 0:h.endpointName)===f&&h.status!=="uninitialized").map(h=>h.originalArgs)}}var gs=WeakMap?new WeakMap:void 0,Hy=({endpointName:t,queryArgs:e})=>{let n="";const r=gs==null?void 0:gs.get(e);if(typeof r=="string")n=r;else{const i=JSON.stringify(e,(s,o)=>(o=typeof o=="bigint"?{$bigint:o.toString()}:o,o=er(o)?Object.keys(o).sort().reduce((a,c)=>(a[c]=o[c],a),{}):o,o));er(e)&&(gs==null||gs.set(e,i)),n=i}return`${t}(${n})`};function m3(...t){return function(n){const r=Wu(l=>{var u;return(u=n.extractRehydrationInfo)==null?void 0:u.call(n,l,{reducerPath:n.reducerPath??"api"})}),i={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:r,serializeQueryArgs(l){let u=Hy;if("serializeQueryArgs"in l.endpointDefinition){const d=l.endpointDefinition.serializeQueryArgs;u=f=>{const h=d(f);return typeof h=="string"?h:Hy({...f,queryArgs:h})}}else n.serializeQueryArgs&&(u=n.serializeQueryArgs);return u(l)},tagTypes:[...n.tagTypes||[]]},s={endpointDefinitions:{},batch(l){l()},apiUid:AC(),extractRehydrationInfo:r,hasRehydrationInfo:Wu(l=>r(l)!=null)},o={injectEndpoints:c,enhanceEndpoints({addTagTypes:l,endpoints:u}){if(l)for(const d of l)i.tagTypes.includes(d)||i.tagTypes.push(d);if(u)for(const[d,f]of Object.entries(u))typeof f=="function"?f(s.endpointDefinitions[d]):Object.assign(s.endpointDefinitions[d]||{},f);return o}},a=t.map(l=>l.init(o,i,s));function c(l){const u=l.endpoints({query:d=>({...d,type:"query"}),mutation:d=>({...d,type:"mutation"})});for(const[d,f]of Object.entries(u)){if(l.overrideExisting!==!0&&d in s.endpointDefinitions){if(l.overrideExisting==="throw")throw new Error(en(39));typeof process<"u";continue}s.endpointDefinitions[d]=f;for(const h of a)h.injectEndpoint(d,f)}return o}return o.injectEndpoints({endpoints:n.endpoints})}}function Ur(t,...e){return Object.assign(t,...e)}var g3=({api:t,queryThunk:e,internalState:n})=>{const r=`${t.reducerPath}/subscriptions`;let i=null,s=null;const{updateSubscriptionOptions:o,unsubscribeQueryResult:a}=t.internalActions,c=(h,p)=>{var k,v,b;if(o.match(p)){const{queryCacheKey:S,requestId:C,options:T}=p.payload;return(k=h==null?void 0:h[S])!=null&&k[C]&&(h[S][C]=T),!0}if(a.match(p)){const{queryCacheKey:S,requestId:C}=p.payload;return h[S]&&delete h[S][C],!0}if(t.internalActions.removeQueryResult.match(p))return delete h[p.payload.queryCacheKey],!0;if(e.pending.match(p)){const{meta:{arg:S,requestId:C}}=p,T=h[v=S.queryCacheKey]??(h[v]={});return T[`${C}_running`]={},S.subscribe&&(T[C]=S.subscriptionOptions??T[C]??{}),!0}let y=!1;if(e.fulfilled.match(p)||e.rejected.match(p)){const S=h[p.meta.arg.queryCacheKey]||{},C=`${p.meta.requestId}_running`;y||(y=!!S[C]),delete S[C]}if(e.rejected.match(p)){const{meta:{condition:S,arg:C,requestId:T}}=p;if(S&&C.subscribe){const x=h[b=C.queryCacheKey]??(h[b]={});x[T]=C.subscriptionOptions??x[T]??{},y=!0}}return y},l=()=>n.currentSubscriptions,f={getSubscriptions:l,getSubscriptionCount:h=>{const y=l()[h]??{};return Ws(y)},isRequestSubscribed:(h,p)=>{var k;const y=l();return!!((k=y==null?void 0:y[h])!=null&&k[p])}};return(h,p)=>{if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(h))return i=n.currentSubscriptions={},s=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(h))return[!1,f];const y=c(n.currentSubscriptions,h);let k=!0;if(y){s||(s=setTimeout(()=>{const S=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,C]=RC(i,()=>S);p.next(t.internalActions.subscriptionsUpdated(C)),i=S,s=null},500));const v=typeof h.type=="string"&&!!h.type.startsWith(r),b=e.rejected.match(h)&&h.meta.condition&&!!h.meta.arg.subscribe;k=!v&&!b}return[k,!1]}};function v3(t){for(const e in t)return!1;return!0}var y3=2147483647/1e3-1,b3=({reducerPath:t,api:e,queryThunk:n,context:r,internalState:i})=>{const{removeQueryResult:s,unsubscribeQueryResult:o}=e.internalActions,a=Er(o.match,n.fulfilled,n.rejected);function c(f){const h=i.currentSubscriptions[f];return!!h&&!v3(h)}const l={},u=(f,h,p)=>{var y;if(a(f)){const k=h.getState()[t],{queryCacheKey:v}=o.match(f)?f.payload:f.meta.arg;d(v,(y=k.queries[v])==null?void 0:y.endpointName,h,k.config)}if(e.util.resetApiState.match(f))for(const[k,v]of Object.entries(l))v&&clearTimeout(v),delete l[k];if(r.hasRehydrationInfo(f)){const k=h.getState()[t],{queries:v}=r.extractRehydrationInfo(f);for(const[b,S]of Object.entries(v))d(b,S==null?void 0:S.endpointName,h,k.config)}};function d(f,h,p,y){const k=r.endpointDefinitions[h],v=(k==null?void 0:k.keepUnusedDataFor)??y.keepUnusedDataFor;if(v===1/0)return;const b=Math.max(0,Math.min(v,y3));if(!c(f)){const S=l[f];S&&clearTimeout(S),l[f]=setTimeout(()=>{c(f)||p.dispatch(s({queryCacheKey:f})),delete l[f]},b*1e3)}}return u},Wy=new Error("Promise never resolved before cacheEntryRemoved."),S3=({api:t,reducerPath:e,context:n,queryThunk:r,mutationThunk:i,internalState:s})=>{const o=Sp(r),a=Sp(i),c=ci(r,i),l={},u=(h,p,y)=>{const k=d(h);if(r.pending.match(h)){const v=y[e].queries[k],b=p.getState()[e].queries[k];!v&&b&&f(h.meta.arg.endpointName,h.meta.arg.originalArgs,k,p,h.meta.requestId)}else if(i.pending.match(h))p.getState()[e].mutations[k]&&f(h.meta.arg.endpointName,h.meta.arg.originalArgs,k,p,h.meta.requestId);else if(c(h)){const v=l[k];v!=null&&v.valueResolved&&(v.valueResolved({data:h.payload,meta:h.meta.baseQueryMeta}),delete v.valueResolved)}else if(t.internalActions.removeQueryResult.match(h)||t.internalActions.removeMutationResult.match(h)){const v=l[k];v&&(delete l[k],v.cacheEntryRemoved())}else if(t.util.resetApiState.match(h))for(const[v,b]of Object.entries(l))delete l[v],b.cacheEntryRemoved()};function d(h){return o(h)?h.meta.arg.queryCacheKey:a(h)?h.meta.arg.fixedCacheKey??h.meta.requestId:t.internalActions.removeQueryResult.match(h)?h.payload.queryCacheKey:t.internalActions.removeMutationResult.match(h)?lc(h.payload):""}function f(h,p,y,k,v){const b=n.endpointDefinitions[h],S=b==null?void 0:b.onCacheEntryAdded;if(!S)return;const C={},T=new Promise(I=>{C.cacheEntryRemoved=I}),x=Promise.race([new Promise(I=>{C.valueResolved=I}),T.then(()=>{throw Wy})]);x.catch(()=>{}),l[y]=C;const w=t.endpoints[h].select(b.type==="query"?p:y),E=k.dispatch((I,A,q)=>q),P={...k,getCacheEntry:()=>w(k.getState()),requestId:v,extra:E,updateCachedData:b.type==="query"?I=>k.dispatch(t.util.updateQueryData(h,p,I)):void 0,cacheDataLoaded:x,cacheEntryRemoved:T},M=S(p,P);Promise.resolve(M).catch(I=>{if(I!==Wy)throw I})}return u},k3=({api:t,context:{apiUid:e},reducerPath:n})=>(r,i)=>{t.util.resetApiState.match(r)&&i.dispatch(t.internalActions.middlewareRegistered(e)),typeof process<"u"},C3=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:i,api:s,assertTagType:o,refetchQuery:a,internalState:c})=>{const{removeQueryResult:l}=s.internalActions,u=Er(ci(r),Dd(r)),d=Er(ci(r,i),mo(r,i));let f=[];const h=(k,v)=>{u(k)?y(zC(k,"invalidatesTags",n,o),v):d(k)?y([],v):s.util.invalidateTags.match(k)&&y(Lg(k.payload,void 0,void 0,void 0,void 0,o),v)};function p(k){var v,b;for(const S in k.queries)if(((v=k.queries[S])==null?void 0:v.status)==="pending")return!0;for(const S in k.mutations)if(((b=k.mutations[S])==null?void 0:b.status)==="pending")return!0;return!1}function y(k,v){const b=v.getState(),S=b[t];if(f.push(...k),S.config.invalidationBehavior==="delayed"&&p(S))return;const C=f;if(f=[],C.length===0)return;const T=s.util.selectInvalidatedBy(b,C);e.batch(()=>{const x=Array.from(T.values());for(const{queryCacheKey:w}of x){const E=S.queries[w],P=c.currentSubscriptions[w]??{};E&&(Ws(P)===0?v.dispatch(l({queryCacheKey:w})):E.status!=="uninitialized"&&v.dispatch(a(E,w)))}})}return h},x3=({reducerPath:t,queryThunk:e,api:n,refetchQuery:r,internalState:i})=>{const s={},o=(f,h)=>{(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&c(f.payload,h),(e.pending.match(f)||e.rejected.match(f)&&f.meta.condition)&&c(f.meta.arg,h),(e.fulfilled.match(f)||e.rejected.match(f)&&!f.meta.condition)&&a(f.meta.arg,h),n.util.resetApiState.match(f)&&u()};function a({queryCacheKey:f},h){const p=h.getState()[t],y=p.queries[f],k=i.currentSubscriptions[f];if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:v,skipPollingIfUnfocused:b}=d(k);if(!Number.isFinite(v))return;const S=s[f];S!=null&&S.timeout&&(clearTimeout(S.timeout),S.timeout=void 0);const C=Date.now()+v;s[f]={nextPollTimestamp:C,pollingInterval:v,timeout:setTimeout(()=>{(p.config.focused||!b)&&h.dispatch(r(y,f)),a({queryCacheKey:f},h)},v)}}function c({queryCacheKey:f},h){const y=h.getState()[t].queries[f],k=i.currentSubscriptions[f];if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:v}=d(k);if(!Number.isFinite(v)){l(f);return}const b=s[f],S=Date.now()+v;(!b||S<b.nextPollTimestamp)&&a({queryCacheKey:f},h)}function l(f){const h=s[f];h!=null&&h.timeout&&clearTimeout(h.timeout),delete s[f]}function u(){for(const f of Object.keys(s))l(f)}function d(f={}){let h=!1,p=Number.POSITIVE_INFINITY;for(let y in f)f[y].pollingInterval&&(p=Math.min(f[y].pollingInterval,p),h=f[y].skipPollingIfUnfocused||h);return{lowestPollingInterval:p,skipPollingIfUnfocused:h}}return o},T3=({api:t,context:e,queryThunk:n,mutationThunk:r})=>{const i=Ng(n,r),s=mo(n,r),o=ci(n,r),a={};return(l,u)=>{var d,f;if(i(l)){const{requestId:h,arg:{endpointName:p,originalArgs:y}}=l.meta,k=e.endpointDefinitions[p],v=k==null?void 0:k.onQueryStarted;if(v){const b={},S=new Promise((w,E)=>{b.resolve=w,b.reject=E});S.catch(()=>{}),a[h]=b;const C=t.endpoints[p].select(k.type==="query"?y:h),T=u.dispatch((w,E,P)=>P),x={...u,getCacheEntry:()=>C(u.getState()),requestId:h,extra:T,updateCachedData:k.type==="query"?w=>u.dispatch(t.util.updateQueryData(p,y,w)):void 0,queryFulfilled:S};v(y,x)}}else if(o(l)){const{requestId:h,baseQueryMeta:p}=l.meta;(d=a[h])==null||d.resolve({data:l.payload,meta:p}),delete a[h]}else if(s(l)){const{requestId:h,rejectedWithValue:p,baseQueryMeta:y}=l.meta;(f=a[h])==null||f.reject({error:l.payload??l.error,isUnhandledError:!p,meta:y}),delete a[h]}}},w3=({reducerPath:t,context:e,api:n,refetchQuery:r,internalState:i})=>{const{removeQueryResult:s}=n.internalActions,o=(c,l)=>{Dg.match(c)&&a(l,"refetchOnFocus"),Ag.match(c)&&a(l,"refetchOnReconnect")};function a(c,l){const u=c.getState()[t],d=u.queries,f=i.currentSubscriptions;e.batch(()=>{for(const h of Object.keys(f)){const p=d[h],y=f[h];if(!y||!p)continue;(Object.values(y).some(v=>v[l]===!0)||Object.values(y).every(v=>v[l]===void 0)&&u.config[l])&&(Ws(y)===0?c.dispatch(s({queryCacheKey:h})):p.status!=="uninitialized"&&c.dispatch(r(p,h)))}})}return o};function E3(t){const{reducerPath:e,queryThunk:n,api:r,context:i}=t,{apiUid:s}=i,o={invalidateTags:An(`${e}/invalidateTags`)},a=d=>d.type.startsWith(`${e}/`),c=[k3,b3,C3,x3,S3,T3];return{middleware:d=>{let f=!1;const p={...t,internalState:{currentSubscriptions:{}},refetchQuery:u,isThisApiSliceAction:a},y=c.map(b=>b(p)),k=g3(p),v=w3(p);return b=>S=>{if(!xC(S))return b(S);f||(f=!0,d.dispatch(r.internalActions.middlewareRegistered(s)));const C={...d,next:b},T=d.getState(),[x,w]=k(S,C,T);let E;if(x?E=b(S):E=w,d.getState()[e]&&(v(S,C,T),a(S)||i.hasRehydrationInfo(S)))for(const P of y)P(S,C,T);return E}},actions:o};function u(d,f,h={}){return n({type:"query",endpointName:d.endpointName,originalArgs:d.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:f,...h})}}var Ky=Symbol(),_3=({createSelector:t=Ig}={})=>({name:Ky,init(e,{baseQuery:n,tagTypes:r,reducerPath:i,serializeQueryArgs:s,keepUnusedDataFor:o,refetchOnMountOrArgChange:a,refetchOnFocus:c,refetchOnReconnect:l,invalidationBehavior:u},d){m4();const f=z=>(typeof process<"u",z);Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:Ag,onOffline:FC,onFocus:Dg,onFocusLost:UC},util:{}});const{queryThunk:h,mutationThunk:p,patchQueryData:y,updateQueryData:k,upsertQueryData:v,prefetch:b,buildMatchThunkActions:S}=f3({baseQuery:n,reducerPath:i,context:d,api:e,serializeQueryArgs:s,assertTagType:f}),{reducer:C,actions:T}=h3({context:d,queryThunk:h,mutationThunk:p,reducerPath:i,assertTagType:f,config:{refetchOnFocus:c,refetchOnReconnect:l,refetchOnMountOrArgChange:a,keepUnusedDataFor:o,reducerPath:i,invalidationBehavior:u}});Ur(e.util,{patchQueryData:y,updateQueryData:k,upsertQueryData:v,prefetch:b,resetApiState:T.resetApiState}),Ur(e.internalActions,T);const{middleware:x,actions:w}=E3({reducerPath:i,context:d,queryThunk:h,mutationThunk:p,api:e,assertTagType:f});Ur(e.util,w),Ur(e,{reducer:C,middleware:x});const{buildQuerySelector:E,buildMutationSelector:P,selectInvalidatedBy:M,selectCachedArgsForQuery:I}=p3({serializeQueryArgs:s,reducerPath:i,createSelector:t});Ur(e.util,{selectInvalidatedBy:M,selectCachedArgsForQuery:I});const{buildInitiateQuery:A,buildInitiateMutation:q,getRunningMutationThunk:V,getRunningMutationsThunk:ne,getRunningQueriesThunk:ee,getRunningQueryThunk:Z}=d3({queryThunk:h,mutationThunk:p,api:e,serializeQueryArgs:s,context:d});return Ur(e.util,{getRunningMutationThunk:V,getRunningMutationsThunk:ne,getRunningQueryThunk:Z,getRunningQueriesThunk:ee}),{name:Ky,injectEndpoint(z,Q){var ce;const W=e;(ce=W.endpoints)[z]??(ce[z]={}),BC(Q)?Ur(W.endpoints[z],{name:z,select:E(z,Q),initiate:A(z,Q)},S(h,z)):c3(Q)&&Ur(W.endpoints[z],{name:z,select:P(),initiate:q(z)},S(p,z))}}}}),VC={exports:{}},qC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=g;function P3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var R3=typeof Object.is=="function"?Object.is:P3,O3=Dc.useSyncExternalStore,M3=Dc.useRef,I3=Dc.useEffect,N3=Dc.useMemo,D3=Dc.useDebugValue;qC.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=M3(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=N3(function(){function c(h){if(!l){if(l=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,R3(u,h))return p;var y=r(h);return i!==void 0&&i(p,y)?p:(u=h,d=y)}var l=!1,u,d,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,r,i]);var a=O3(t,s[0],s[1]);return I3(function(){o.hasValue=!0,o.value=a},[a]),D3(a),a};VC.exports=qC;var A3=VC.exports,Yt="default"in yh?_e:yh,Qy=Symbol.for("react-redux-context"),Gy=typeof globalThis<"u"?globalThis:{};function L3(){if(!Yt.createContext)return{};const t=Gy[Qy]??(Gy[Qy]=new Map);let e=t.get(Yt.createContext);return e||(e=Yt.createContext(null),t.set(Yt.createContext,e)),e}var li=L3(),j3=()=>{throw new Error("uSES not initialized!")};function jg(t=li){return function(){return Yt.useContext(t)}}var HC=jg(),WC=j3,U3=t=>{WC=t},F3=(t,e)=>t===e;function B3(t=li){const e=t===li?HC:jg(t),n=(r,i={})=>{const{equalityFn:s=F3,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:c,getServerState:l,stabilityCheck:u,identityFunctionCheck:d}=e();Yt.useRef(!0);const f=Yt.useCallback({[r.name](p){return r(p)}}[r.name],[r,u,o.stabilityCheck]),h=WC(c.addNestedSub,a.getState,l||a.getState,f,s);return Yt.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var z3=B3();function KC(t){t()}function $3(){let t=null,e=null;return{clear(){t=null,e=null},notify(){KC(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Jy={notify(){},get:()=>[]};function V3(t,e){let n,r=Jy,i=0,s=!1;function o(y){u();const k=r.subscribe(y);let v=!1;return()=>{v||(v=!0,k(),d())}}function a(){r.notify()}function c(){p.onStateChange&&p.onStateChange()}function l(){return s}function u(){i++,n||(n=t.subscribe(c),r=$3())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Jy)}function f(){s||(s=!0,u())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:l,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var q3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H3=typeof navigator<"u"&&navigator.product==="ReactNative",W3=q3||H3?Yt.useLayoutEffect:Yt.useEffect;function Yy(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Pa(t,e){if(Yy(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Yy(t[n[i]],e[n[i]]))return!1;return!0}function K3({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Yt.useMemo(()=>{const l=V3(t);return{store:t,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=Yt.useMemo(()=>t.getState(),[t]);W3(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const c=e||li;return Yt.createElement(c.Provider,{value:o},n)}var Q3=K3;function QC(t=li){const e=t===li?HC:jg(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var GC=QC();function G3(t=li){const e=t===li?GC:QC(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var J3=G3(),Y3=KC;U3(A3.useSyncExternalStoreWithSelector);function X3(t){return t.type==="query"}function Z3(t){return t.type==="mutation"}function pl(t,...e){return Object.assign(t,...e)}function zf(t){return t.replace(t[0],t[0].toUpperCase())}var vs=WeakMap?new WeakMap:void 0,e6=({endpointName:t,queryArgs:e})=>{let n="";const r=vs==null?void 0:vs.get(e);if(typeof r=="string")n=r;else{const i=JSON.stringify(e,(s,o)=>(o=typeof o=="bigint"?{$bigint:o.toString()}:o,o=er(o)?Object.keys(o).sort().reduce((a,c)=>(a[c]=o[c],a),{}):o,o));er(e)&&(vs==null||vs.set(e,i)),n=i}return`${t}(${n})`},$f=Symbol();function Xy(t,e,n,r){const i=g.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?e({queryArgs:t,endpointDefinition:n,endpointName:r}):t}),[t,e,n,r]),s=g.useRef(i);return g.useEffect(()=>{s.current.serialized!==i.serialized&&(s.current=i)},[i]),s.current.serialized===i.serialized?s.current.queryArgs:t}function Vf(t){const e=g.useRef(t);return g.useEffect(()=>{Pa(e.current,t)||(e.current=t)},[t]),Pa(e.current,t)?e.current:t}var t6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n6=t6(),r6=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i6=r6(),s6=()=>n6||i6?g.useLayoutEffect:g.useEffect,o6=s6(),a6=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:LC.pending}:t;function c6({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:r,useStore:i},unstable__sideEffectsInRender:s,createSelector:o},serializeQueryArgs:a,context:c}){const l=s?p=>p():g.useEffect;return{buildQueryHooks:f,buildMutationHook:h,usePrefetch:d};function u(p,y,k){if(y!=null&&y.endpointName&&p.isUninitialized){const{endpointName:x}=y,w=c.endpointDefinitions[x];a({queryArgs:y.originalArgs,endpointDefinition:w,endpointName:x})===a({queryArgs:k,endpointDefinition:w,endpointName:x})&&(y=void 0)}let v=p.isSuccess?p.data:y==null?void 0:y.data;v===void 0&&(v=p.data);const b=v!==void 0,S=p.isLoading,C=(!y||y.isLoading||y.isUninitialized)&&!b&&S,T=p.isSuccess||S&&b;return{...p,data:v,currentData:p.data,isFetching:S,isLoading:C,isSuccess:T}}function d(p,y){const k=n(),v=Vf(y);return g.useCallback((b,S)=>k(t.util.prefetch(p,b,{...v,...S})),[p,k,v])}function f(p){const y=(b,{refetchOnReconnect:S,refetchOnFocus:C,refetchOnMountOrArgChange:T,skip:x=!1,pollingInterval:w=0,skipPollingIfUnfocused:E=!1}={})=>{const{initiate:P}=t.endpoints[p],M=n(),I=g.useRef(void 0);if(!I.current){const W=M(t.internalActions.internal_getRTKQSubscriptions());I.current=W}const A=Xy(x?Di:b,e6,c.endpointDefinitions[p],p),q=Vf({refetchOnReconnect:S,refetchOnFocus:C,pollingInterval:w,skipPollingIfUnfocused:E}),V=g.useRef(!1),ne=g.useRef(void 0);let{queryCacheKey:ee,requestId:Z}=ne.current||{},z=!1;ee&&Z&&(z=I.current.isRequestSubscribed(ee,Z));const Q=!z&&V.current;return l(()=>{V.current=z}),l(()=>{Q&&(ne.current=void 0)},[Q]),l(()=>{var oe;const W=ne.current;if(typeof process<"u",A===Di){W==null||W.unsubscribe(),ne.current=void 0;return}const ce=(oe=ne.current)==null?void 0:oe.subscriptionOptions;if(!W||W.arg!==A){W==null||W.unsubscribe();const ye=M(P(A,{subscriptionOptions:q,forceRefetch:T}));ne.current=ye}else q!==ce&&W.updateSubscriptionOptions(q)},[M,P,T,A,q,Q]),g.useEffect(()=>()=>{var W;(W=ne.current)==null||W.unsubscribe(),ne.current=void 0},[]),g.useMemo(()=>({refetch:()=>{var W;if(!ne.current)throw new Error(en(38));return(W=ne.current)==null?void 0:W.refetch()}}),[])},k=({refetchOnReconnect:b,refetchOnFocus:S,pollingInterval:C=0,skipPollingIfUnfocused:T=!1}={})=>{const{initiate:x}=t.endpoints[p],w=n(),[E,P]=g.useState($f),M=g.useRef(void 0),I=Vf({refetchOnReconnect:b,refetchOnFocus:S,pollingInterval:C,skipPollingIfUnfocused:T});l(()=>{var ne,ee;const V=(ne=M.current)==null?void 0:ne.subscriptionOptions;I!==V&&((ee=M.current)==null||ee.updateSubscriptionOptions(I))},[I]);const A=g.useRef(I);l(()=>{A.current=I},[I]);const q=g.useCallback(function(V,ne=!1){let ee;return e(()=>{var Z;(Z=M.current)==null||Z.unsubscribe(),M.current=ee=w(x(V,{subscriptionOptions:A.current,forceRefetch:!ne})),P(V)}),ee},[w,x]);return g.useEffect(()=>()=>{var V;(V=M==null?void 0:M.current)==null||V.unsubscribe()},[]),g.useEffect(()=>{E!==$f&&!M.current&&q(E,!0)},[E,q]),g.useMemo(()=>[q,E],[q,E])},v=(b,{skip:S=!1,selectFromResult:C}={})=>{const{select:T}=t.endpoints[p],x=Xy(S?Di:b,a,c.endpointDefinitions[p],p),w=g.useRef(void 0),E=g.useMemo(()=>o([T(x),(q,V)=>V,q=>x],u,{memoizeOptions:{resultEqualityCheck:Pa}}),[T,x]),P=g.useMemo(()=>C?o([E],C,{devModeChecks:{identityFunctionCheck:"never"}}):E,[E,C]),M=r(q=>P(q,w.current),Pa),I=i(),A=E(I.getState(),w.current);return o6(()=>{w.current=A},[A]),M};return{useQueryState:v,useQuerySubscription:y,useLazyQuerySubscription:k,useLazyQuery(b){const[S,C]=k(b),T=v(C,{...b,skip:C===$f}),x=g.useMemo(()=>({lastArg:C}),[C]);return g.useMemo(()=>[S,T,x],[S,T,x])},useQuery(b,S){const C=y(b,S),T=v(b,{selectFromResult:b===Di||S!=null&&S.skip?void 0:a6,...S}),{data:x,status:w,isLoading:E,isSuccess:P,isError:M,error:I}=T;return g.useDebugValue({data:x,status:w,isLoading:E,isSuccess:P,isError:M,error:I}),g.useMemo(()=>({...T,...C}),[T,C])}}}function h(p){return({selectFromResult:y,fixedCacheKey:k}={})=>{const{select:v,initiate:b}=t.endpoints[p],S=n(),[C,T]=g.useState();g.useEffect(()=>()=>{C!=null&&C.arg.fixedCacheKey||C==null||C.reset()},[C]);const x=g.useCallback(function(ce){const oe=S(b(ce,{fixedCacheKey:k}));return T(oe),oe},[S,b,k]),{requestId:w}=C||{},E=g.useMemo(()=>v({fixedCacheKey:k,requestId:C==null?void 0:C.requestId}),[k,C,v]),P=g.useMemo(()=>y?o([E],y):E,[y,E]),M=r(P,Pa),I=k==null?C==null?void 0:C.arg.originalArgs:void 0,A=g.useCallback(()=>{e(()=>{C&&T(void 0),k&&S(t.internalActions.removeMutationResult({requestId:w,fixedCacheKey:k}))})},[S,k,C,w]),{endpointName:q,data:V,status:ne,isLoading:ee,isSuccess:Z,isError:z,error:Q}=M;g.useDebugValue({endpointName:q,data:V,status:ne,isLoading:ee,isSuccess:Z,isError:z,error:Q});const W=g.useMemo(()=>({...M,originalArgs:I,reset:A}),[M,I,A]);return g.useMemo(()=>[x,W],[x,W])}}}var l6=Symbol(),u6=({batch:t=Y3,hooks:e={useDispatch:J3,useSelector:z3,useStore:GC},createSelector:n=Ig,unstable__sideEffectsInRender:r=!1,...i}={})=>({name:l6,init(s,{serializeQueryArgs:o},a){const c=s,{buildQueryHooks:l,buildMutationHook:u,usePrefetch:d}=c6({api:s,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:o,context:a});return pl(c,{usePrefetch:d}),pl(a,{batch:t}),{injectEndpoint(f,h){if(X3(h)){const{useQuery:p,useLazyQuery:y,useLazyQuerySubscription:k,useQueryState:v,useQuerySubscription:b}=l(f);pl(c.endpoints[f],{useQuery:p,useLazyQuery:y,useLazyQuerySubscription:k,useQueryState:v,useQuerySubscription:b}),s[`use${zf(f)}Query`]=p,s[`useLazy${zf(f)}Query`]=y}else if(Z3(h)){const p=u(f);pl(c.endpoints[f],{useMutation:p}),s[`use${zf(f)}Mutation`]=p}}}}}),d6=m3(_3(),u6());const jl=d6({reducerPath:"api",baseQuery:a3({baseUrl:`${es}`}),endpoints:()=>({}),tagTypes:ZR}),Zy="/auth",ys="/user",f6=jl.injectEndpoints({endpoints:t=>({userLogin:t.mutation({query:e=>({url:`${Zy}/login`,method:"POST",data:e}),invalidatesTags:[dr.user]}),userSignUP:t.mutation({query:e=>({url:`${Zy}/signup`,method:"POST",data:e}),invalidatesTags:[dr.user]}),getAllUser:t.query({query:()=>`${ys}`,providesTags:[dr.user]}),getSingleUser:t.query({query:e=>`${ys}/${e}`,providesTags:[dr.user]}),getProfile:t.query({query:()=>({url:`${ys}/profile`,method:"GET"}),providesTags:[dr.user]}),updateRole:t.mutation({query:e=>({url:`${ys}/update-role/${e.id}`,method:"PATCH",data:e.body}),invalidatesTags:[dr.user]}),addPoints:t.mutation({query:e=>({url:`${ys}/add-points/${e.id}`,method:"PATCH",body:{points:e.points}}),invalidatesTags:[dr.user]}),removePoints:t.mutation({query:e=>({url:`${ys}/decrement-points/${e.id}`,method:"PATCH",body:{points:e.points}}),invalidatesTags:[dr.user]})})}),{useUserLoginMutation:L9,useUserSignUPMutation:j9,useGetSingleUserQuery:Ug,useGetProfileQuery:U9,useUpdateRoleMutation:F9,useAddPointsMutation:h6,useRemovePointsMutation:p6,useGetAllUserQuery:JC}=f6,m6=()=>{const[t,e]=g.useState(!1),{user:n}=g.useContext(Et),{data:r}=Ug((n==null?void 0:n.id)??"1"),i=r==null?void 0:r.data,s=()=>{e(!t)},{pathname:o}=yi(),a=[{name:"Home",link:"/",active:o==="/"},{name:"Pricing",link:"/pricing",active:o==="/pricing"},{name:"About",link:"/",active:o==="/about"},{name:"Users",link:"/users",active:o==="/users"}];return n!=null&&n.email||a.push({name:"Login",link:"/login",active:o==="/login"},{name:"Signup",link:"/sign-up",active:o==="/sign-up"}),m.jsxs("header",{className:"shadow-md font-sans tracking-wide relative z-50",children:[m.jsxs("section",{className:"py-2 bg-[#1E1B22] text-white text-right px-10 flex justify-between items-center flex-wrap",children:[m.jsx(rc,{}),m.jsxs("div",{className:"relative w-1/3",children:[m.jsx("input",{id:"pass",className:"h-10 w-full rounded bg-transparent pl-10 outline-none ring-1 ring-zinc-400 dark:ring-gray-500  bg-white  text-slate-700 placeholder:text-slate-600 placeholder:font-serif",placeholder:"Search by category ",name:"password",type:"password"}),m.jsx("span",{className:"absolute left-2 top-2",children:m.jsx(YR,{className:"text-2xl text-black"})})]}),m.jsx("div",{className:"hidden lg:flex",children:m.jsx(Sy,{items:["Profile","Category","Dashboard"],buttonMenu:m.jsxs("div",{className:"flex gap-2 font-bold",children:[m.jsx(XR,{className:"text-2xl"})," ",m.jsx("span",{children:n==null?void 0:n.name})]})})})]}),m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 px-2 lg:px-5 py-4 bg-[#1E1B22] min-h-[70px]",children:[m.jsx(Sy,{items:["Profile","Category"],buttonMenu:m.jsxs("div",{className:"flex gap-2 font-bold",children:[m.jsx(JR,{className:"text-2xl"})," ",m.jsx("span",{children:n==null?void 0:n.name})]})}),m.jsxs("div",{id:"collapseMenu",className:`${t?"block":"hidden"} lg:flex lg:gap-x-5 max-lg:space-y-3 max-lg:fixed max-lg:bg-slate-400  text-black max-lg:w-1/2 max-lg:min-w-[300px] max-lg:top-0 max-lg:left-0 max-lg:p-6 max-lg:h-full max-lg:shadow-md max-lg:overflow-auto z-50  `,children:[m.jsx("button",{id:"toggleClose",onClick:s,className:"lg:hidden fixed top-2 right-4 z-[100] rounded-full bg-white p-3",children:m.jsx(GR,{className:"text-2xl"})}),m.jsxs("ul",{className:"lg:flex lg:gap-x-5 max-lg:space-y-3 justify-between z-50",children:[m.jsx("li",{className:"mb-6 hidden max-lg:block",children:m.jsx(Le,{to:"/",children:m.jsx(rc,{})})}),a.map(c=>m.jsx("li",{className:"max-lg:border-b max-lg:py-3 px-3",children:m.jsx(Le,{to:c==null?void 0:c.link,onClick:()=>e(!1),className:`hover:text-primary block font-bold text-[15px] ${c!=null&&c.active?"text-primary":"text-black lg:text-white"}`,children:c.name})},c==null?void 0:c.name))]})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3 font-bold text-white text-2xl",children:[m.jsx("h2",{children:m.jsx(wa,{className:"text-2xl text-white font-bold"})}),m.jsx("h1",{children:" Total Points :"}),m.jsxs("h2",{children:[" ",(i==null?void 0:i.points)??0]})]}),m.jsx("div",{className:"flex max-lg:ml-auto",children:m.jsx("button",{id:"toggleOpen",onClick:s,className:"lg:hidden",children:m.jsx(SC,{className:"text-2xl text-white font-bold"})})})]})]})};function YC({user:t}){const{data:e}=Ug((t==null?void 0:t.id)??"1"),[n]=h6(),r=bi(),i=e==null?void 0:e.data,[s,o]=g.useState(!1);g.useEffect(()=>{console.log("ok"),(i==null?void 0:i.points)!==void 0&&(i==null?void 0:i.points)<2&&o(!0)},[i==null?void 0:i.points]);const a=async()=>{if(i!=null&&i.id&&(i==null?void 0:i.points)!==void 0&&(i==null?void 0:i.points)<2)try{await n({id:i.id,points:10}).unwrap()&&o(!1)}catch(l){console.error("Error adding points:",l)}},c=()=>{o(!1),r("/")};return m.jsx(_e.Fragment,{children:m.jsx("div",{className:"",children:s&&m.jsx("div",{className:"fixed inset-0 z-[100] grid place-items-center bg-black/20 backdrop-blur-sm",children:m.jsxs("div",{className:"relative max-w-xl p-5 bg-white rounded-lg shadow-lg",children:[m.jsxs("h2",{className:"text-xl",children:["Your points-",i==null?void 0:i.points," are low"]}),m.jsx("p",{className:"mb-4",children:"You need to add points to continue using the features."}),m.jsx("button",{onClick:a,className:"p-2 bg-primary text-white rounded-lg hover:bg-primary/80",children:"Add Points"}),m.jsx("button",{onClick:c,className:"ml-4 p-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Cancel"})]})})})})}/*!
Copyright (C) 2013-2017 by Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/var yr="~",Ks="\\x"+("0"+yr.charCodeAt(0).toString(16)).slice(-2),Ad="\\"+Ks,g6=new RegExp(Ks,"g"),v6=new RegExp(Ad,"g"),y6=new RegExp("(?:^|([^\\\\]))"+Ad),qf=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},XC=String;function b6(t,e,n){var r=!1,i=!!e,s=[],o=[t],a=[t],c=[n?yr:"[Circular]"],l=t,u=1,d,f;return i&&(f=typeof e=="object"?function(h,p){return h!==""&&e.indexOf(h)<0?void 0:p}:e),function(h,p){return i&&(p=f.call(this,h,p)),r?(l!==this&&(d=u-qf.call(o,this)-1,u-=d,o.splice(u,o.length),s.splice(u-1,s.length),l=this),typeof p=="object"&&p?(qf.call(o,p)<0&&o.push(l=p),u=o.length,d=qf.call(a,p),d<0?(d=a.push(p)-1,n?(s.push((""+h).replace(g6,Ks)),c[d]=yr+s.join(yr)):c[d]=c[0]):p=c[d]):typeof p=="string"&&n&&(p=p.replace(Ks,Ad).replace(yr,Ks))):r=!0,p}}function S6(t,e){for(var n=0,r=e.length;n<r;t=t[e[n++].replace(v6,yr)]);return t}function k6(t){return function(e,n){var r=typeof n=="string";return r&&n.charAt(0)===yr?new XC(n.slice(1)):(e===""&&(n=Fg(n,n,{})),r&&(n=n.replace(y6,"$1"+yr).replace(Ad,Ks)),t?t.call(this,e,n):n)}}function C6(t,e,n){for(var r=0,i=e.length;r<i;r++)e[r]=Fg(t,e[r],n);return e}function x6(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(e[r]=Fg(t,e[r],n));return e}function Fg(t,e,n){return e instanceof Array?C6(t,e,n):e instanceof XC?e.length?n.hasOwnProperty(e)?n[e]:n[e]=S6(t,e.split(yr)):t:e instanceof Object?x6(t,e,n):e}var xp={stringify:function(e,n,r,i){return xp.parser.stringify(e,b6(e,n,!i),r)},parse:function(e,n){return xp.parser.parse(e,k6(n))},parser:JSON},T6=xp;const w6=To(T6),nr=Object.create(null);nr.open="0";nr.close="1";nr.ping="2";nr.pong="3";nr.message="4";nr.upgrade="5";nr.noop="6";const Ul=Object.create(null);Object.keys(nr).forEach(t=>{Ul[nr[t]]=t});const Tp={type:"error",data:"parser error"},ZC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ex=typeof ArrayBuffer=="function",tx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Bg=({type:t,data:e},n,r)=>ZC&&e instanceof Blob?n?r(e):e1(e,r):ex&&(e instanceof ArrayBuffer||tx(e))?n?r(e):e1(new Blob([e]),r):r(nr[t]+(e||"")),e1=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function t1(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Hf;function E6(t,e){if(ZC&&t.data instanceof Blob)return t.data.arrayBuffer().then(t1).then(e);if(ex&&(t.data instanceof ArrayBuffer||tx(t.data)))return e(t1(t.data));Bg(t,!1,n=>{Hf||(Hf=new TextEncoder),e(Hf.encode(n))})}const n1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ha=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<n1.length;t++)ha[n1.charCodeAt(t)]=t;const _6=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=ha[t.charCodeAt(r)],o=ha[t.charCodeAt(r+1)],a=ha[t.charCodeAt(r+2)],c=ha[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},P6=typeof ArrayBuffer=="function",zg=(t,e)=>{if(typeof t!="string")return{type:"message",data:nx(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:R6(t.substring(1),e)}:Ul[n]?t.length>1?{type:Ul[n],data:t.substring(1)}:{type:Ul[n]}:Tp},R6=(t,e)=>{if(P6){const n=_6(t);return nx(n,e)}else return{base64:!0,data:t}},nx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},rx="",O6=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Bg(s,!1,a=>{r[o]=a,++i===n&&e(r.join(rx))})})},M6=(t,e)=>{const n=t.split(rx),r=[];for(let i=0;i<n.length;i++){const s=zg(n[i],e);if(r.push(s),s.type==="error")break}return r};function I6(){return new TransformStream({transform(t,e){E6(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Wf;function ml(t){return t.reduce((e,n)=>e+n.length,0)}function gl(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function N6(t,e){Wf||(Wf=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(ml(n)<1)break;const c=gl(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(ml(n)<2)break;const c=gl(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ml(n)<8)break;const c=gl(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Tp);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(ml(n)<i)break;const c=gl(n,i);a.enqueue(zg(s?c:Wf.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(Tp);break}}}})}const ix=4;function Xe(t){if(t)return D6(t)}function D6(t){for(var e in Xe.prototype)t[e]=Xe.prototype[e];return t}Xe.prototype.on=Xe.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Xe.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Xe.prototype.off=Xe.prototype.removeListener=Xe.prototype.removeAllListeners=Xe.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Xe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Xe.prototype.emitReserved=Xe.prototype.emit;Xe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Xe.prototype.hasListeners=function(t){return!!this.listeners(t).length};const un=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function sx(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const A6=un.setTimeout,L6=un.clearTimeout;function Ld(t,e){e.useNativeTimers?(t.setTimeoutFn=A6.bind(un),t.clearTimeoutFn=L6.bind(un)):(t.setTimeoutFn=un.setTimeout.bind(un),t.clearTimeoutFn=un.clearTimeout.bind(un))}const j6=1.33;function U6(t){return typeof t=="string"?F6(t):Math.ceil((t.byteLength||t.size)*j6)}function F6(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function B6(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function z6(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class $6 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class $g extends Xe{constructor(e){super(),this.writable=!1,Ld(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new $6(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=zg(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=B6(e);return n.length?"?"+n:""}}const ox="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),wp=64,V6={};let r1=0,vl=0,i1;function s1(t){let e="";do e=ox[t%wp]+e,t=Math.floor(t/wp);while(t>0);return e}function ax(){const t=s1(+new Date);return t!==i1?(r1=0,i1=t):t+"."+s1(r1++)}for(;vl<wp;vl++)V6[ox[vl]]=vl;let cx=!1;try{cx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const q6=cx;function lx(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||q6))return new XMLHttpRequest}catch{}if(!e)try{return new un[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function H6(){}const W6=function(){return new lx({xdomain:!1}).responseType!=null}();class K6 extends $g{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=W6&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};M6(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,O6(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=ax()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Qs(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Qs=class Fl extends Xe{constructor(e,n){super(),Ld(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=sx(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new lx(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=Fl.requestsCount++,Fl.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=H6,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Fl.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Qs.requestsCount=0;Qs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",o1);else if(typeof addEventListener=="function"){const t="onpagehide"in un?"pagehide":"unload";addEventListener(t,o1,!1)}}function o1(){for(let t in Qs.requests)Qs.requests.hasOwnProperty(t)&&Qs.requests[t].abort()}const Vg=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),yl=un.WebSocket||un.MozWebSocket,a1=!0,Q6="arraybuffer",c1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class G6 extends $g{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=c1?{}:sx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=a1&&!c1?n?new yl(e,n):new yl(e):new yl(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Bg(r,this.supportsBinary,s=>{const o={};try{a1&&this.ws.send(s)}catch{}i&&Vg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=ax()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!yl}}class J6 extends $g{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=N6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=I6();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&Vg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const Y6={websocket:G6,webtransport:J6,polling:K6},X6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Z6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ep(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=X6.exec(t||""),s={},o=14;for(;o--;)s[Z6[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=eO(s,s.path),s.queryKey=tO(s,s.query),s}function eO(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function tO(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let ux=class Cs extends Xe{constructor(e,n={}){super(),this.binaryType=Q6,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=Ep(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=Ep(n.host).host),Ld(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=z6(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=ix,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Y6[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Cs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;Cs.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Cs.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Cs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=U6(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Cs.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};ux.protocol=ix;function nO(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Ep(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const rO=typeof ArrayBuffer=="function",iO=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,dx=Object.prototype.toString,sO=typeof Blob=="function"||typeof Blob<"u"&&dx.call(Blob)==="[object BlobConstructor]",oO=typeof File=="function"||typeof File<"u"&&dx.call(File)==="[object FileConstructor]";function qg(t){return rO&&(t instanceof ArrayBuffer||iO(t))||sO&&t instanceof Blob||oO&&t instanceof File}function Bl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Bl(t[n]))return!0;return!1}if(qg(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Bl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Bl(t[n]))return!0;return!1}function aO(t){const e=[],n=t.data,r=t;return r.data=_p(n,e),r.attachments=e.length,{packet:r,buffers:e}}function _p(t,e){if(!t)return t;if(qg(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=_p(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=_p(t[r],e));return n}return t}function cO(t,e){return t.data=Pp(t.data,e),delete t.attachments,t}function Pp(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Pp(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Pp(t[n],e));return t}const lO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],uO=5;var pe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pe||(pe={}));class dO{constructor(e){this.replacer=e}encode(e){return(e.type===pe.EVENT||e.type===pe.ACK)&&Bl(e)?this.encodeAsBinary({type:e.type===pe.EVENT?pe.BINARY_EVENT:pe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===pe.BINARY_EVENT||e.type===pe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=aO(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function l1(t){return Object.prototype.toString.call(t)==="[object Object]"}class Hg extends Xe{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===pe.BINARY_EVENT;r||n.type===pe.BINARY_ACK?(n.type=r?pe.EVENT:pe.ACK,this.reconstructor=new fO(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(qg(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(pe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===pe.BINARY_EVENT||r.type===pe.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Hg.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case pe.CONNECT:return l1(n);case pe.DISCONNECT:return n===void 0;case pe.CONNECT_ERROR:return typeof n=="string"||l1(n);case pe.EVENT:case pe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&lO.indexOf(n[0])===-1);case pe.ACK:case pe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fO{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=cO(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hO=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hg,Encoder:dO,get PacketType(){return pe},protocol:uO},Symbol.toStringTag,{value:"Module"}));function _n(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const pO=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fx extends Xe{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[_n(e,"open",this.onopen.bind(this)),_n(e,"packet",this.onpacket.bind(this)),_n(e,"error",this.onerror.bind(this)),_n(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(pO.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:pe.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pe.EVENT:case pe.BINARY_EVENT:this.onevent(e);break;case pe.ACK:case pe.BINARY_ACK:this.onack(e);break;case pe.DISCONNECT:this.ondisconnect();break;case pe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:pe.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Oo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Oo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Oo.prototype.reset=function(){this.attempts=0};Oo.prototype.setMin=function(t){this.ms=t};Oo.prototype.setMax=function(t){this.max=t};Oo.prototype.setJitter=function(t){this.jitter=t};class Rp extends Xe{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ld(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Oo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||hO;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ux(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=_n(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=_n(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(_n(e,"ping",this.onping.bind(this)),_n(e,"data",this.ondata.bind(this)),_n(e,"error",this.onerror.bind(this)),_n(e,"close",this.onclose.bind(this)),_n(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Vg(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new fx(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Yo={};function zl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=nO(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Yo[i]&&s in Yo[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Rp(r,e):(Yo[i]||(Yo[i]=new Rp(r,e)),c=Yo[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(zl,{Manager:Rp,Socket:fx,io:zl,connect:zl});const jd=(t,e)=>{const[n,r]=g.useState(null),[i,s]=g.useState(!0),[o,a]=g.useState(null),c=g.useCallback(async()=>{s(!0),a(null);try{const l=await fetch(t,e);if(!l.ok)throw new Error(`Error: ${l.statusText}`);const u=await l.json();r(u)}catch(l){a(l)}finally{s(!1)}},[t,e]);return g.useEffect(()=>{c()},[c]),{data:n,loading:i,error:o,refetch:c}},Ud=g.createContext(null),mO=({children:t})=>{const{user:e}=g.useContext(Et),n=zl(`${LR}?id=${e==null?void 0:e.id}`),[r,i]=g.useState({}),{data:s}=jd(`${es}/user`),o=s==null?void 0:s.data;return g.useEffect(()=>{n.on("new-message",a=>{i(a)})},[n]),m.jsx(Ud.Provider,{value:{io:n,newMessage:r,userAllData:o,user:e},children:t})};class gO{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return vO(e).buffer}}function vO(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function hx(t){return new yO(t).unpack()}function px(t){const e=new bO,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class yO{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",s,o;for(;r<e;)s=n[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class bO{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=n<<31|r+1023<<20|s/o&1048575,c=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const o=n[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new gO,this._textEncoder=new TextEncoder}}let mx=!0,gx=!0;function $l(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function ts(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function SO(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(mx=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function kO(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(gx=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function vx(){if(typeof window=="object"){if(mx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wg(t,e){gx&&console.warn(t+" is deprecated, please use "+e+" instead.")}function CO(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=$l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=$l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=$l(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function u1(t){return Object.prototype.toString.call(t)==="[object Object]"}function yx(t){return u1(t)?Object.keys(t).reduce(function(e,n){const r=u1(t[n]),i=r?yx(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Op(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Op(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Op(t,t.get(i),n)})}))}function d1(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&Op(t,a,i)})}),i}const f1=vx;function bx(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(y=>p.label.toLowerCase().includes(y)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),f1("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return f1("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function Sx(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function kx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ts(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Cx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function xx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>d1(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),ts(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>d1(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Tx(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function wx(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Tx(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(y=>y===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new t.MediaStream([u]);this._streams[d.id]=y,this._reverseStreams[y.id]=d,this.addStream(y)}return this.getSenders().find(y=>y.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const y=s(this,p);f[0].apply(null,[y])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(y=>u.track===y)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Mp(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function Ex(t,e){ts(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const h1=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Ex,shimAddTrackRemoveTrack:wx,shimAddTrackRemoveTrackWithNative:Tx,shimGetSendersWithDtmf:Cx,shimGetUserMedia:bx,shimMediaStream:Sx,shimOnTrack:kx,shimPeerConnection:Mp,shimSenderReceiverGetStats:xx},Symbol.toStringTag,{value:"Module"}));function _x(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Wg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function xO(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Px(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ip(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function Rx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ox(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ts(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Mx(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Wg("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Ix(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Nx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Dx(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Ax(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Lx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const p1=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Nx,shimCreateAnswer:Lx,shimCreateOffer:Ax,shimGetDisplayMedia:xO,shimGetParameters:Dx,shimGetUserMedia:_x,shimOnTrack:Px,shimPeerConnection:Ip,shimRTCDataChannel:Ix,shimReceiverGetStats:Ox,shimRemoveStream:Mx,shimSenderGetStats:Rx},Symbol.toStringTag,{value:"Module"}));function jx(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function Ux(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function Fx(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function Bx(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(zx(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function zx(t){return t&&t.video!==void 0?Object.assign({},t,{video:yx(t.video)}):t}function $x(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Wg("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Vx(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qx(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Hx(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const m1=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Hx,shimCallbacksAPI:Fx,shimConstraints:zx,shimCreateOfferLegacy:qx,shimGetUserMedia:Bx,shimLocalStreamsAPI:jx,shimRTCIceServerUrls:$x,shimRemoteStreamsAPI:Ux,shimTrackEventTransceiver:Vx},Symbol.toStringTag,{value:"Module"}));var Wx={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Wx);var Kx=Wx.exports;const Gs=To(Kx),TO=_m({__proto__:null,default:Gs},[Kx]);function Vl(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Gs.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,ts(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Np(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||ts(t,"icecandidate",e=>{if(e.candidate){const n=Gs.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function ql(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Gs.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Gs.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=Gs.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Hl(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},ts(t,"datachannel",r=>(e(r.channel,r.target),r))}function Dp(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ap(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Wl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Kl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const wO=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Ap,shimAddIceCandidateNullOrEmpty:Wl,shimConnectionState:Dp,shimMaxMessageSize:ql,shimParameterlessSetLocalDescription:Kl,shimRTCIceCandidate:Vl,shimRTCIceCandidateRelayProtocol:Np,shimSendThrowTypeError:Hl},Symbol.toStringTag,{value:"Module"}));function EO({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=vx,r=CO(t),i={browserDetails:r,commonShim:wO,extractVersion:$l,disableLog:SO,disableWarnings:kO,sdp:TO};switch(r.browser){case"chrome":if(!h1||!Mp||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=h1,Wl(t,r),Kl(t),bx(t,r),Sx(t),Mp(t,r),kx(t),wx(t,r),Cx(t),xx(t),Ex(t,r),Vl(t),Np(t),Dp(t),ql(t,r),Hl(t),Ap(t,r);break;case"firefox":if(!p1||!Ip||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=p1,Wl(t,r),Kl(t),_x(t,r),Ip(t,r),Px(t),Mx(t),Rx(t),Ox(t),Ix(t),Nx(t),Dx(t),Ax(t),Lx(t),Vl(t),Dp(t),ql(t,r),Hl(t);break;case"safari":if(!m1||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=m1,Wl(t,r),Kl(t),$x(t),qx(t),Fx(t),jx(t),Ux(t),Vx(t),Bx(t),Hx(t),Vl(t),Np(t),ql(t,r),Hl(t),Ap(t,r);break;default:n("Unsupported browser!");break}return i}const g1=EO({window:typeof window>"u"?void 0:window});function ns(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class Qx{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a),l={__peerData:this._dataCount,n:s,data:c,total:i};n.push(l),o=a,s++}return this._dataCount++,n}}}function _O(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Kf=g1.default||g1,Xo=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Kf.browserDetails.browser}getVersion(){return Kf.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Kf.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},PO=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),Gx=()=>Math.random().toString(36).slice(2),v1={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class RO extends Qx{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=v1,this.browser=Xo.getBrowser(),this.browserVersion=Xo.getVersion(),this.pack=px,this.unpack=hx,this.supports=function(){const n={browser:Xo.isBrowserSupported(),webRTC:Xo.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(v1),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Xo.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=PO,this.randomToken=Gx}}const jt=new RO,OO="PeerJS: ";var y1;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(y1||(y1={}));class MO{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[OO,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var X=new MO,Kg={},IO=Object.prototype.hasOwnProperty,Dt="~";function uc(){}Object.create&&(uc.prototype=Object.create(null),new uc().__proto__||(Dt=!1));function NO(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Jx(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new NO(n,r||t,i),o=Dt?Dt+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Ql(t,e){--t._eventsCount===0?t._events=new uc:delete t._events[e]}function xt(){this._events=new uc,this._eventsCount=0}xt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)IO.call(n,r)&&e.push(Dt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};xt.prototype.listeners=function(e){var n=Dt?Dt+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};xt.prototype.listenerCount=function(e){var n=Dt?Dt+e:e,r=this._events[n];return r?r.fn?1:r.length:0};xt.prototype.emit=function(e,n,r,i,s,o){var a=Dt?Dt+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,i),!0;case 5:return c.fn.call(c.context,n,r,i,s),!0;case 6:return c.fn.call(c.context,n,r,i,s,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,h;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,n);break;case 3:c[d].fn.call(c[d].context,n,r);break;case 4:c[d].fn.call(c[d].context,n,r,i);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c[d].fn.apply(c[d].context,u)}}return!0};xt.prototype.on=function(e,n,r){return Jx(this,e,n,r,!1)};xt.prototype.once=function(e,n,r){return Jx(this,e,n,r,!0)};xt.prototype.removeListener=function(e,n,r,i){var s=Dt?Dt+e:e;if(!this._events[s])return this;if(!n)return Ql(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&Ql(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==n||i&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:Ql(this,s)}return this};xt.prototype.removeAllListeners=function(e){var n;return e?(n=Dt?Dt+e:e,this._events[n]&&Ql(this,n)):(this._events=new uc,this._eventsCount=0),this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.addListener=xt.prototype.on;xt.prefixed=Dt;xt.EventEmitter=xt;Kg=xt;var rs={};ns(rs,"ConnectionType",()=>Xn);ns(rs,"PeerErrorType",()=>Ve);ns(rs,"BaseConnectionErrorType",()=>dc);ns(rs,"DataConnectionErrorType",()=>fc);ns(rs,"SerializationType",()=>go);ns(rs,"SocketEventType",()=>Gn);ns(rs,"ServerMessageType",()=>rt);var Xn;(function(t){t.Data="data",t.Media="media"})(Xn||(Xn={}));var Ve;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(Ve||(Ve={}));var dc;(function(t){t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed"})(dc||(dc={}));var fc;(function(t){t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big"})(fc||(fc={}));var go;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw"})(go||(go={}));var Gn;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(Gn||(Gn={}));var rt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(rt||(rt={}));var Qg={};Qg=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class DO extends Kg.EventEmitter{constructor(e,n,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+i+"peerjs?key="+s}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Qg.version),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),X.log("Server message received:",s)}catch{X.log("Invalid server message",i.data);return}this.emit(Gn.Message,s)},this._socket.onclose=i=>{this._disconnected||(X.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Gn.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),X.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){X.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:rt.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Gn.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Yx{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Xn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){X.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;X.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(X.log(`Received ICE candidates for ${n}:`,o.candidate),s.socket.send({type:rt.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":X.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(dc.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":X.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(dc.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":X.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},X.log("Listening for data channel"),e.ondatachannel=o=>{X.log("Received data channel");const a=o.channel;s.getConnection(n,r)._initializeDataChannel(a)},X.log("Listening for remote stream"),e.ontrack=o=>{X.log("Received remote stream");const a=o.streams[0],c=s.getConnection(n,r);if(c.type===Xn.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){X.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);X.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),X.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Xn.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:rt.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Ve.WebRTC,i),X.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Ve.WebRTC,r),X.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();X.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),X.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:rt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Ve.WebRTC,i),X.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Ve.WebRTC,r),X.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;X.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),X.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(Ve.WebRTC,o),X.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){X.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),X.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Ve.WebRTC,n),X.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(X.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return X.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){X.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class Xx extends Kg.EventEmitter{emitError(e,n){X.error("Error:",n),this.emit("error",new AO(`${e}`,n))}}class AO extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class Zx extends Xx{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var xm;const Aa=class Aa extends Zx{get type(){return Xn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Aa.ID_PREFIX+jt.randomToken(),this._negotiator=new Yx(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{X.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{X.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){X.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case rt.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case rt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:X.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){X.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};xm=new WeakMap,jo(Aa,xm,Aa.ID_PREFIX="mc_");let Ku=Aa;class LO{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${n}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Qg.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){X.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==jt.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===jt.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw X.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Tm,wm;const Pi=class Pi extends Zx{get type(){return Xn.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Pi.ID_PREFIX+Gx(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Yx(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{X.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{X.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{X.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(fc.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case rt.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case rt.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:X.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Tm=new WeakMap,wm=new WeakMap,jo(Pi,Tm,Pi.ID_PREFIX="dc_"),jo(Pi,wm,Pi.MAX_BUFFERED_AMOUNT=8388608);let Qu=Pi;class Gg extends Qu{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Qu.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return X.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Qf extends Gg{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new Qx,this.serialization=go.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=hx(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=_O(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=px(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);X.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class jO extends Gg{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=go.None}}class UO extends Gg{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=jt.chunkedMTU){this.emitError(fc.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=go.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Em;const La=class La extends Xx{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:jO,json:UO,binary:Qf,"binary-utf8":Qf,default:Qf},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:jt.CLOUD_HOST,port:jt.CLOUD_PORT,path:"/",key:La.DEFAULT_KEY,token:jt.randomToken(),config:jt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==jt.CLOUD_HOST?this._options.secure=jt.isSecure():this._options.host==jt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&X.setLogFunction(this._options.logFunction),X.logLevel=this._options.debug||0,this._api=new LO(n),this._socket=this._createServerConnection(),!jt.supports.audioVideo&&!jt.supports.data){this._delayedAbort(Ve.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!jt.validateId(r)){this._delayedAbort(Ve.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Ve.ServerError,i))}_createServerConnection(){const e=new DO(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Gn.Message,n=>{this._handleMessage(n)}),e.on(Gn.Error,n=>{this._abort(Ve.SocketError,n)}),e.on(Gn.Disconnected,()=>{this.disconnected||(this.emitError(Ve.Network,"Lost connection to server."),this.disconnect())}),e.on(Gn.Close,()=>{this.disconnected||this._abort(Ve.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case rt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case rt.Error:this._abort(Ve.ServerError,r.msg);break;case rt.IdTaken:this._abort(Ve.UnavailableID,`ID "${this.id}" is taken`);break;case rt.InvalidKey:this._abort(Ve.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case rt.Leave:X.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case rt.Expire:this.emitError(Ve.PeerUnavailable,`Could not connect to peer ${i}`);break;case rt.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),X.warn(`Offer received for existing Connection ID:${s}`)),r.type===Xn.Media){const c=new Ku(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=c,this._addConnection(i,o),this.emit("call",c)}else if(r.type===Xn.Data){const c=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(i,o),this.emit("connection",c)}else{X.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)o.handleMessage(c);break}default:{if(!r){X.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):X.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){X.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ve.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){X.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ve.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){X.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Ku(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){X.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){X.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(X.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;X.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)X.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)X.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(Ve.ServerError,n))}};Em=new WeakMap,jo(La,Em,La.DEFAULT_KEY="peerjs");let Lp=La;var eT=Lp;const Ac=g.createContext(null),FO=({children:t})=>{const{io:e}=g.useContext(Ud),{user:n}=g.useContext(Et),[r,i]=g.useState(""),[s,o]=g.useState(null),[a,c]=g.useState(null),[l,u]=g.useState(null),[d,f]=g.useState(null),[h,p]=g.useState(!1),y=g.useRef(null),k=g.useRef(null),v=g.useRef(null);g.useEffect(()=>{if(!(n!=null&&n.id))return;console.log("Initializing Peer instance with user ID...");const T=new eT(n.id);return T.on("open",x=>{console.log("Peer connection established with ID:",x),i(x)}),T.on("call",x=>{var P,M,I,A,q,V,ne;o(x),console.log("Incoming call received:",x),console.log(typeof x,"c type");const w=JSON.parse(w6.stringify(x)),E=(w==null?void 0:w.metadata)||((M=(P=w==null?void 0:w.options)==null?void 0:P._payload)==null?void 0:M.metadata)||((I=w==null?void 0:w.options)==null?void 0:I.metadata);E?(console.log(E),c((q=(A=w==null?void 0:w.options)==null?void 0:A._payload)==null?void 0:q.metadata),console.log((ne=(V=w==null?void 0:w.options)==null?void 0:V._payload)==null?void 0:ne.metadata,"parsedCall?.options?._payload?.metadata;")):console.log("Metadata not found")}),T.on("error",x=>{console.error("Peer error:>>>",x)}),v.current=T,()=>{v.current&&v.current.destroy()}},[n==null?void 0:n.id]);const b=()=>{s?(console.log("Answering call..."),navigator.mediaDevices.getUserMedia({video:(a==null?void 0:a.callType)!=="audio",audio:!0}).then(T=>{console.log("User media obtained:",T),u(T),k.current&&(k.current.srcObject=T,k.current.play()),s.answer(T),s.on("stream",x=>{console.log("Remote stream received:",x),f(x),y.current&&(y.current.srcObject=x,y.current.play())}),o(null)}).catch(T=>{console.error("Error accessing media devices:",T)})):console.log("No incoming call to answer.")},S=()=>{s?(console.log("Rejecting call..."),s.close(),o(null)):console.log("No incoming call to reject.")},C=(T,x)=>{console.log("Placing call to remote peer ID:",T),navigator.mediaDevices.getUserMedia({video:x!=="audio",audio:!0}).then(w=>{var P;console.log("User media obtained for outgoing call:",w),u(w),k.current&&(k.current.srcObject=w,k.current.play()),c({email:n.email,callType:x});const E=(P=v.current)==null?void 0:P.call(T,w,{metadata:{email:n.email,callType:x}});E?(console.log("Call initiated successfully:",E),E.on("stream",M=>{console.log("Remote stream received during outgoing call:",M),f(M),y.current&&(y.current.srcObject=M,y.current.play())})):console.log("Failed to initiate call.")}).catch(w=>{console.error("Error accessing media devices:",w)})};return m.jsx(Ac.Provider,{value:{ws:e,callFunc:C,rejectCall:S,answerCall:b,currentUserVideoRef:k,peerId:r,user:n,remoteVideoRef:y,incomingCall:s,localStream:l,remoteStream:d,setLocalStream:u,setRemoteStream:f,isStartCall:h,setIsStartCall:p,incomingCallData:a},children:t})},Jg=g.createContext(null),BO=({children:t})=>{const{io:e}=g.useContext(Ud),[n,r]=g.useState(null),[i,s]=g.useState(null),[o,a]=g.useState(null);g.useEffect(()=>{const d={iceServers:[{urls:["stun:global.stun.twilio.com:3478"]},{username:"dc2d2894d5a9023620c467b0e71cfa6a35457e6679785ed6ae9856fe5bdfa269",credential:"tE2DajzSJwnsSbc123",urls:"turn:global.turn.twilio.com:3478?transport=udp"},{urls:"stun:stun.l.google.com:19302"}]},f=new RTCPeerConnection(d);s(f),e.on("answer",h=>{console.log(h,"from caller"),i&&(console.log("peerConnection ache",i),i.setRemoteDescription(new RTCSessionDescription(h)))}),e.on("end-call",h=>{console.log(h,"data"),i&&(i.close(),s(null),n&&n.getTracks().forEach(p=>p.stop())),r(null)})},[e]),g.useEffect(()=>{n&&i&&n.getTracks().forEach(d=>{console.log(d,"trackData"),i.addTrack(d,n)})},[n,i]);const c=async(d,f,h)=>{try{if(i){const p=await i.createOffer();await i.setLocalDescription(p),e.emit("offer",{offer:p,targetId:f,senderId:d,receiverId:f,senderName:h})}}catch(p){console.error("Error accessing media devices.",p)}},l=async()=>{if(!i){console.error("Peer connection is not initialized");return}if(!o||!o.offer){console.error("Incoming call offer is not available");return}try{const d=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});r(d);const{offer:f}=o;console.log(f,"offer when answer"),await i.setRemoteDescription(new RTCSessionDescription(f));const h=await i.createAnswer();await i.setLocalDescription(h),e.emit("answer",{answer:h,targetId:o.senderId})}catch(d){console.error("Error answering the call:",d)}},u=d=>{i&&(i.close(),s(null),n&&n.getTracks().forEach(f=>f.stop())),r(null),console.log("null"),e.emit("end-call",d)};return m.jsx(Jg.Provider,{value:{startAudioCallNow:c,localStream:n,incomingCall:o,answerCall:l,endCall:u,setIncomingAudioCall:a,setLocalStream:r},children:t})},Fd=(t,e)=>{const[n]=p6(),r=g.useRef(null);g.useEffect(()=>(r.current=setInterval(()=>{n({id:t,points:e}),console.log(10,"Points deducted successfully>>",t)},6e4),()=>{r.current&&(clearInterval(r.current),r.current=null)}),[t,n,e])};function Yg(){const{remoteVideoRef:t,localStream:e,setLocalStream:n,setIsStartCall:r,incomingCallData:i,user:s}=g.useContext(Ac);Fd(s==null?void 0:s.id,(i==null?void 0:i.callType)==="audio"?3:5);const o=()=>{e&&e.getTracks().forEach(y=>y.stop()),n(null),r(!1)},a=g.useRef(null);g.useEffect(()=>{a.current&&e&&(a.current.srcObject=e)},[e]);//!  video /audio
const[c,l]=g.useState(!0),[u,d]=g.useState(!0),f=()=>{e&&e.getAudioTracks().forEach(y=>y.enabled=!y.enabled),l(!c)},h=()=>{e&&e.getVideoTracks().forEach(y=>y.enabled=!y.enabled),d(!u)},p=()=>{o(),a.current&&(a.current.srcObject=null)};return m.jsx("div",{className:"fixed z-[100] inset-0 bg-gray-800  bg-opacity-[0.4] flex items-center justify-center ",children:m.jsx("div",{className:"bg-white rounded shadow-lg ",children:m.jsx("div",{className:"",children:m.jsx("div",{className:" bg-blur h-[80vh min-w- relative",children:m.jsxs("div",{className:"relative border border-primary p-1",children:[m.jsxs("div",{className:"max-w-3x w-full mx-auto ",children:[m.jsx("div",{className:"relative w-full",children:m.jsx("video",{className:"w-full h-auto max-h-96 md:max-h-[47rem] z-20 bg-[#3B334F] max-w-[100vw] mx-auto",ref:a,autoPlay:!0,muted:!0,style:{width:"100% !important",minWidth:"100% !important"}})}),a&&m.jsxs("div",{className:"w-full max-w-[100vw] mx-auto bg-slate-700 flex items-center justify-center gap-5 py-4",children:[m.jsx("button",{onClick:f,className:"p-2 bg-gray-200 rounded-full hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:c?m.jsx(yC,{size:24}):m.jsx(vC,{size:24})}),(i==null?void 0:i.callType)!=="audio"&&m.jsx("button",{onClick:h,className:"p-2 bg-gray-200 rounded-full hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:u?m.jsx(_g,{size:24}):m.jsx(bC,{size:24})}),m.jsx("button",{onClick:p,className:"p-2 bg-red-600 rounded-full text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400",children:m.jsx(Pg,{size:24})})]})]}),m.jsx("video",{ref:t,poster:"https://cdn-icons-png.freepik.com/512/9368/9368199.png",className:"h-[40%] w-[40%] mx-auto border border-spacing-2 rounded absolute bottom-[4rem] right-2"})]})})})})})}function zO(){const{ws:t,user:e,incomingCall:n,rejectCall:r,answerCall:i,isStartCall:s,setIsStartCall:o}=g.useContext(Ac),{setIncomingAudioCall:a}=g.useContext(Jg),[c,l]=g.useState(null);console.log(e==null?void 0:e.id),g.useEffect(()=>{t.on("room-created",d=>{console.log(d,"room-created"),window.location.href=`/video/${d.roomId}`}),t.on("room-created-b",d=>{console.log(d,"room-created-b"),setTimeout(()=>{(e==null?void 0:e.id)===(d==null?void 0:d.receiverId)&&l({type:"video",senderName:d==null?void 0:d.senderName,roomId:d==null?void 0:d.roomId,senderId:d==null?void 0:d.receiverId})},1e3)}),t.on("incoming-call",d=>{a(d),l({type:"audio",senderName:d==null?void 0:d.senderName,roomId:d==null?void 0:d.receiverId,senderId:d==null?void 0:d.from})})},[t,e]),console.log(c,"incomingCalling");const u=()=>{o(!0),i()};return m.jsxs(_e.Fragment,{children:[n&&m.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white p-4 rounded shadow-lg flex flex-col items-center",children:[m.jsx("p",{className:"mb-4",children:"Incoming a call..."}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:u,className:"bg-green-500 text-white p-2 rounded cursor-pointer hover:bg-green-700",children:"Answer"}),m.jsx("button",{onClick:r,className:"bg-red-500 text-white p-2 rounded cursor-pointer hover:bg-red-700",children:"Reject"})]})]})}),s&&m.jsx(Yg,{})]})}function $O(){const{user:t}=g.useContext(Et);return m.jsxs(_e.Fragment,{children:[m.jsx(m6,{}),m.jsxs("div",{className:"min-h-screen bg-secondary",children:[(t==null?void 0:t.id)&&m.jsx(YC,{user:t}),(t==null?void 0:t.id)&&m.jsx(zO,{}),m.jsx(hC,{})]}),m.jsx(IR,{})]})}const VO=(t,e)=>{const[n,r]=g.useState(null),[i,s]=g.useState(!1),[o,a]=g.useState(null),c=async l=>{s(!0),a(null);try{const u=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",...e==null?void 0:e.headers},body:JSON.stringify(l)});if(console.log(u,"response-----"),!u.ok)throw new Error(`Error: ${u.statusText}`);const d=await u.json();return console.log(d,"resultData"),r(d),d}catch(u){if(a(u.message),console.log(u.message,"err"),u.status===403)try{return await qO(),c(l)}catch(d){console.error("Failed to refresh token",d)}return null}finally{s(!1)}};return{data:n,loading:i,error:o,postData:c}};async function qO(){const t=await fetch("/api/refresh-token",{method:"POST",credentials:"include"});if(!t.ok)throw new Error("Failed to refresh token");const e=await t.json();localStorage.setItem("token",e.token)}let HO={data:""},WO=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||HO,KO=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,QO=/\/\*[^]*?\*\/|  +/g,b1=/\n+/g,Wr=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Wr(o,s):s+"{"+Wr(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Wr(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Wr.p?Wr.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},ur={},tT=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+tT(t[n]);return e}return t},GO=(t,e,n,r,i)=>{let s=tT(t),o=ur[s]||(ur[s]=(c=>{let l=0,u=11;for(;l<c.length;)u=101*u+c.charCodeAt(l++)>>>0;return"go"+u})(s));if(!ur[o]){let c=s!==t?t:(l=>{let u,d,f=[{}];for(;u=KO.exec(l.replace(QO,""));)u[4]?f.shift():u[3]?(d=u[3].replace(b1," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(b1," ").trim();return f[0]})(t);ur[o]=Wr(i?{["@keyframes "+o]:c}:c,n?"":"."+o)}let a=n&&ur.g?ur.g:null;return n&&(ur.g=ur[o]),((c,l,u,d)=>{d?l.data=l.data.replace(d,c):l.data.indexOf(c)===-1&&(l.data=u?c+l.data:l.data+c)})(ur[o],e,r,a),o},JO=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=c?"."+c:a&&typeof a=="object"?a.props?"":Wr(a,""):a===!1?"":a}return r+i+(o??"")},"");function Bd(t){let e=this||{},n=t.call?t(e.p):t;return GO(n.unshift?n.raw?JO(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,WO(e.target),e.g,e.o,e.k)}let nT,jp,Up;Bd.bind({g:1});let _r=Bd.bind({k:1});function YO(t,e,n,r){Wr.p=e,nT=t,jp=n,Up=r}function Si(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),c=a.className||i.className;n.p=Object.assign({theme:jp&&jp()},a),n.o=/ *go\d+/.test(c),a.className=Bd.apply(n,r)+(c?" "+c:"");let l=t;return t[0]&&(l=a.as||t,delete a.as),Up&&l[0]&&Up(a),nT(l,a)}return i}}var XO=t=>typeof t=="function",Gu=(t,e)=>XO(t)?t(e):t,ZO=(()=>{let t=0;return()=>(++t).toString()})(),rT=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),eM=20,Gl=new Map,tM=1e3,S1=t=>{if(Gl.has(t))return;let e=setTimeout(()=>{Gl.delete(t),is({type:4,toastId:t})},tM);Gl.set(t,e)},nM=t=>{let e=Gl.get(t);e&&clearTimeout(e)},Fp=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,eM)};case 1:return e.toast.id&&nM(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?Fp(t,{type:1,toast:n}):Fp(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?S1(r):t.toasts.forEach(s=>{S1(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Jl=[],Yl={toasts:[],pausedAt:void 0},is=t=>{Yl=Fp(Yl,t),Jl.forEach(e=>{e(Yl)})},rM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iM=(t={})=>{let[e,n]=g.useState(Yl);g.useEffect(()=>(Jl.push(n),()=>{let i=Jl.indexOf(n);i>-1&&Jl.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...t,...t[i.type],...i,duration:i.duration||((s=t[i.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||rM[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},sM=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ZO()}),Lc=t=>(e,n)=>{let r=sM(e,t,n);return is({type:2,toast:r}),r.id},Xt=(t,e)=>Lc("blank")(t,e);Xt.error=Lc("error");Xt.success=Lc("success");Xt.loading=Lc("loading");Xt.custom=Lc("custom");Xt.dismiss=t=>{is({type:3,toastId:t})};Xt.remove=t=>is({type:4,toastId:t});Xt.promise=(t,e,n)=>{let r=Xt.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(Xt.success(Gu(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Xt.error(Gu(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var oM=(t,e)=>{is({type:1,toast:{id:t,height:e}})},aM=()=>{is({type:5,time:Date.now()})},cM=t=>{let{toasts:e,pausedAt:n}=iM(t);g.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let c=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(c<0){a.visible&&Xt.dismiss(a.id);return}return setTimeout(()=>Xt.dismiss(a.id),c)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=g.useCallback(()=>{n&&is({type:6,time:Date.now()})},[n]),i=g.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:c=8,defaultPosition:l}=o||{},u=e.filter(h=>(h.position||l)===(s.position||l)&&h.height),d=u.findIndex(h=>h.id===s.id),f=u.filter((h,p)=>p<d&&h.visible).length;return u.filter(h=>h.visible).slice(...a?[f+1]:[0,f]).reduce((h,p)=>h+(p.height||0)+c,0)},[e]);return{toasts:e,handlers:{updateHeight:oM,startPause:aM,endPause:r,calculateOffset:i}}},lM=_r`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,uM=_r`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dM=_r`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fM=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${uM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hM=_r`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pM=Si("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${hM} 1s linear infinite;
`,mM=_r`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gM=_r`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vM=Si("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yM=Si("div")`
  position: absolute;
`,bM=Si("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,SM=_r`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kM=Si("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${SM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,CM=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?g.createElement(kM,null,e):e:n==="blank"?null:g.createElement(bM,null,g.createElement(pM,{...r}),n!=="loading"&&g.createElement(yM,null,n==="error"?g.createElement(fM,{...r}):g.createElement(vM,{...r})))},xM=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TM=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wM="0%{opacity:0;} 100%{opacity:1;}",EM="0%{opacity:1;} 100%{opacity:0;}",_M=Si("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PM=Si("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RM=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=rT()?[wM,EM]:[xM(n),TM(n)];return{animation:e?`${_r(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_r(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},OM=g.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?RM(t.position||e||"top-center",t.visible):{opacity:0},s=g.createElement(CM,{toast:t}),o=g.createElement(PM,{...t.ariaProps},Gu(t.message,t));return g.createElement(_M,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):g.createElement(g.Fragment,null,s,o))});YO(g.createElement);var MM=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=g.useCallback(o=>{if(o){let a=()=>{let c=o.getBoundingClientRect().height;r(t,c)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return g.createElement("div",{ref:s,className:e,style:n},i)},IM=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rT()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},NM=Bd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bl=16,DM=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:c}=cM(n);return g.createElement("div",{style:{position:"fixed",zIndex:9999,top:bl,left:bl,right:bl,bottom:bl,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},a.map(l=>{let u=l.position||e,d=c.calculateOffset(l,{reverseOrder:t,gutter:r,defaultPosition:e}),f=IM(u,d);return g.createElement(MM,{id:l.id,key:l.id,onHeightUpdate:c.updateHeight,className:l.visible?NM:"",style:f},l.type==="custom"?Gu(l.message,l):i?i(l):g.createElement(OM,{toast:l,position:u}))}))},Ra=Xt;function iT(){return m.jsxs(_e.Fragment,{children:[m.jsx("div",{className:"w-full h-full flex justify-center items-center mx-auto my-2"}),m.jsx("div",{className:"w-16 h-16 mx-auto rounded-full border-4 border-t-4 border-t-[#504e4e] animate-spin"})]})}function AM(){const t=bi(),{refreshUser:e}=g.useContext(Et),{data:n,loading:r,postData:i,error:s}=VO(`${es}/auth/login`),o=async a=>{var h,p;a.preventDefault();const c=a.currentTarget,l=c.elements.namedItem("email").value,u=c.elements.namedItem("password").value;console.log({email:l,password:u});const f=await i({email:l,password:u});console.log(n),console.log(f),(h=f==null?void 0:f.data)!=null&&h.accessToken?(Ra("Login Successfully"),pC(Md,(p=f==null?void 0:f.data)==null?void 0:p.accessToken),await e(),c.reset(),t("/users")):(f==null?void 0:f.success)===!1?Ra(f==null?void 0:f.message):s&&Ra("Email or password incorrect")};return m.jsx(_e.Fragment,{children:m.jsxs("div",{className:"min-h-screen bg-login-bg bg-cover bg-center flex items-center justify-center relative ",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-5 backdrop-blur-sm"}),m.jsxs("section",{className:"z-40 flex flex-col gap-5",children:[m.jsx(rc,{}),m.jsxs("form",{onSubmit:o,className:"max-w-lg md:mx-auto w-full bg-[#172B4DB2] px-3 lg:px-[5rem] rounded-md py-2 lg:py-[5rem]   border border-[#7A00B8B2]",children:[m.jsx("h3",{className:"text-white text-3xl font-extrabold mb-8 text-center",children:"Sign in to explore"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"text-white font-semibold my-3 text-lg",children:"Your Email"}),m.jsx("input",{name:"email",type:"email",autoComplete:"email",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Email address"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"text-white font-semibold my-3 text-lg",children:"Type Password"}),m.jsx("input",{name:"password",type:"password",autoComplete:"current-password",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Password"})]}),m.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"remember-me",className:"ml-3 block text-sm text-gray-100",children:"Remember me"})]})})]}),m.jsx("div",{className:"!mt-8",children:r?m.jsx(iT,{}):m.jsx("button",{type:"submit",className:"w-full shadow-xl py-2.5 px-4 text-sm font-semibold rounded text-white bg-primary hover:bg-primary/85 focus:outline-none",children:"Sign in"})}),m.jsxs("div",{className:"text-white text-center flex  mt-5 items-center justify-center gap-3",children:["   ",m.jsx("h2",{children:"Don't have an account?"}),m.jsx(Le,{to:"/sign-up",children:"Sign up now"})]}),m.jsxs("div",{className:"space-x-6 flex justify-center mt-8",children:[m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 512 512",children:[m.jsx("path",{fill:"#fbbd00",d:"M120 256c0-25.367 6.989-49.13 19.131-69.477v-86.308H52.823C18.568 144.703 0 198.922 0 256s18.568 111.297 52.823 155.785h86.308v-86.308C126.989 305.13 120 281.367 120 256z","data-original":"#fbbd00"}),m.jsx("path",{fill:"#0f9d58",d:"m256 392-60 60 60 60c57.079 0 111.297-18.568 155.785-52.823v-86.216h-86.216C305.044 385.147 281.181 392 256 392z","data-original":"#0f9d58"}),m.jsx("path",{fill:"#31aa52",d:"m139.131 325.477-86.308 86.308a260.085 260.085 0 0 0 22.158 25.235C123.333 485.371 187.62 512 256 512V392c-49.624 0-93.117-26.72-116.869-66.523z","data-original":"#31aa52"}),m.jsx("path",{fill:"#3c79e6",d:"M512 256a258.24 258.24 0 0 0-4.192-46.377l-2.251-12.299H256v120h121.452a135.385 135.385 0 0 1-51.884 55.638l86.216 86.216a260.085 260.085 0 0 0 25.235-22.158C485.371 388.667 512 324.38 512 256z","data-original":"#3c79e6"}),m.jsx("path",{fill:"#cf2d48",d:"m352.167 159.833 10.606 10.606 84.853-84.852-10.606-10.606C388.668 26.629 324.381 0 256 0l-60 60 60 60c36.326 0 70.479 14.146 96.167 39.833z","data-original":"#cf2d48"}),m.jsx("path",{fill:"#eb4132",d:"M256 120V0C187.62 0 123.333 26.629 74.98 74.98a259.849 259.849 0 0 0-22.158 25.235l86.308 86.308C162.883 146.72 206.376 120 256 120z","data-original":"#eb4132"})]})}),m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 512 512",children:[m.jsx("path",{fill:"#1877f2",d:"M512 256c0 127.78-93.62 233.69-216 252.89V330h59.65L367 256h-71v-48.02c0-20.25 9.92-39.98 41.72-39.98H370v-63s-29.3-5-57.31-5c-58.47 0-96.69 35.44-96.69 99.6V256h-65v74h65v178.89C93.62 489.69 0 383.78 0 256 0 114.62 114.62 0 256 0s256 114.62 256 256z","data-original":"#1877f2"}),m.jsx("path",{fill:"#fff",d:"M355.65 330 367 256h-71v-48.021c0-20.245 9.918-39.979 41.719-39.979H370v-63s-29.296-5-57.305-5C254.219 100 216 135.44 216 199.6V256h-65v74h65v178.889c13.034 2.045 26.392 3.111 40 3.111s26.966-1.066 40-3.111V330z","data-original":"#ffffff"})]})}),m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 22.773 22.773",children:m.jsx("path",{d:"M15.769 0h.162c.13 1.606-.483 2.806-1.228 3.675-.731.863-1.732 1.7-3.351 1.573-.108-1.583.506-2.694 1.25-3.561C13.292.879 14.557.16 15.769 0zm4.901 16.716v.045c-.455 1.378-1.104 2.559-1.896 3.655-.723.995-1.609 2.334-3.191 2.334-1.367 0-2.275-.879-3.676-.903-1.482-.024-2.297.735-3.652.926h-.462c-.995-.144-1.798-.932-2.383-1.642-1.725-2.098-3.058-4.808-3.306-8.276v-1.019c.105-2.482 1.311-4.5 2.914-5.478.846-.52 2.009-.963 3.304-.765.555.086 1.122.276 1.619.464.471.181 1.06.502 1.618.485.378-.011.754-.208 1.135-.347 1.116-.403 2.21-.865 3.652-.648 1.733.262 2.963 1.032 3.723 2.22-1.466.933-2.625 2.339-2.427 4.74.176 2.181 1.444 3.457 3.028 4.209z","data-original":"#000000"})})})]})]})]})]})})}function LM(){const{refreshUser:t}=g.useContext(Et),e=bi(),[n,r]=g.useState(!1),i=async o=>{o.preventDefault();const a=new FormData(o.currentTarget);console.log(a);const c=o.currentTarget;r(!0);const l=await s(`${es}/auth/sign-up`,a);r(!1),l!=null&&l.data.accessToken?(Ra("SIgn Up  success"),pC(Md,l==null?void 0:l.data.accessToken),c.reset(),await t(),e("/users")):Ra("Failed to sign up")};async function s(o,a,c={}){try{const l=await fetch(o,{method:"POST",...c,body:a});if(!l.ok)throw new Error(`API request failed with status ${l.status}`);return await l.json()}catch(l){throw console.error("Error in postSSDataWithFile:",l),l}}return m.jsx(_e.Fragment,{children:m.jsxs("div",{className:"min-h-screen bg-login-bg bg-cover bg-center flex items-center justify-center relative ",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-5 backdrop-blur-sm"}),m.jsxs("section",{className:"z-40 flex flex-col gap-5",children:[m.jsx(rc,{}),m.jsxs("form",{onSubmit:i,className:"max-w-4xl md:mx-auto w-full bg-[#172B4DB2] px-3 lg:px-[7rem] rounded-md py-2 lg:py-[5rem]  z-40 border border-[#7A00B8B2]",children:[m.jsx("h3",{className:"text-white text-3xl font-extrabold mb-8 text-center",children:"Create new account"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"text-white font-semibold my-3 text-lg",children:"Your Name"}),m.jsx("input",{name:"name",type:"text",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Your Name"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"text-white font-semibold my-3 text-lg",children:"Your Email"}),m.jsx("input",{name:"email",type:"email",autoComplete:"email",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Email address"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"text-white font-semibold my-3 text-lg",children:"Type Password"}),m.jsx("input",{name:"password",type:"password",autoComplete:"current-password",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Password"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"image",className:"text-white font-semibold my-3 text-lg",children:"Select your Profile"}),m.jsx("input",{name:"image",type:"file",required:!0,className:"bg-[#52545BCC] w-full text-sm text-white px-4 py-3.5 rounded-md outline-blue-600 focus:bg-transparent mt-3",placeholder:"Password"})]}),m.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"remember-me",className:"ml-3 block text-sm text-gray-100",children:"Remember me"})]})})]}),m.jsx("div",{className:"!mt-8",children:n?m.jsx(iT,{}):m.jsx("button",{type:"submit",className:"w-full shadow-xl py-2.5 px-4 text-sm font-semibold rounded text-white bg-primary hover:bg-primary/85 focus:outline-none",children:"Sign Up"})}),m.jsxs("div",{className:"text-white text-center flex  mt-5 items-center justify-center gap-3",children:["   ",m.jsx("h2",{children:"Already have an account?"}),m.jsx(Le,{to:"/login",children:"Login now"})]}),m.jsxs("div",{className:"space-x-6 flex justify-center mt-8",children:[m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 512 512",children:[m.jsx("path",{fill:"#fbbd00",d:"M120 256c0-25.367 6.989-49.13 19.131-69.477v-86.308H52.823C18.568 144.703 0 198.922 0 256s18.568 111.297 52.823 155.785h86.308v-86.308C126.989 305.13 120 281.367 120 256z","data-original":"#fbbd00"}),m.jsx("path",{fill:"#0f9d58",d:"m256 392-60 60 60 60c57.079 0 111.297-18.568 155.785-52.823v-86.216h-86.216C305.044 385.147 281.181 392 256 392z","data-original":"#0f9d58"}),m.jsx("path",{fill:"#31aa52",d:"m139.131 325.477-86.308 86.308a260.085 260.085 0 0 0 22.158 25.235C123.333 485.371 187.62 512 256 512V392c-49.624 0-93.117-26.72-116.869-66.523z","data-original":"#31aa52"}),m.jsx("path",{fill:"#3c79e6",d:"M512 256a258.24 258.24 0 0 0-4.192-46.377l-2.251-12.299H256v120h121.452a135.385 135.385 0 0 1-51.884 55.638l86.216 86.216a260.085 260.085 0 0 0 25.235-22.158C485.371 388.667 512 324.38 512 256z","data-original":"#3c79e6"}),m.jsx("path",{fill:"#cf2d48",d:"m352.167 159.833 10.606 10.606 84.853-84.852-10.606-10.606C388.668 26.629 324.381 0 256 0l-60 60 60 60c36.326 0 70.479 14.146 96.167 39.833z","data-original":"#cf2d48"}),m.jsx("path",{fill:"#eb4132",d:"M256 120V0C187.62 0 123.333 26.629 74.98 74.98a259.849 259.849 0 0 0-22.158 25.235l86.308 86.308C162.883 146.72 206.376 120 256 120z","data-original":"#eb4132"})]})}),m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 512 512",children:[m.jsx("path",{fill:"#1877f2",d:"M512 256c0 127.78-93.62 233.69-216 252.89V330h59.65L367 256h-71v-48.02c0-20.25 9.92-39.98 41.72-39.98H370v-63s-29.3-5-57.31-5c-58.47 0-96.69 35.44-96.69 99.6V256h-65v74h65v178.89C93.62 489.69 0 383.78 0 256 0 114.62 114.62 0 256 0s256 114.62 256 256z","data-original":"#1877f2"}),m.jsx("path",{fill:"#fff",d:"M355.65 330 367 256h-71v-48.021c0-20.245 9.918-39.979 41.719-39.979H370v-63s-29.296-5-57.305-5C254.219 100 216 135.44 216 199.6V256h-65v74h65v178.889c13.034 2.045 26.392 3.111 40 3.111s26.966-1.066 40-3.111V330z","data-original":"#ffffff"})]})}),m.jsx("button",{type:"button",className:"border-none outline-none",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",viewBox:"0 0 22.773 22.773",children:m.jsx("path",{d:"M15.769 0h.162c.13 1.606-.483 2.806-1.228 3.675-.731.863-1.732 1.7-3.351 1.573-.108-1.583.506-2.694 1.25-3.561C13.292.879 14.557.16 15.769 0zm4.901 16.716v.045c-.455 1.378-1.104 2.559-1.896 3.655-.723.995-1.609 2.334-3.191 2.334-1.367 0-2.275-.879-3.676-.903-1.482-.024-2.297.735-3.652.926h-.462c-.995-.144-1.798-.932-2.383-1.642-1.725-2.098-3.058-4.808-3.306-8.276v-1.019c.105-2.482 1.311-4.5 2.914-5.478.846-.52 2.009-.963 3.304-.765.555.086 1.122.276 1.619.464.471.181 1.06.502 1.618.485.378-.011.754-.208 1.135-.347 1.116-.403 2.21-.865 3.652-.648 1.733.262 2.963 1.032 3.723 2.22-1.466.933-2.625 2.339-2.427 4.74.176 2.181 1.444 3.457 3.028 4.209z","data-original":"#000000"})})})]})]})]})]})})}function jM(){return m.jsx(_e.Fragment,{children:m.jsx("div",{className:"bg-",children:m.jsx("section",{className:" bg-opacity-30 py-10 sm:py-16 lg:py-24",children:m.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:m.jsxs("div",{className:"grid items-center grid-cols-1 gap-12 lg:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-base font-semibold tracking-wider text-white uppercase",children:"Study Live Streaming"}),m.jsx("h1",{className:"mt-4 text-4xl font-bold text-white lg:mt-8 sm:text-6xl xl:text-8xl",children:"Video calls with anyone, anywhere"}),m.jsx("p",{className:"mt-4 text-base text-white lg:mt-8 sm:text-xl",children:"Stay connected and collaborate with friends, family, and colleagues no matter where you are."}),m.jsxs(Le,{to:"/users",title:"",className:"inline-flex items-center px-6 py-4 mt-8 font-semibold text-white transition-all duration-200 bg-primary rounded-full lg:mt-16 hover:bg-primary focus:bg-primary",role:"button",children:["Join Now",m.jsx("svg",{className:"w-6 h-6 ml-8 -mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),m.jsxs("p",{className:"mt-5 text-gray-200",children:["Already created account?",m.jsx(Le,{to:"/login",title:"",className:"text-slate-300 transition-all duration-200 hover:underline ms-2",children:"Log in"})]})]}),m.jsx("div",{children:m.jsx("img",{className:"w-full",src:"https://cdn.rareblocks.xyz/collection/celebration/images/hero/1/hero-img.png",alt:""})})]})})})})})}function UM(){return m.jsx(_e.Fragment,{children:m.jsx("div",{className:"bg-gray-50 p-8 min-h-[350px] flex items-center justify-center font-[sans-serif] text-[#333]",children:m.jsxs("div",{className:"bg-white shadow-[0_4px_24px_-8px_rgba(0,0,0,0.2)] grid lg:grid-cols-4 sm:grid-cols-2 sm:gap-24 gap-12 rounded-3xl px-20 py-10",children:[m.jsxs("div",{className:"text-center",children:[m.jsxs("h3",{className:"text-4xl font-extrabold",children:["5.4",m.jsx("span",{className:"text-primary",children:"M+"})]}),m.jsx("p",{className:"text-gray-500 font-semibold mt-3",children:"Total Users"})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("h3",{className:"text-4xl font-extrabold",children:["$80",m.jsx("span",{className:"text-primary",children:"K"})]}),m.jsx("p",{className:"text-gray-500 font-semibold mt-3",children:"Revenue"})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("h3",{className:"text-4xl font-extrabold",children:["100",m.jsx("span",{className:"text-primary",children:"K"})]}),m.jsx("p",{className:"text-gray-500 font-semibold mt-3",children:"Engagement"})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("h3",{className:"text-4xl font-extrabold",children:["99.9",m.jsx("span",{className:"text-primary",children:"%"})]}),m.jsx("p",{className:"text-gray-500 font-semibold mt-3",children:"Server Uptime"})]})]})})})}function FM(){return m.jsx(_e.Fragment,{children:m.jsx("section",{className:"py-12 bg-gray-50 sm:py-16 lg:py-20",children:m.jsx("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:items-center gap-y-8 md:grid-cols-2 md:gap-x-16",children:[m.jsx("div",{children:m.jsx("img",{className:"w-full max-w-lg mx-auto",src:"https://cdn.rareblocks.xyz/collection/clarity/images/features/3/illustration.png",alt:""})}),m.jsxs("div",{className:"lg:pr-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl xl:text-5xl font-pj",children:"Meet your customers, with live video chat"}),m.jsx("p",{className:"mt-5 text-lg font-medium text-gray-900 sm:mt-8 font-pj",children:"Proin faucibus nibh et sagittis a. Lacinia purus ac amet pellentesque aliquam enim."}),m.jsx("p",{className:"mt-4 text-lg text-gray-700 sm:mt-5 font-pj",children:"Lorem ipsum dolor sit amet, consectetur adipis elit. Sit enim nec, proin faucibus nibh et sagittis a. Lacinia purus ac amet pellentesque aliquam enim."})]})]})})})})}function BM(){return m.jsxs(_e.Fragment,{children:[m.jsx(jM,{}),m.jsx(UM,{}),m.jsx(FM,{})]})}function zM(){return m.jsx(_e.Fragment,{children:m.jsx("section",{className:"py-12 bg- sm:py-16 lg:py-20 xl:py-24",children:m.jsxs("div",{className:"px-4 mx-auto sm:px-6 lg:px-8 max-w-7xl",children:[m.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[m.jsx("h2",{className:"text-3xl font-semibold tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Plans that scale with business"}),m.jsx("p",{className:"mt-4 text-base font-normal leading-7 text-gray-200 lg:text-lg lg:mt-6 lg:leading-8",children:"Clarity gives you the blocks & components you need to create a truly professional website, landing page or admin panel for your SaaS."})]}),m.jsxs("div",{className:"flex items-center justify-center mt-8 space-x-6 sm:mt-12",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"radio",id:"monthly",name:"pricing-plans",className:"w-4 h-4 text-primary border border-gray-200 focus:ring-1 focus:outline-none focus:ring-blue-600",defaultChecked:!0}),m.jsxs("label",{htmlFor:"monthly",className:"block ml-3 text-sm font-medium text-white sm:text-base",children:[" ","Monthly Plan"," "]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"radio",id:"yearly",name:"pricing-plans",className:"w-4 h-4 text-primary border border-gray-200 focus:ring-1 focus:outline-none focus:ring-blue-600"}),m.jsxs("label",{htmlFor:"yearly",className:"block ml-3 text-sm font-medium text-white sm:text-base",children:[" ","Yearly Plan"," "]}),m.jsxs("span",{className:"ml-1 text-sm font-medium text-primary",children:[" ","(Save 20%)"," "]})]})]}),m.jsxs("div",{className:"grid max-w-5xl grid-cols-1 mx-auto mt-12 lg:grid-cols-3 lg:gap-8 sm:mt-16 lg:mt-20",children:[m.jsxs("div",{className:"bg-white border border-gray-200 divide-y divide-gray-200 rounded-2xl sm:rounded-3xl",children:[m.jsx("div",{className:"px-4 py-5 bg-gray-50 sm:p-6 rounded-t-2xl sm:rounded-t-3xl",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"text-3xl shrink-0",children:"  "}),m.jsxs("div",{className:"ml-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Basic"}),m.jsx("p",{className:"mt-2 text-sm font-normal text-gray-500",children:"Lorem ipsum dolor sit amet, consec tetur adipis elit"})]})]})}),m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsxs("div",{className:"flex items-end",children:[m.jsx("p",{className:"text-5xl font-semibold text-white",children:"$0"}),m.jsx("p",{className:"py-1 text-sm font-normal text-gray-500",children:"/mo/user"})]}),m.jsx("div",{className:"mt-6",children:m.jsx("a",{href:"#",title:"",className:"inline-flex items-center justify-center w-full px-6 py-3 text-base font-medium text-white transition-all duration-200 bg-gray-400 border border-transparent rounded-xl hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",role:"button",children:"Get 14 days free trial"})}),m.jsx("p",{className:"mt-8 text-xs font-semibold tracking-widest text-gray-500 uppercase",children:"Best for free"}),m.jsxs("ul",{className:"mt-8 space-y-4",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Full Access to Landingfolio"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"100 GB Free Storage"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Unlimited Visitors"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"10 Agents"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Live Chat Support"]})]})]})]}),m.jsxs("div",{className:"relative bg-white border border-gray-200 divide-y divide-gray-200 rounded-2xl sm:rounded-3xl mt-14 lg:mt-0",children:[m.jsxs("div",{className:"absolute top-0 right-0 flex items-start -mt-8",children:[m.jsx("svg",{className:"w-auto h-16 text-primary",viewBox:"0 0 83 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M4.27758 62.7565C4.52847 63.5461 5.37189 63.9827 6.16141 63.7318L19.0274 59.6434C19.817 59.3925 20.2536 58.5491 20.0027 57.7595C19.7518 56.97 18.9084 56.5334 18.1189 56.7842L6.68242 60.4184L3.04824 48.982C2.79735 48.1924 1.95394 47.7558 1.16441 48.0067C0.374889 48.2576 -0.0617613 49.101 0.189127 49.8905L4.27758 62.7565ZM13.4871 47.8215L12.229 47.0047L13.4871 47.8215ZM39.0978 20.5925L38.1792 19.4067L39.0978 20.5925ZM7.03921 62.9919C8.03518 61.0681 13.1417 51.1083 14.7453 48.6383L12.229 47.0047C10.5197 49.6376 5.30689 59.8127 4.37507 61.6126L7.03921 62.9919ZM14.7453 48.6383C22.0755 37.3475 29.8244 29.6738 40.0164 21.7784L38.1792 19.4067C27.7862 27.4579 19.7827 35.3698 12.229 47.0047L14.7453 48.6383ZM40.0164 21.7784C52.6582 11.9851 67.634 7.57932 82.2576 3.44342L81.4412 0.556653C66.8756 4.67614 51.3456 9.20709 38.1792 19.4067L40.0164 21.7784Z"})}),m.jsxs("span",{className:"ml-2 -mt-2 text-sm font-semibold text-primary",children:[" ","Most popular"," "]})]}),m.jsx("div",{className:"px-4 py-5 bg-gray-50 sm:p-6 rounded-t-2xl sm:rounded-t-3xl",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"text-3xl shrink-0",children:"  "}),m.jsxs("div",{className:"ml-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Pro"}),m.jsx("p",{className:"mt-2 text-sm font-normal text-gray-500",children:"Lorem ipsum dolor sit amet, consec tetur adipis elit"})]})]})}),m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsxs("div",{className:"flex items-end",children:[m.jsx("p",{className:"text-5xl font-semibold text-white",children:"$49"}),m.jsx("p",{className:"py-1 text-sm font-normal text-gray-500",children:"/mo/user"})]}),m.jsx("div",{className:"mt-6",children:m.jsx("a",{href:"#",title:"",className:"inline-flex items-center justify-center w-full px-6 py-3 text-base font-medium text-white transition-all duration-200 bg-primary border border-transparent rounded-xl hover:bg-primary/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/hover:bg-primary/50",role:"button",children:"Get 14 days free trial"})}),m.jsx("p",{className:"mt-8 text-xs font-semibold tracking-widest text-gray-500 uppercase",children:"Best for free"}),m.jsxs("ul",{className:"mt-8 space-y-4",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Full Access to Landingfolio"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"100 GB Free Storage"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Unlimited Visitors"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"10 Agents"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Live Chat Support"]})]})]})]}),m.jsxs("div",{className:"mt-6 bg-white border border-gray-200 divide-y divide-gray-200 rounded-2xl sm:rounded-3xl lg:mt-0",children:[m.jsx("div",{className:"px-4 py-5 bg-gray-50 sm:p-6 rounded-t-2xl sm:rounded-t-3xl",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"text-3xl shrink-0",children:"  "}),m.jsxs("div",{className:"ml-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Exclusive"}),m.jsx("p",{className:"mt-2 text-sm font-normal text-gray-500",children:"Lorem ipsum dolor sit amet, consec tetur adipis elit"})]})]})}),m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsxs("div",{className:"flex items-end",children:[m.jsx("p",{className:"text-5xl font-semibold text-white",children:"$99"}),m.jsx("p",{className:"py-1 text-sm font-normal text-gray-500",children:"/mo/user"})]}),m.jsx("div",{className:"mt-6",children:m.jsx("a",{href:"#",title:"",className:"inline-flex items-center justify-center w-full px-6 py-3 text-base font-medium text-white transition-all duration-200 bg-gray-400 border border-transparent rounded-xl hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",role:"button",children:"Get 14 days free trial"})}),m.jsx("p",{className:"mt-8 text-xs font-semibold tracking-widest text-gray-500 uppercase",children:"Best for free"}),m.jsxs("ul",{className:"mt-8 space-y-4",children:[m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Full Access to Landingfolio"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"100 GB Free Storage"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Unlimited Visitors"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"10 Agents"]}),m.jsxs("li",{className:"flex items-center",children:[m.jsx("svg",{className:"w-5 h-5 mr-2 text-primary shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Live Chat Support"]})]})]})]})]})]})})})}const Xl=({children:t})=>{const{user:e,loading:n}=g.useContext(Et),r=yi();return!n&&!(e!=null&&e.email)?m.jsx(cR,{to:"/login",state:{from:r},replace:!0}):m.jsx(m.Fragment,{children:t})};function sT({user:t}){const[e,n]=g.useState(1);return m.jsxs(Le,{to:`/user/${t==null?void 0:t.id}`,className:"max-w-[350px]  rounded  bg-slate-100/70  shadow-md dark:bg-[#18181B]",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{width:350,height:280,className:"h-[180px] md:h-[300px] w-[350px] bg-gray-400 rounded-t-lg",src:(t==null?void 0:t.img)??"https://shorturl.at/pNO1x"}),m.jsxs("h1",{className:"flex items-center bg-primary hover:bg-purple-600 text-white absolute bottom-5 left-3 rounded px-3 py-1",children:[m.jsx(wa,{}),m.jsx("span",{children:(t==null?void 0:t.points)??10})]})]}),m.jsxs("section",{className:"px-3 py-3 md:py-9 bg-[#52545B] text-white flex flex-col gap-5 ",children:[m.jsxs("div",{className:"space-y-2 flex flex-wrap justify-between items-center ",children:[m.jsx("h2",{className:" sm:text-lg md:text-xl dark:text-white/90 font-bold",children:t==null?void 0:t.name}),m.jsxs("div",{className:"flex space-x-1",children:[[1,2,3].map(r=>m.jsx("svg",{onMouseMove:()=>n(r),className:"w-4 cursor-pointer",viewBox:"0 0 24 24",fill:"#94a3b8",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9.15316 5.40838C10.4198 3.13613 11.0531 2 12 2C12.9469 2 13.5802 3.13612 14.8468 5.40837L15.1745 5.99623C15.5345 6.64193 15.7144 6.96479 15.9951 7.17781C16.2757 7.39083 16.6251 7.4699 17.3241 7.62805L17.9605 7.77203C20.4201 8.32856 21.65 8.60682 21.9426 9.54773C22.2352 10.4886 21.3968 11.4691 19.7199 13.4299L19.2861 13.9372C18.8096 14.4944 18.5713 14.773 18.4641 15.1177C18.357 15.4624 18.393 15.8341 18.465 16.5776L18.5306 17.2544C18.7841 19.8706 18.9109 21.1787 18.1449 21.7602C17.3788 22.3417 16.2273 21.8115 13.9243 20.7512L13.3285 20.4768C12.6741 20.1755 12.3469 20.0248 12 20.0248C11.6531 20.0248 11.3259 20.1755 10.6715 20.4768L10.0757 20.7512C7.77268 21.8115 6.62118 22.3417 5.85515 21.7602C5.08912 21.1787 5.21588 19.8706 5.4694 17.2544L5.53498 16.5776C5.60703 15.8341 5.64305 15.4624 5.53586 15.1177C5.42868 14.773 5.19043 14.4944 4.71392 13.9372L4.2801 13.4299C2.60325 11.4691 1.76482 10.4886 2.05742 9.54773C2.35002 8.60682 3.57986 8.32856 6.03954 7.77203L6.67589 7.62805C7.37485 7.4699 7.72433 7.39083 8.00494 7.17781C8.28555 6.96479 8.46553 6.64194 8.82547 5.99623L9.15316 5.40838Z",fill:r<=e?"#f2b00a":"#94a3b8"})},r)),m.jsx("span",{children:"8.3 k"})]})]}),m.jsxs("p",{className:"text-sm  text-nowrap md:text-md lg:text-lg xl:text-xl",children:[t==null?void 0:t.email," "]}),m.jsx("span",{children:"Actor"})]})]})}function hc(){return m.jsx(_e.Fragment,{children:m.jsx("div",{className:"flex justify-center w-full mx-auto items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 mx-auto border-gray-900"})})})}const $M=()=>{const{user:t}=g.useContext(Et),{data:e,isLoading:n}=JC(void 0),r=e==null?void 0:e.data;return m.jsxs("div",{className:"bg-secondary  pt-[4rem] container mx-auto px-2",children:[m.jsx("h2",{className:"text-3xl font-bold text-white my-5",children:"All Users "}),n&&m.jsx(hc,{}),(r==null?void 0:r.length)&&(r==null?void 0:r.length)<1&&m.jsx("div",{children:m.jsx("h2",{className:"text-3xl font-bold text-white my-7",children:"No Users Found "})}),m.jsx("div",{className:" container grid grid-cols-2 md:gird-cols-3 lg:grid-cols-5  gap-7",children:r==null?void 0:r.filter(i=>i.id!==(t==null?void 0:t.id)).map(i=>m.jsx(sT,{user:i},i.id))})]})};function VM(t){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M160 368c26.5 0 48 21.5 48 48v16l72.5-54.4c8.3-6.2 18.4-9.6 28.8-9.6H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16V352c0 8.8 7.2 16 16 16h96zm48 124l-.2 .2-5.1 3.8-17.1 12.8c-4.8 3.6-11.3 4.2-16.8 1.5s-8.8-8.2-8.8-14.3V474.7v-6.4V468v-4V416H112 64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H448c35.3 0 64 28.7 64 64V352c0 35.3-28.7 64-64 64H309.3L208 492z"},child:[]}]})(t)}const qM=()=>{var p;const{callFunc:t,isStartCall:e,setIsStartCall:n,user:r}=g.useContext(Ac),{id:i}=Od(),{data:s,isLoading:o}=Ug(i??"1"),{data:a}=jd(`${es}/user`),c=s==null?void 0:s.data,l=bi(),u=()=>{if(!(r!=null&&r.id)||!i){l("/login");return}c!=null&&c.id&&(n(!0),t(c==null?void 0:c.id,"video"))},[d,f]=g.useState(3),h=async()=>{if(!(r!=null&&r.id)||!i){l("/login");return}c!=null&&c.id&&(n(!0),t(c==null?void 0:c.id,"audio"))};return m.jsxs("div",{className:"pt-10 container mx-auto",children:[o&&m.jsx(hc,{}),e&&m.jsx(Yg,{}),m.jsxs("section",{className:"block lg:flex  justify-between  items-center  w-full",children:[m.jsxs("div",{className:"block lg:flex items-center gap-[5rem] text-white w-[55%] mx-auto",children:[m.jsx("img",{className:"rounded-full h-[10rem] w-[10rem]",src:(c==null?void 0:c.img)??"https://shorturl.at/pNO1x",alt:""}),m.jsxs("div",{className:"space-y-5 mt-7 lg:mt-0",children:[m.jsx("h2",{className:"text-4xl font-serif font-extrabold",children:c==null?void 0:c.name}),m.jsx("p",{className:"text-xl text-slate-200",children:c==null?void 0:c.email}),m.jsxs("div",{className:"flex gap-3",children:[[1,2,3,4,5].map(y=>m.jsx("svg",{onMouseMove:()=>f(y),className:"w-4 cursor-pointer",viewBox:"0 0 24 24",fill:"#94a3b8",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9.15316 5.40838C10.4198 3.13613 11.0531 2 12 2C12.9469 2 13.5802 3.13612 14.8468 5.40837L15.1745 5.99623C15.5345 6.64193 15.7144 6.96479 15.9951 7.17781C16.2757 7.39083 16.6251 7.4699 17.3241 7.62805L17.9605 7.77203C20.4201 8.32856 21.65 8.60682 21.9426 9.54773C22.2352 10.4886 21.3968 11.4691 19.7199 13.4299L19.2861 13.9372C18.8096 14.4944 18.5713 14.773 18.4641 15.1177C18.357 15.4624 18.393 15.8341 18.465 16.5776L18.5306 17.2544C18.7841 19.8706 18.9109 21.1787 18.1449 21.7602C17.3788 22.3417 16.2273 21.8115 13.9243 20.7512L13.3285 20.4768C12.6741 20.1755 12.3469 20.0248 12 20.0248C11.6531 20.0248 11.3259 20.1755 10.6715 20.4768L10.0757 20.7512C7.77268 21.8115 6.62118 22.3417 5.85515 21.7602C5.08912 21.1787 5.21588 19.8706 5.4694 17.2544L5.53498 16.5776C5.60703 15.8341 5.64305 15.4624 5.53586 15.1177C5.42868 14.773 5.19043 14.4944 4.71392 13.9372L4.2801 13.4299C2.60325 11.4691 1.76482 10.4886 2.05742 9.54773C2.35002 8.60682 3.57986 8.32856 6.03954 7.77203L6.67589 7.62805C7.37485 7.4699 7.72433 7.39083 8.00494 7.17781C8.28555 6.96479 8.46553 6.64194 8.82547 5.99623L9.15316 5.40838Z",fill:y<=d?"#f2b00a":"#94a3b8"})},y)),m.jsx("h2",{className:"text-md text-yellow-500",children:"4.5/5"})]})]})]}),m.jsxs("div",{className:"mt-7 lg:mt-0 flex flex-col gap-5 w-[45%] font-bold text-xl mx-auto text-center",children:[m.jsxs(Le,{to:`/dashboard/chat/${i}`,className:"bg-primary w-full p-3 text-white rounded flex flex-wrap gap-2 md:gap-7 justify-center items-center ",children:[m.jsx(VM,{}),m.jsx("h4",{children:" Message Now"}),o&&"...",m.jsxs("h5",{className:"flex gap-2 items-center",children:["  ",m.jsx(wa,{})," ",m.jsx("span",{children:"01"})]})]}),m.jsxs("button",{onClick:h,className:"bg-primary w-full p-3 text-white rounded flex flex-wrap gap-2 md:gap-7 justify-center items-center",children:[m.jsx(Pg,{}),m.jsx("h4",{children:"Audio Call"}),o&&"...",m.jsxs("h5",{className:"flex gap-2 items-center",children:["  ",m.jsx(wa,{})," ",m.jsx("span",{children:"03"})]})]}),m.jsxs("button",{onClick:u,className:"bg-primary w-full p-3 text-white rounded flex flex-wrap gap-2 md:gap-7 justify-center items-center",children:[m.jsx(_g,{}),m.jsx("h4",{children:"Video Call"}),o&&"...",m.jsxs("h5",{className:"flex gap-2 items-center",children:["  ",m.jsx(wa,{})," ",m.jsx("span",{children:"05"})]})]})]})]}),m.jsxs("section",{className:"text-white",children:[m.jsx("h1",{className:"bg-white h-[0.5px] w-full my-[5rem]"}),m.jsxs("h1",{className:"text-3xl font-xl mt-3 font-bold",children:["About ",c==null?void 0:c.name]}),m.jsx("p",{className:"text-lg  mt-5",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}),m.jsx("h1",{className:"bg-white h-[0.5px] w-full my-[5rem]"})]}),m.jsxs("div",{className:"bg-secondary  py-[2rem] container mx-auto",children:[m.jsx("h2",{className:"text-3xl font-bold text-white my-2",children:"You Might Also Like "}),o&&m.jsx(hc,{}),m.jsx("div",{className:" container grid grid-cols-2 md:gird-cols-3 lg:grid-cols-5  gap-7",children:(p=a==null?void 0:a.data)==null?void 0:p.filter(y=>(y==null?void 0:y.id)!==i).map(y=>m.jsx(sT,{user:y},y.id))})]})]})},HM=({stream:t,className:e})=>{const n=g.useRef(null);return g.useEffect(()=>{n.current&&(n.current.srcObject=t,n.current.style.width="100%",n.current.style.height="100%")},[t]),console.log(n),console.log(t),m.jsx("div",{className:`${e}`,children:m.jsx("video",{playsInline:!0,ref:n,autoPlay:!0,muted:!0,style:{width:"100%",height:"100%"}})})};function oT({stream:t,handleEndCall:e}){var u;const n=g.useRef(null);g.useEffect(()=>{n.current&&t&&(n.current.srcObject=t)},[t]);//!  video /audio
const[r,i]=g.useState(!0),[s,o]=g.useState(!0),a=()=>{t&&t.getAudioTracks().forEach(d=>d.enabled=!d.enabled),i(!r)},c=()=>{t&&t.getVideoTracks().forEach(d=>d.enabled=!d.enabled),o(!s)},l=()=>{e(),n.current&&(n.current.srcObject=null)};return m.jsxs("div",{className:"max-w-3x mx-auto ",children:[m.jsx("div",{className:"relative w-full",children:m.jsx("video",{className:"w-full h-auto max-h-96 md:max-h-[40rem] z-20 bg-[#3B334F] max-w-[100vw] mx-auto",ref:n,autoPlay:!0,muted:!0,style:{width:"100% !important",minWidth:"100% !important"}})}),((u=n==null?void 0:n.current)==null?void 0:u.srcObject)!==null&&m.jsxs("div",{className:"w-full max-w-[100vw] mx-auto bg-slate-700 flex items-center justify-center gap-5 py-4",children:[m.jsx("button",{onClick:a,className:"p-2 bg-gray-200 rounded-full hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:r?m.jsx(yC,{size:24}):m.jsx(vC,{size:24})}),m.jsx("button",{onClick:c,className:"p-2 bg-gray-200 rounded-full hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:s?m.jsx(_g,{size:24}):m.jsx(bC,{size:24})}),m.jsx("button",{onClick:l,className:"p-2 bg-red-600 rounded-full text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400",children:m.jsx(Pg,{size:24})})]})]})}const aT="ADD_PEER",cT="REMOVE_PEER",Gf=(t,e)=>({type:aT,payload:{peerId:t,stream:e}}),WM=t=>({type:cT,payload:{peerId:t}}),KM={},QM=(t=KM,e)=>{switch(e.type){case aT:return{...t,[e.payload.peerId]:{stream:e.payload.stream}};case cT:const{[e.payload.peerId]:n,...r}=t;return{...r};default:return{...t}}},GM=()=>{const{id:t}=Od(),{user:e}=g.useContext(Et),{ws:n}=g.useContext(Ac),[r,i]=g.useState(),[s,o]=g.useReducer(QM,{}),[a,c]=g.useState(null),l=bi();Fd(e.id,5),console.log(e),g.useEffect(()=>{const h=new eT;return i(h),h.on("open",p=>{console.log(p),n.emit("join-room",{roomId:t,peerId:p})}),()=>{h.disconnect(),h.destroy()}},[t,e.id,n]),g.useEffect(()=>((async()=>{try{const p=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});c(p)}catch(p){console.error("Error getting user media:",p)}})(),()=>{a&&a.getTracks().forEach(p=>p.stop())}),[]),g.useEffect(()=>{if(!(!r||!a))return r.on("call",h=>{h.answer(a),h.on("stream",p=>{o(Gf(h.peer,p))}),h.on("close",()=>{d(h.peer)})}),n.on("user-joined",({peerId:h})=>{const p=r.call(h,a);p.on("stream",y=>{o(Gf(h,y))}),p.on("close",()=>{d(p.peer)})}),n.on("get-users",u),n.on("user-disconnected",d),()=>{n.off("user-joined"),n.off("get-users"),n.off("user-disconnected")}},[r,a,n]);const u=({participants:h})=>{console.log(h,"participants"),h==null||h.forEach(p=>{const y=r==null?void 0:r.call(p,a);y==null||y.on("stream",k=>{o(Gf(p,k))})})},d=h=>{o(WM(h))},f=()=>{a&&a.getTracks().forEach(h=>h.stop()),c(null),l(-1)};return console.log(s,"peers"),m.jsxs("div",{children:[m.jsx(oT,{handleEndCall:f,stream:a},"me"),m.jsx("div",{className:"grid grid-cols-4 gap-4 bg-red-400 min-h-[20rem]",children:Object.values(s).map((h,p)=>m.jsx(HM,{stream:h.stream},p))})]})};function JM({senderId:t,receiverId:e}){const{localStream:n,endCall:r}=g.useContext(Jg);console.log(new Date);const i=bi(),s=()=>{console.log(t),i(-1),r(e)};return m.jsx("div",{className:"h-full w-full",children:n&&m.jsx(oT,{stream:n||null,handleEndCall:s})})}function lT(){const{id:t}=Od(),{user:e}=g.useContext(Et);return Fd(e.id,3),m.jsx("div",{children:m.jsx(JM,{senderId:e.id,receiverId:t??"demoId"})})}var k1={};function YM(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function We(t,e){if(!t)throw new Error(e)}const XM=34028234663852886e22,ZM=-34028234663852886e22,eI=4294967295,tI=2147483647,nI=-2147483648;function Zl(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>tI||t<nI)throw new Error("invalid int 32: "+t)}function Bp(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>eI||t<0)throw new Error("invalid uint 32: "+t)}function uT(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>XM||t<ZM))throw new Error("invalid float 32: "+t)}const dT=Symbol("@bufbuild/protobuf/enum-type");function rI(t){const e=t[dT];return We(e,"missing enum type on enum object"),e}function fT(t,e,n,r){t[dT]=hT(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function hT(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=pT(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function iI(t,e,n){const r={};for(const i of e){const s=pT(i);r[s.localName]=s.no,r[s.no]=s.localName}return fT(r,t,e),r}function pT(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class mT{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function sI(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new mT),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new o().fromBinary(a,c)},fromJson(a,c){return new o().fromJson(a,c)},fromJsonString(a,c){return new o().fromJsonString(a,c)},equals(a,c){return t.util.equals(o,a,c)}}),o}function oI(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Jf(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const eu=4294967296;function C1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const c=Number(t.slice(o,a));i*=n,r=r*n+c,r>=eu&&(i=i+(r/eu|0),r=r%eu)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?vT(r,i):Xg(r,i)}function aI(t,e){let n=Xg(t,e);const r=n.hi&2147483648;r&&(n=vT(n.lo,n.hi));const i=gT(n.lo,n.hi);return r?"-"+i:i}function gT(t,e){if({lo:t,hi:e}=cI(t,e),e<=2097151)return String(eu*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const c=1e7;return s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c),a.toString()+x1(o)+x1(s)}function cI(t,e){return{lo:t>>>0,hi:e>>>0}}function Xg(t,e){return{lo:t|0,hi:e|0}}function vT(t,e){return e=~e,t?t=~t+1:e+=1,Xg(t,e)}const x1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function T1(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function lI(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function uI(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof k1!="object"||k1.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<o)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>We(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>We(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),C1(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),C1(i)},dec(i,s){return aI(i,s)},uDec(i,s){return gT(i,s)}}}const it=uI();var B;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(B||(B={}));var ui;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(ui||(ui={}));function Fr(t,e,n){if(e===n)return!0;if(t==B.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return e==n}return!1}function vo(t,e){switch(t){case B.BOOL:return!1;case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return e==0?it.zero:"0";case B.DOUBLE:case B.FLOAT:return 0;case B.BYTES:return new Uint8Array(0);case B.STRING:return"";default:return 0}}function yT(t,e){switch(t){case B.BOOL:return e===!1;case B.STRING:return e==="";case B.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Qe;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Qe||(Qe={}));class dI{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Bp(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Zl(e),T1(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){uT(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Bp(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Zl(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Zl(e),e=(e<<1^e>>31)>>>0,T1(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=it.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=it.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=it.enc(e);return Jf(n.lo,n.hi,this.buf),this}sint64(e){let n=it.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Jf(i,s,this.buf),this}uint64(e){let n=it.uEnc(e);return Jf(n.lo,n.hi,this.buf),this}}class fI{constructor(e,n){this.varint64=oI,this.uint32=lI,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case Qe.Varint:for(;this.buf[this.pos++]&128;);break;case Qe.Bit64:this.pos+=4;case Qe.Bit32:this.pos+=4;break;case Qe.LengthDelimited:let i=this.uint32();this.pos+=i;break;case Qe.StartGroup:for(;;){const[s,o]=this.tag();if(o===Qe.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return it.dec(...this.varint64())}uint64(){return it.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,it.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return it.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return it.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function hI(t,e,n,r){let i;return{typeName:e,extendee:n,get field(){if(!i){const s=typeof r=="function"?r():r;s.name=e.split(".").pop(),s.jsonName="[".concat(e,"]"),i=t.util.newFieldList([s]).list()[0]}return i},runtime:t}}function bT(t){const e=t.field.localName,n=Object.create(null);return n[e]=pI(t),[n,()=>n[e]]}function pI(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return vo(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function mI(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),zd=[];for(let t=0;t<mr.length;t++)zd[mr[t].charCodeAt(0)]=t;zd[45]=mr.indexOf("+");zd[95]=mr.indexOf("/");const ST={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=zd[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=mr[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=mr[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=mr[i|r>>6],e+=mr[r&63],n=0;break}return n&&(e+=mr[i],e+="=",n==1&&(e+="=")),e}};function gI(t,e,n){CT(e,t);const r=e.runtime.bin.makeReadOptions(n),i=mI(t.getType().runtime.bin.listUnknownFields(t),e.field),[s,o]=bT(e);for(const a of i)e.runtime.bin.readField(s,r.readerFactory(a.data),e.field,a.wireType,r);return o()}function vI(t,e,n,r){CT(e,t);const i=e.runtime.bin.makeReadOptions(r),s=e.runtime.bin.makeWriteOptions(r);if(kT(t,e)){const l=t.getType().runtime.bin.listUnknownFields(t).filter(u=>u.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const u of l)t.getType().runtime.bin.onUnknownField(t,u.no,u.wireType,u.data)}const o=s.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,n,o,s);const c=i.readerFactory(o.finish());for(;c.pos<c.len;){const[l,u]=c.tag(),d=c.skip(u,l);t.getType().runtime.bin.onUnknownField(t,l,u,d)}}function kT(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function CT(t,e){We(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function xT(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!yT(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function w1(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?vo(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function ji(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(mT.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function TT(t,e){return ji(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}B.DOUBLE,B.FLOAT,B.INT64,B.UINT64,B.INT32,B.UINT32,B.BOOL,B.STRING,B.BYTES;const E1={ignoreUnknownFields:!1},_1={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function yI(t){return t?Object.assign(Object.assign({},E1),t):E1}function bI(t){return t?Object.assign(Object.assign({},_1),t):_1}const Ju=Symbol(),tu=Symbol();function SI(){return{makeReadOptions:yI,makeWriteOptions:bI,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Hn(e)));r=r??new t;const i=new Map,s=n.typeRegistry;for(const[o,a]of Object.entries(e)){const c=t.fields.findJsonName(o);if(c){if(c.oneof){if(a===null&&c.kind=="scalar")continue;const l=i.get(c.oneof);if(l!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(l,'", "').concat(o,'"'));i.set(c.oneof,o)}P1(r,a,c,n,t)}else{let l=!1;if(s!=null&&s.findExtension&&o.startsWith("[")&&o.endsWith("]")){const u=s.findExtension(o.substring(1,o.length-1));if(u&&u.extendee.typeName==t.typeName){l=!0;const[d,f]=bT(u);P1(d,a,u.field,n,u),vI(r,u,f(),n)}}if(!l&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!xT(i,t)){if(i.req)throw"required field not set";if(!e.emitDefaultValues||!CI(i))continue}const o=i.oneof?t[i.oneof.localName].value:t[i.localName],a=R1(i,o,e);a!==void 0&&(r[e.useProtoFieldName?i.name:i.jsonName]=a)}const s=e.typeRegistry;if(s!=null&&s.findExtensionFor)for(const o of n.runtime.bin.listUnknownFields(t)){const a=s.findExtensionFor(n.typeName,o.no);if(a&&kT(t,a)){const c=gI(t,a,e),l=R1(a.field,c,e);l!==void 0&&(r[a.field.jsonName]=l)}}}catch(s){const o=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=s instanceof Error?s.message:String(s);throw new Error(o+(a.length>0?": ".concat(a):""))}return r},readScalar(t,e,n){return Oa(t,e,n??ui.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||yT(t,e)))return nu(t,e)},debug:Hn}}function Hn(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function P1(t,e,n,r,i){let s=n.localName;if(n.repeated){if(We(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(e)));const o=t[s];for(const a of e){if(a===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(a)));switch(n.kind){case"message":o.push(n.T.fromJson(a,r));break;case"enum":const c=Yf(n.T,a,r.ignoreUnknownFields,!0);c!==tu&&o.push(c);break;case"scalar":try{o.push(Oa(n.T,a,n.L,!0))}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(a));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(e)));const o=t[s];for(const[a,c]of Object.entries(e)){if(c===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let l;try{l=kI(n.K,a)}catch(u){let d="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(e));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":o[l]=n.V.T.fromJson(c,r);break;case"enum":const u=Yf(n.V.T,c,r.ignoreUnknownFields,!0);u!==tu&&(o[l]=u);break;case"scalar":try{o[l]=Oa(n.V.T,c,ui.BIGINT,!0)}catch(d){let f="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(e));throw d instanceof Error&&d.message.length>0&&(f+=": ".concat(d.message)),new Error(f)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:s},s="value"),n.kind){case"message":const o=n.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=t[s];ji(a)?a.fromJson(e,r):(t[s]=a=o.fromJson(e,r),o.fieldWrapper&&!n.oneof&&(t[s]=o.fieldWrapper.unwrapField(a)));break;case"enum":const c=Yf(n.T,e,r.ignoreUnknownFields,!1);switch(c){case Ju:w1(n,t);break;case tu:break;default:t[s]=c;break}break;case"scalar":try{const l=Oa(n.T,e,n.L,!1);switch(l){case Ju:w1(n,t);break;default:t[s]=l;break}}catch(l){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Hn(e));throw l instanceof Error&&l.message.length>0&&(u+=": ".concat(l.message)),new Error(u)}break}}function kI(t,e){if(t===B.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Oa(t,e,ui.BIGINT,!0).toString()}function Oa(t,e,n,r){if(e===null)return r?vo(t,n):Ju;switch(t){case B.DOUBLE:case B.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const i=Number(e);if(Number.isNaN(i)||!Number.isFinite(i))break;return t==B.FLOAT&&uT(i),i;case B.INT32:case B.FIXED32:case B.SFIXED32:case B.SINT32:case B.UINT32:let s;if(typeof e=="number"?s=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(s=Number(e)),s===void 0)break;return t==B.UINT32||t==B.FIXED32?Bp(s):Zl(s),s;case B.INT64:case B.SFIXED64:case B.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=it.parse(e);return n?o.toString():o;case B.FIXED64:case B.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=it.uParse(e);return n?a.toString():a;case B.BOOL:if(typeof e!="boolean")break;return e;case B.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case B.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return ST.dec(e)}throw new Error}function Yf(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:Ju;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.findName(e);if(i!==void 0)return i.no;if(n)return tu;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Hn(e)))}function CI(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function R1(t,e,n){if(t.kind=="map"){We(typeof e=="object"&&e!=null);const r={},i=Object.entries(e);switch(t.V.kind){case"scalar":for(const[o,a]of i)r[o.toString()]=nu(t.V.T,a);break;case"message":for(const[o,a]of i)r[o.toString()]=a.toJson(n);break;case"enum":const s=t.V.T;for(const[o,a]of i)r[o.toString()]=Xf(s,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(t.repeated){We(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let i=0;i<e.length;i++)r.push(nu(t.T,e[i]));break;case"enum":for(let i=0;i<e.length;i++)r.push(Xf(t.T,e[i],n.enumAsInteger));break;case"message":for(let i=0;i<e.length;i++)r.push(e[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return nu(t.T,e);case"enum":return Xf(t.T,e,n.enumAsInteger);case"message":return TT(t.T,e).toJson(n)}}function Xf(t,e,n){var r;if(We(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.findNumber(e);return(r=i==null?void 0:i.name)!==null&&r!==void 0?r:e}function nu(t,e){switch(t){case B.INT32:case B.SFIXED32:case B.SINT32:case B.FIXED32:case B.UINT32:return We(typeof e=="number"),e;case B.FLOAT:case B.DOUBLE:return We(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case B.STRING:return We(typeof e=="string"),e;case B.BOOL:return We(typeof e=="boolean"),e;case B.UINT64:case B.FIXED64:case B.INT64:case B.SFIXED64:case B.SINT64:return We(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case B.BYTES:return We(e instanceof Uint8Array),ST.enc(e)}}const bs=Symbol("@bufbuild/protobuf/unknown-fields"),O1={readUnknownFields:!0,readerFactory:t=>new fI(t)},M1={writeUnknownFields:!0,writerFactory:()=>new dI};function xI(t){return t?Object.assign(Object.assign({},O1),t):O1}function TI(t){return t?Object.assign(Object.assign({},M1),t):M1}function wI(){return{makeReadOptions:xI,makeWriteOptions:TI,listUnknownFields(t){var e;return(e=t[bs])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[bs]},writeUnknownFields(t,e){const r=t[bs];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[bs])||(i[bs]=[]),i[bs].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,i){const s=t.getType(),o=i?e.len:e.pos+n;let a,c;for(;e.pos<o&&([a,c]=e.tag(),!(i===!0&&c==Qe.EndGroup));){const l=s.fields.find(a);if(!l){const u=e.skip(c,a);r.readUnknownFields&&this.onUnknownField(t,a,c,u);continue}I1(t,e,l,c,r)}if(i&&(c!=Qe.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:I1,writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){if(!xT(i,t)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const s=i.oneof?t[i.oneof.localName].value:t[i.localName];N1(i,s,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&N1(t,e,n,r)}}}function I1(t,e,n,r,i){let{repeated:s,localName:o}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=o&&delete t.value,t.case=o,o="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?B.INT32:n.T;let c=Yu;if(n.kind=="scalar"&&n.L>0&&(c=_I),s){let f=t[o];if(r==Qe.LengthDelimited&&a!=B.STRING&&a!=B.BYTES){let p=e.uint32()+e.pos;for(;e.pos<p;)f.push(c(e,a))}else f.push(c(e,a))}else t[o]=c(e,a);break;case"message":const l=n.T;s?t[o].push(ru(e,new l,i,n)):ji(t[o])?ru(e,t[o],i,n):(t[o]=ru(e,new l,i,n),l.fieldWrapper&&!n.oneof&&!n.repeated&&(t[o]=l.fieldWrapper.unwrapField(t[o])));break;case"map":let[u,d]=EI(n,e,i);t[o][u]=d;break}}function ru(t,e,n,r){const i=e.getType().runtime.bin,s=r==null?void 0:r.delimited;return i.readMessage(e,t,s?r.no:t.uint32(),n,s),e}function EI(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){const[a]=e.tag();switch(a){case 1:s=Yu(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=Yu(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=ru(e,new t.V.T,n,void 0);break}break}}if(s===void 0&&(s=vo(t.K,ui.BIGINT)),typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=vo(t.V.T,ui.BIGINT);break;case"enum":o=t.V.T.values[0].no;break;case"message":o=new t.V.T;break}return[s,o]}function _I(t,e){const n=Yu(t,e);return typeof n=="bigint"?n.toString():n}function Yu(t,e){switch(e){case B.STRING:return t.string();case B.BOOL:return t.bool();case B.DOUBLE:return t.double();case B.FLOAT:return t.float();case B.INT32:return t.int32();case B.INT64:return t.int64();case B.UINT64:return t.uint64();case B.FIXED64:return t.fixed64();case B.BYTES:return t.bytes();case B.FIXED32:return t.fixed32();case B.SFIXED32:return t.sfixed32();case B.SFIXED64:return t.sfixed64();case B.SINT64:return t.sint64();case B.UINT32:return t.uint32();case B.SINT32:return t.sint32()}}function N1(t,e,n,r){We(e!==void 0);const i=t.repeated;switch(t.kind){case"scalar":case"enum":let s=t.kind=="enum"?B.INT32:t.T;if(i)if(We(Array.isArray(e)),t.packed)RI(n,s,t.no,e);else for(const o of e)Ma(n,s,t.no,o);else Ma(n,s,t.no,e);break;case"message":if(i){We(Array.isArray(e));for(const o of e)D1(n,r,t,o)}else D1(n,r,t,e);break;case"map":We(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))PI(n,r,t,o,a);break}}function PI(t,e,n,r,i){t.tag(n.no,Qe.LengthDelimited),t.fork();let s=r;switch(n.K){case B.INT32:case B.FIXED32:case B.UINT32:case B.SFIXED32:case B.SINT32:s=Number.parseInt(r);break;case B.BOOL:We(r=="true"||r=="false"),s=r=="true";break}switch(Ma(t,n.K,1,s),n.V.kind){case"scalar":Ma(t,n.V.T,2,i);break;case"enum":Ma(t,B.INT32,2,i);break;case"message":We(i!==void 0),t.tag(2,Qe.LengthDelimited).bytes(i.toBinary(e));break}t.join()}function D1(t,e,n,r){const i=TT(n.T,r);n.delimited?t.tag(n.no,Qe.StartGroup).raw(i.toBinary(e)).tag(n.no,Qe.EndGroup):t.tag(n.no,Qe.LengthDelimited).bytes(i.toBinary(e))}function Ma(t,e,n,r){We(r!==void 0);let[i,s]=wT(e);t.tag(n,i)[s](r)}function RI(t,e,n,r){if(!r.length)return;t.tag(n,Qe.LengthDelimited).fork();let[,i]=wT(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function wT(t){let e=Qe.Varint;switch(t){case B.BYTES:case B.STRING:e=Qe.LengthDelimited;break;case B.DOUBLE:case B.FIXED64:case B.SFIXED64:e=Qe.Bit64;break;case B.FIXED32:case B.SFIXED32:case B.FLOAT:e=Qe.Bit32;break}const n=B[t].toLowerCase();return[e,n]}function OI(){return{setEnumType:fT,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!=null)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const c=r.findField(a);let l=o[i].value;c&&c.kind=="message"&&!ji(l,c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===B.BYTES&&(l=Zo(l)),s[i]={case:a,value:l};break;case"scalar":case"enum":let u=o[i];r.T===B.BYTES&&(u=r.repeated?u.map(Zo):Zo(u)),s[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===B.BYTES)for(const[h,p]of Object.entries(o[i]))s[i][h]=Zo(p);else Object.assign(s[i],o[i]);break;case"message":const f=r.V.T;for(const h of Object.keys(o[i])){let p=o[i][h];f.fieldWrapper||(p=new f(p)),s[i][h]=p}break}break;case"message":const d=r.T;if(r.repeated)s[i]=o[i].map(f=>ji(f,d)?f:new d(f));else{const f=o[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[i]=Zo(f):s[i]=f:s[i]=ji(f,d)?f:new d(f)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Fr(r.T,o,s[a]));case"enum":return i.every((o,a)=>Fr(B.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Fr(B.INT32,i,s);case"scalar":return Fr(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Fr(B.INT32,i.value,s.value);case"scalar":return Fr(o.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],s[u]));case"enum":return a.every(u=>Fr(B.INT32,i[u],s[u]));case"scalar":const l=r.V.T;return a.every(u=>Fr(l,i[u],s[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(Sl);else if(i.kind=="map"){o=r[i.localName];for(const[a,c]of Object.entries(s))o[a]=Sl(c)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Sl(s.value)}:{case:void 0}:o=Sl(s);r[i.localName]=o}for(const i of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Sl(t){if(t===void 0)return t;if(ji(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Zo(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function MI(t,e,n){return{syntax:t,json:SI(),bin:wI(),util:Object.assign(Object.assign({},OI()),{newFieldList:e,initFields:n}),makeMessageType(r,i,s){return sI(this,r,i,s)},makeEnum:iI,makeEnumType:hT,getEnumType:rI,makeExtension(r,i,s){return hI(this,r,i,s)}}}class II{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function ET(t,e){const n=_T(t);return e?n:UI(jI(n))}function NI(t){return ET(t,!1)}const DI=_T;function _T(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const AI=new Set(["constructor","toString","toJSON","valueOf"]),LI=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),PT=t=>"".concat(t,"$"),jI=t=>LI.has(t)?PT(t):t,UI=t=>AI.has(t)?PT(t):t;class FI{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=NI(e)}addField(e){We(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function BI(t,e){var n,r,i,s,o,a;const c=[];let l;for(const u of typeof t=="function"?t():t){const d=u;if(d.localName=ET(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:DI(u.name),d.repeated=(r=u.repeated)!==null&&r!==void 0?r:!1,u.kind=="scalar"&&(d.L=(i=u.L)!==null&&i!==void 0?i:ui.BIGINT),d.delimited=(s=u.delimited)!==null&&s!==void 0?s:!1,d.req=(o=u.req)!==null&&o!==void 0?o:!1,d.opt=(a=u.opt)!==null&&a!==void 0?a:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=B.BYTES&&u.T!=B.STRING),u.oneof!==void 0){const f=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!l||l.name!=f)&&(l=new FI(f)),d.oneof=l,l.addField(d)}c.push(d)}return c}const j=MI("proto3",t=>new II(t,e=>BI(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=vo(e.T,e.L);break}}}),zI=j.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:2,name:"time_series",kind:"message",T:$I,repeated:!0},{no:3,name:"events",kind:"message",T:qI,repeated:!0}]),$I=j.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp",kind:"scalar",T:3},{no:5,name:"end_timestamp",kind:"scalar",T:3},{no:6,name:"samples",kind:"message",T:VI,repeated:!0}]),VI=j.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"value",kind:"scalar",T:2}]),qI=j.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp",kind:"scalar",T:3},{no:5,name:"end_timestamp",kind:"scalar",T:3,opt:!0},{no:6,name:"metadata",kind:"scalar",T:9}]),On=j.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),vt=j.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Zg=j.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),pa=j.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),pc=j.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Js=j.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"}]),Ss=j.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),HI=j.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Wn=j.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),ev=j.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Xu,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:LT}]),Xu=j.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),WI=j.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:j.getEnumType(vt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),mc=j.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType(zp)},{no:4,name:"tracks",kind:"message",T:Us,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:WI},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:j.getEnumType(Zu)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:j.getEnumType(Js)}]),zp=j.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Zu=j.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),dn=j.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),KI=j.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ui,repeated:!0}]),Us=j.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:j.getEnumType(On)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:j.getEnumType(vt)},{no:10,name:"layers",kind:"message",T:Ui,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:KI,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:j.getEnumType(dn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:LT},{no:19,name:"audio_features",kind:"enum",T:j.getEnumType(Wn),repeated:!0}]),Ui=j.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(Zg)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),RT=j.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:j.getEnumType(Rt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:MT,oneof:"value"},{no:3,name:"speaker",kind:"message",T:QI,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:GI,oneof:"value"},{no:7,name:"transcription",kind:"message",T:JI,oneof:"value"},{no:8,name:"metrics",kind:"message",T:zI,oneof:"value"}]),Rt=j.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),QI=j.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:OT,repeated:!0}]),OT=j.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),MT=j.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0}]),GI=j.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),JI=j.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:YI,repeated:!0}]),YI=j.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),IT=j.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),XI=j.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:j.getEnumType(NT)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),NT=j.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),ZI=j.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:j.getEnumType(DT)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]),DT=j.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]),AT=j.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:A1},{no:2,name:"screen",kind:"message",T:A1},{no:3,name:"resume_connection",kind:"enum",T:j.getEnumType(pc)},{no:4,name:"disabled_codecs",kind:"message",T:eN},{no:5,name:"force_relay",kind:"enum",T:j.getEnumType(pc)}]),A1=j.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:j.getEnumType(pc)}]),eN=j.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Xu,repeated:!0},{no:2,name:"publish",kind:"message",T:Xu,repeated:!0}]),LT=j.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Mn=j.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),$p=j.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),tN=j.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),nN=j.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Gi,oneof:"message"},{no:2,name:"answer",kind:"message",T:Gi,oneof:"message"},{no:3,name:"trickle",kind:"message",T:tv,oneof:"message"},{no:4,name:"add_track",kind:"message",T:qp,oneof:"message"},{no:5,name:"mute",kind:"message",T:nv,oneof:"message"},{no:6,name:"subscription",kind:"message",T:$d,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:jT,oneof:"message"},{no:8,name:"leave",kind:"message",T:Vd,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:FT,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:VT,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:qT,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Vn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:BT,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:WT,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:UT,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:aN,oneof:"message"}]),L1=j.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:rN,oneof:"message"},{no:2,name:"answer",kind:"message",T:Gi,oneof:"message"},{no:3,name:"offer",kind:"message",T:Gi,oneof:"message"},{no:4,name:"trickle",kind:"message",T:tv,oneof:"message"},{no:5,name:"update",kind:"message",T:oN,oneof:"message"},{no:6,name:"track_published",kind:"message",T:rv,oneof:"message"},{no:8,name:"leave",kind:"message",T:Vd,oneof:"message"},{no:9,name:"mute",kind:"message",T:nv,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:cN,oneof:"message"},{no:11,name:"room_update",kind:"message",T:lN,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:dN,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:hN,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:mN,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:gN,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:sN,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:iN,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:vN,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:SN,oneof:"message"},{no:22,name:"request_response",kind:"message",T:kN,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:CN,oneof:"message"}]),Vp=j.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),qp=j.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:j.getEnumType(On)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:j.getEnumType(vt)},{no:9,name:"layers",kind:"message",T:Ui,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Vp,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:j.getEnumType(dn)},{no:15,name:"stream",kind:"scalar",T:9}]),tv=j.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:j.getEnumType(Mn)},{no:3,name:"final",kind:"scalar",T:8}]),nv=j.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),rN=j.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:ev},{no:2,name:"participant",kind:"message",T:mc},{no:3,name:"other_participants",kind:"message",T:mc,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:zT,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:AT},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:XI},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Xu,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),iN=j.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:zT,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:AT}]),rv=j.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Us}]),sN=j.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Gi=j.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),oN=j.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:mc,repeated:!0}]),$d=j.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:IT,repeated:!0}]),jT=j.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:j.getEnumType(Zg)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),UT=j.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:j.getEnumType(Wn),repeated:!0}]),aN=j.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Vd=j.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:j.getEnumType(Js)},{no:3,name:"action",kind:"enum",T:j.getEnumType(Ys)},{no:4,name:"regions",kind:"message",T:yN}]),Ys=j.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),FT=j.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Ui,repeated:!0}]),BT=j.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),zT=j.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),cN=j.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:OT,repeated:!0}]),lN=j.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:ev}]),uN=j.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:j.getEnumType(pa)},{no:3,name:"score",kind:"scalar",T:2}]),dN=j.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:uN,repeated:!0}]),fN=j.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType($p)}]),hN=j.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:fN,repeated:!0}]),iv=j.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(Zg)},{no:2,name:"enabled",kind:"scalar",T:8}]),pN=j.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:iv,repeated:!0}]),mN=j.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:iv,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:pN,repeated:!0}]),$T=j.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),VT=j.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:$T,repeated:!0}]),gN=j.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),qT=j.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Gi},{no:2,name:"subscription",kind:"message",T:$d},{no:3,name:"publish_tracks",kind:"message",T:rv,repeated:!0},{no:4,name:"data_channels",kind:"message",T:HT,repeated:!0},{no:5,name:"offer",kind:"message",T:Gi},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),HT=j.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:j.getEnumType(Mn)}]),Vn=j.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:j.getEnumType(tN),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),WT=j.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),vN=j.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),yN=j.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:bN,repeated:!0}]),bN=j.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),SN=j.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:j.getEnumType(HI)}]),kN=j.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:j.getEnumType(KT)},{no:3,name:"message",kind:"scalar",T:9}]),KT=j.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),CN=j.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);var xN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QT={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(xN,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(y,k){var v=y[k];if(typeof v.bind=="function")return v.bind(y);try{return Function.prototype.bind.call(v,y)}catch{return function(){return Function.prototype.apply.apply(v,[y,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(y){return y==="debug"&&(y="log"),typeof console===n?!1:y==="trace"&&r?c:console[y]!==void 0?a(console,y):console.log!==void 0?a(console,"log"):e}function u(){for(var y=this.getLevel(),k=0;k<i.length;k++){var v=i[k];this[v]=k<y?e:this.methodFactory(v,y,this.name)}if(this.log=this.debug,typeof console===n&&y<this.levels.SILENT)return"No console available for logging"}function d(y){return function(){typeof console!==n&&(u.call(this),this[y].apply(this,arguments))}}function f(y,k,v){return l(y)||d.apply(this,arguments)}function h(y,k){var v=this,b,S,C,T="loglevel";typeof y=="string"?T+=":"+y:typeof y=="symbol"&&(T=void 0);function x(I){var A=(i[I]||"silent").toUpperCase();if(!(typeof window===n||!T)){try{window.localStorage[T]=A;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+A+";"}catch{}}}function w(){var I;if(!(typeof window===n||!T)){try{I=window.localStorage[T]}catch{}if(typeof I===n)try{var A=window.document.cookie,q=encodeURIComponent(T),V=A.indexOf(q+"=");V!==-1&&(I=/^([^;]+)/.exec(A.slice(V+q.length+1))[1])}catch{}return v.levels[I]===void 0&&(I=void 0),I}}function E(){if(!(typeof window===n||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(I){var A=I;if(typeof A=="string"&&v.levels[A.toUpperCase()]!==void 0&&(A=v.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=v.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+I)}v.name=y,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=k||f,v.getLevel=function(){return C??S??b},v.setLevel=function(I,A){return C=P(I),A!==!1&&x(C),u.call(v)},v.setDefaultLevel=function(I){S=P(I),w()||v.setLevel(I,!1)},v.resetLevel=function(){C=null,E(),u.call(v)},v.enableAll=function(I){v.setLevel(v.levels.TRACE,I)},v.disableAll=function(I){v.setLevel(v.levels.SILENT,I)},v.rebuild=function(){if(o!==v&&(b=P(o.getLevel())),u.call(v),o===v)for(var I in s)s[I].rebuild()},b=P(o?o.getLevel():"WARN");var M=w();M!=null&&(C=P(M)),u.call(v)}o=new h,o.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var v=s[k];return v||(v=s[k]=new h(k,o.methodFactory)),v};var p=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(QT);var qd=QT.exports,Hp;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Hp||(Hp={}));var Un;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Un||(Un={}));let fe=qd.getLogger("livekit");Object.values(Un).map(t=>qd.getLogger(t));fe.setDefaultLevel(Hp.info);function Pr(t){const e=qd.getLogger(t);return e.setDefaultLevel(fe.getLevel()),e}const wN=qd.getLogger("lk-e2ee"),ea=7e3,EN=[0,300,2*2*300,3*3*300,4*4*300,ea,ea,ea,ea,ea];class _N{constructor(e){this._retryDelays=e!==void 0?[...e]:EN}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function R(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function j1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof j1=="function"?j1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var sv={exports:{}},Xs=typeof Reflect=="object"?Reflect:null,U1=Xs&&typeof Xs.apply=="function"?Xs.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},iu;Xs&&typeof Xs.ownKeys=="function"?iu=Xs.ownKeys:Object.getOwnPropertySymbols?iu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:iu=function(e){return Object.getOwnPropertyNames(e)};function PN(t){console&&console.warn&&console.warn(t)}var GT=Number.isNaN||function(e){return e!==e};function Te(){Te.init.call(this)}sv.exports=Te;sv.exports.once=IN;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var F1=10;function Hd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return F1},set:function(t){if(typeof t!="number"||t<0||GT(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");F1=t}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||GT(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function JT(t){return t._maxListeners===void 0?Te.defaultMaxListeners:t._maxListeners}Te.prototype.getMaxListeners=function(){return JT(this)};Te.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")U1(c,this,n);else for(var l=c.length,u=tw(c,l),r=0;r<l;++r)U1(u[r],this,n);return!0};function YT(t,e,n,r){var i,s,o;if(Hd(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=JT(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,PN(a)}return t}Te.prototype.addListener=function(e,n){return YT(this,e,n,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(e,n){return YT(this,e,n,!0)};function RN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function XT(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=RN.bind(r);return i.listener=n,r.wrapFn=i,i}Te.prototype.once=function(e,n){return Hd(n),this.on(e,XT(this,e,n)),this};Te.prototype.prependOnceListener=function(e,n){return Hd(n),this.prependListener(e,XT(this,e,n)),this};Te.prototype.removeListener=function(e,n){var r,i,s,o,a;if(Hd(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():ON(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function ZT(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?MN(i):tw(i,i.length)}Te.prototype.listeners=function(e){return ZT(this,e,!0)};Te.prototype.rawListeners=function(e){return ZT(this,e,!1)};Te.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ew.call(t,e)};Te.prototype.listenerCount=ew;function ew(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?iu(this._events):[]};function tw(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ON(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function MN(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function IN(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}nw(t,e,s,{once:!0}),e!=="error"&&NN(t,i,{once:!0})})}function NN(t,e,n){typeof t.on=="function"&&nw(t,"error",e,n)}function nw(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var sr=sv.exports;let rw=!0,iw=!0;function su(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function ss(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function DN(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(rw=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function AN(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(iw=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function sw(){if(typeof window=="object"){if(rw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ov(t,e){iw&&console.warn(t+" is deprecated, please use "+e+" instead.")}function LN(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=su(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=su(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=su(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function B1(t){return Object.prototype.toString.call(t)==="[object Object]"}function ow(t){return B1(t)?Object.keys(t).reduce(function(e,n){const r=B1(t[n]),i=r?ow(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Wp(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Wp(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Wp(t,t.get(i),n)})}))}function z1(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&Wp(t,a,i)})}),i}const $1=sw;function aw(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(y=>p.label.toLowerCase().includes(y)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),$1("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return $1("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function cw(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function lw(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ss(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function uw(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function dw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>z1(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),ss(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>z1(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function fw(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function hw(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return fw(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(y=>y===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new t.MediaStream([u]);this._streams[d.id]=y,this._reverseStreams[y.id]=d,this.addStream(y)}return this.getSenders().find(y=>y.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const y=s(this,p);f[0].apply(null,[y])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(y=>u.track===y)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Kp(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function pw(t,e){ss(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var V1=Object.freeze({__proto__:null,fixNegotiationNeeded:pw,shimAddTrackRemoveTrack:hw,shimAddTrackRemoveTrackWithNative:fw,shimGetSendersWithDtmf:uw,shimGetUserMedia:aw,shimMediaStream:cw,shimOnTrack:lw,shimPeerConnection:Kp,shimSenderReceiverGetStats:dw});function mw(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){ov("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function jN(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function gw(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qp(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function vw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function yw(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ss(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function bw(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){ov("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Sw(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function kw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Cw(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function xw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Tw(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var q1=Object.freeze({__proto__:null,shimAddTransceiver:kw,shimCreateAnswer:Tw,shimCreateOffer:xw,shimGetDisplayMedia:jN,shimGetParameters:Cw,shimGetUserMedia:mw,shimOnTrack:gw,shimPeerConnection:Qp,shimRTCDataChannel:Sw,shimReceiverGetStats:yw,shimRemoveStream:bw,shimSenderGetStats:vw});function ww(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function Ew(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function _w(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function Pw(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(Rw(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function Rw(t){return t&&t.video!==void 0?Object.assign({},t,{video:ow(t.video)}):t}function Ow(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(ov("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Mw(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Iw(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Nw(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var H1=Object.freeze({__proto__:null,shimAudioContext:Nw,shimCallbacksAPI:_w,shimConstraints:Rw,shimCreateOfferLegacy:Iw,shimGetUserMedia:Pw,shimLocalStreamsAPI:ww,shimRTCIceServerUrls:Ow,shimRemoteStreamsAPI:Ew,shimTrackEventTransceiver:Mw}),Dw={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Dw);var Aw=Dw.exports,Zs=TN(Aw),UN=YM({__proto__:null,default:Zs},[Aw]);function ou(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Zs.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,ss(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Gp(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||ss(t,"icecandidate",e=>{if(e.candidate){const n=Zs.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function au(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Zs.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Zs.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=Zs.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function cu(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},ss(t,"datachannel",r=>(e(r.channel,r.target),r))}function Jp(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Yp(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function lu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function uu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var FN=Object.freeze({__proto__:null,removeExtmapAllowMixed:Yp,shimAddIceCandidateNullOrEmpty:lu,shimConnectionState:Jp,shimMaxMessageSize:au,shimParameterlessSetLocalDescription:uu,shimRTCIceCandidate:ou,shimRTCIceCandidateRelayProtocol:Gp,shimSendThrowTypeError:cu});function BN(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=sw,r=LN(t),i={browserDetails:r,commonShim:FN,extractVersion:su,disableLog:DN,disableWarnings:AN,sdp:UN};switch(r.browser){case"chrome":if(!V1||!Kp||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=V1,lu(t,r),uu(t),aw(t,r),cw(t),Kp(t,r),lw(t),hw(t,r),uw(t),dw(t),pw(t,r),ou(t),Gp(t),Jp(t),au(t,r),cu(t),Yp(t,r);break;case"firefox":if(!q1||!Qp||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=q1,lu(t,r),uu(t),mw(t,r),Qp(t,r),gw(t),bw(t),vw(t),yw(t),Sw(t),kw(t),Cw(t),xw(t),Tw(t),ou(t),Jp(t),au(t,r),cu(t);break;case"safari":if(!H1||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=H1,lu(t,r),uu(t),Ow(t),Iw(t),_w(t),ww(t),Ew(t),Mw(t),Pw(t),Nw(t),ou(t),Gp(t),au(t,r),cu(t),Yp(t,r);break;default:n("Unsupported browser!");break}return i}BN({window:typeof window>"u"?void 0:window});const zN=10,kl="lk_e2ee",$N="LKFrameEncryptionKey",VN={sharedKey:!1,ratchetSalt:$N,ratchetWindowSize:8,failureTolerance:zN,keyringSize:16};var ii;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(ii||(ii={}));var W1;(function(t){t.KeyRatcheted="keyRatcheted"})(W1||(W1={}));var Gr;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Gr||(Gr={}));var K1;(function(t){t.Error="cryptorError"})(K1||(K1={}));function qN(){return HN()||Xp()}function Xp(){return typeof window.RTCRtpScriptTransform<"u"}function HN(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class B9 extends sr.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{fe.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},VN),e),this.on(ii.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(ii.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(ii.RatchetRequest,e,n)}}class os extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class Re extends os{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class av extends os{constructor(e){super(21,e??"device is unsupported")}}class Kn extends os{constructor(e){super(20,e??"track is invalid")}}class WN extends os{constructor(e){super(10,e??"unsupported server")}}class Ze extends os{constructor(e){super(12,e??"unexpected connection state")}}class Zp extends os{constructor(e){super(13,e??"unable to negotiate")}}class Q1 extends os{constructor(e,n){super(15,e),this.reason=n}}var gc;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(gc||(gc={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(gc||(gc={}));var G1;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(G1||(G1={}));var L;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.LocalTrackSubscribed="localTrackSubscribed"})(L||(L={}));var U;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed"})(U||(U={}));var G;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse"})(G||(G={}));var H;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate"})(H||(H={}));function cv(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+e>=c)return c-h}return e}var f=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(y,k){var v=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!o){var S=t.apply(p,h);a&&a(S),u.forEach(function(C){return(0,C.resolve)(S)}),u=[]}},d()),v){var b=t.apply(p,h);return a&&a(b),y(b)}u.push({resolve:y,reject:k})})};return f.cancel=function(h){s!==void 0&&clearTimeout(s),u.forEach(function(p){return(0,p.reject)(h)}),u=[]},f}const KN=/version\/(\d+(\.?_?\d+)+)/i;let Zf;function Rr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Zf===void 0||e){const r=QN.find(i=>{let{test:s}=i;return s.test(n)});Zf=r==null?void 0:r.describe(n)}return Zf}const QN=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:du(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:eh(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:du(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:eh(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:du(KN,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:eh(t)}}}];function du(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function eh(t){return t.includes("mac os")?du(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var GN="2.5.1";const JN=GN,YN=15;class dt{}dt.setTimeout=function(){return setTimeout(...arguments)};dt.setInterval=function(){return setInterval(...arguments)};dt.clearTimeout=function(){return clearTimeout(...arguments)};dt.clearInterval=function(){return clearInterval(...arguments)};class xe{constructor(e,n,r,i,s){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const XN=["vp8","h264"],Lw=["vp8","h264","vp9","av1"];function ZN(t){return!!XN.find(e=>e===t)}var em;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(em||(em={}));const vc={h90:new xe(160,90,9e4,20),h180:new xe(320,180,16e4,20),h216:new xe(384,216,18e4,20),h360:new xe(640,360,45e4,20),h540:new xe(960,540,8e5,25),h720:new xe(1280,720,17e5,30),h1080:new xe(1920,1080,3e6,30),h1440:new xe(2560,1440,5e6,30),h2160:new xe(3840,2160,8e6,30)},tm={h120:new xe(160,120,7e4,20),h180:new xe(240,180,125e3,20),h240:new xe(320,240,14e4,20),h360:new xe(480,360,33e4,20),h480:new xe(640,480,5e5,20),h540:new xe(720,540,6e5,25),h720:new xe(960,720,13e5,30),h1080:new xe(1440,1080,23e5,30),h1440:new xe(1920,1440,38e5,30)},lv={h360fps3:new xe(640,360,2e5,3,"medium"),h360fps15:new xe(640,360,4e5,15,"medium"),h720fps5:new xe(1280,720,8e5,5,"medium"),h720fps15:new xe(1280,720,15e5,15,"medium"),h720fps30:new xe(1280,720,2e6,30,"medium"),h1080fps15:new xe(1920,1080,25e5,15,"medium"),h1080fps30:new xe(1920,1080,5e6,30,"medium"),original:new xe(0,0,7e6,30,"medium")};function e8(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const t8=5e3,ta=[];var pn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(pn||(pn={}));class D extends sr.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=D.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=fe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),t8):this.handleAppVisibilityChanged()},this.log=Pr((i=r.loggerName)!==null&&i!==void 0?i:Un.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=D.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ee(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===D.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===D.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(ta.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&ta.splice(ta.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Fs(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?H.AudioPlaybackStarted:H.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?H.AudioPlaybackFailed:H.VideoPlaybackFailed,s):s.name==="AbortError"?fe.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):fe.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(H.ElementAttached,e),e}detach(e){try{if(e){eo(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(H.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{eo(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(H.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Pr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),ta.forEach(r=>{r.parentElement||(n=!1)}),n&&ta.push(e)}}handleAppVisibilityChanged(){return R(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===D.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){tn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){tn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Fs(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Ji()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Ji()||yo())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function eo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return On.AUDIO;case e.Video:return On.VIDEO;default:return On.DATA}}t.kindToProto=i;function s(l){switch(l){case On.AUDIO:return e.Audio;case On.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(l){switch(l){case n.Camera:return vt.CAMERA;case n.Microphone:return vt.MICROPHONE;case n.ScreenShare:return vt.SCREEN_SHARE;case n.ScreenShareAudio:return vt.SCREEN_SHARE_AUDIO;default:return vt.UNKNOWN}}t.sourceToProto=o;function a(l){switch(l){case vt.CAMERA:return n.Camera;case vt.MICROPHONE:return n.Microphone;case vt.SCREEN_SHARE:return n.ScreenShare;case vt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case $p.ACTIVE:return r.Active;case $p.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(D||(D={}));function jw(t,e,n){var r;const i=(r=e8(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&nm(i.audio,e),i.video&&nm(i.video,n),i}function nm(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Wd(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(s=>{switch(s){case"resolution":nm(r,i.resolution);break;default:r[s]=i[s]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function n8(t){return R(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=Uw();if(r){const i=r.createAnalyser();i.fftSize=2048;const s=i.frequencyBinCount,o=new Uint8Array(s);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield Zn(n),i.getByteTimeDomainData(o);const c=o.some(l=>l!==128&&l!==0);return r.close(),!c}return!1}()})}function Uw(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function r8(t){return t===D.Source.Microphone?"audioinput":t===D.Source.Camera?"videoinput":void 0}function i8(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Ji()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function fu(t){const e=t.split("/")[1].toLowerCase();if(!Lw.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function s8(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new rv({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Ee(t){return t instanceof D?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?Ee(t.track):{})}}function o8(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function a8(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],i={};for(const s of r)t[s]!==e[s]&&(i[s]=(n=e[s])!==null&&n!==void 0?n:"");return i}const c8="|",J1="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function l8(t){const e=t.split(c8);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Zn(t){return R(this,void 0,void 0,function*(){return new Promise(e=>dt.setTimeout(e,t))})}function rm(){return"addTransceiver"in RTCPeerConnection.prototype}function im(){return"addTrack"in RTCPeerConnection.prototype}function u8(){if(!("getCapabilities"in RTCRtpSender)||Ji())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function d8(){if(!("getCapabilities"in RTCRtpSender)||yo())return!1;if(Ji()){const n=Rr();if(n!=null&&n.version&&yc(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Ia(t){return t==="av1"||t==="vp9"}function sm(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}function f8(){return typeof RTCPeerConnection>"u"?!1:rm()||im()}function yo(){var t;return((t=Rr())===null||t===void 0?void 0:t.name)==="Firefox"}function Ji(){var t;return((t=Rr())===null||t===void 0?void 0:t.name)==="Safari"}function h8(){const t=Rr();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function Fw(){var t,e;return tn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function p8(){const t=Rr(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&yc(e,t.osVersion)>=0?!0:t.name==="Safari"&&yc(e,t.version)>=0}function tn(){return typeof document<"u"}function Or(){return navigator.product=="ReactNative"}function om(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function Bw(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function zw(){if(!Or())return;let t=Bw();if(t)return t.platform}function Y1(){if(tn())return window.devicePixelRatio;if(Or()){let t=Bw();if(t)return t.devicePixelRatio}return 1}function yc(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),a=parseInt(r[s],10);if(o>a)return 1;if(o<a)return-1;if(s===i-1&&o===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function m8(t){for(const e of t)e.target.handleResize(e)}function g8(t){for(const e of t)e.target.handleVisibilityChanged(e)}let th=null;const X1=()=>(th||(th=new ResizeObserver(m8)),th);let nh=null;const Z1=()=>(nh||(nh=new IntersectionObserver(g8,{root:null,rootMargin:"0px"})),nh);function v8(){var t;const e=new ZI({sdk:DT.JS,protocol:YN,version:JN});return Or()&&(e.os=(t=zw())!==null&&t!==void 0?t:""),e}function eb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let na;function rh(){if(!na){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[na]=r.stream.getAudioTracks(),!na)throw Error("Could not get empty media stream audio track");na.enabled=!1}return na.clone()}class $w{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>R(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}class mn{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function y8(t){return Lw.includes(t)}function kr(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function b8(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function tb(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function S8(t,e){return t.segments.map(n=>{let{id:r,text:i,language:s,startTime:o,endTime:a,final:c}=n;var l;const u=(l=e.get(r))!==null&&l!==void 0?l:Date.now(),d=Date.now();return c?e.delete(r):e.set(r,u),{id:r,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(a.toString()),final:c,language:s,firstReceivedTime:u,lastReceivedTime:d}})}const ih="default";class St{static getInstance(){return this.instance===void 0&&(this.instance=new St),this.instance}getDevices(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;if(((s=St.userMediaPromiseMap)===null||s===void 0?void 0:s.size)>0){fe.debug("awaiting getUserMedia promise");try{n?yield St.userMediaPromiseMap.get(n):yield Promise.all(St.userMediaPromiseMap.values())}catch{fe.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(i&&!(Ji()&&r.hasDeviceInUse(n))&&(o.filter(c=>c.kind===n).length===0||o.some(c=>{const l=c.label==="",u=n?c.kind===n:!0;return l&&u}))){const c={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"},l=yield navigator.mediaDevices.getUserMedia(c);o=yield navigator.mediaDevices.enumerateDevices(),l.getTracks().forEach(u=>{u.stop()})}return n&&(o=o.filter(a=>a.kind===n)),o}()})}normalizeDeviceId(e,n,r){return R(this,void 0,void 0,function*(){if(n!==ih)return n;const i=yield this.getDevices(e),s=i.find(a=>a.deviceId===ih);if(!s){fe.warn("could not reliably determine default device");return}const o=i.find(a=>a.deviceId!==ih&&a.groupId===(r??s.groupId));if(!o){fe.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?St.userMediaPromiseMap.has(e):St.userMediaPromiseMap.size>0}}St.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];St.userMediaPromiseMap=new Map;const k8=1e3;class Fi extends D{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=cv(()=>R(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>R(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(H.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new mn,this.pauseUpstreamLock=new mn,this.processorLock=new mn,this.restartLock=new mn,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==D.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return R(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{eo(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){const i=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Fs(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{i()}}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{Fs(r??e,i)}))})}waitForDimensions(){return R(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k8;return function*(){var r;if(e.kind===D.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=Rr())===null||r===void 0?void 0:r.os)==="iOS"&&(yield Zn(10));const i=Date.now();for(;Date.now()-i<n;){const s=e.dimensions;if(s)return s;yield Zn(50)}throw new Kn("unable to get track dimensions after timeout")}()})}getDeviceId(){return R(this,void 0,void 0,function*(){if(this.source===D.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===D.Kind.Audio?"audioinput":"videoinput";return St.getInstance().normalizeDeviceId(r,e,n)})}mute(){return R(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return R(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return R(this,void 0,void 0,function*(){if(!this.sender)throw new Kn("unable to replace an unpublished track");let r,i;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,i=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return R(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const r={audio:!1,video:!1};this.kind===D.Kind.Video?r.video=e:r.audio=e,this.attachedElements.forEach(o=>{eo(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const s=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return s.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(s),this._constraints=e,this.emit(H.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?H.Muted:H.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),Fw()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return R(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(H.UpstreamPaused,this);const n=Rr();if((n==null?void 0:n.name)==="Safari"&&yc(n.version,"12.0")<0)throw new av("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return R(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(H.UpstreamResumed,this),yield this.sender.replaceTrack(this.mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){return R(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s;const o=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const a=document.createElement(r.kind),c={kind:r.kind,track:r._mediaStreamTrack,element:a,audioContext:r.audioContext};if(yield n.init(c),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Fs(r._mediaStreamTrack,a),a.muted=!0,a.play().catch(l=>r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:l}))),r.processor=n,r.processorElement=a,r.processor.processedTrack){for(const l of r.attachedElements)l!==r.processorElement&&i&&(eo(r._mediaStreamTrack,l),Fs(r.processor.processedTrack,l));yield(s=r.sender)===null||s===void 0?void 0:s.replaceTrack(r.processor.processedTrack)}r.emit(H.TrackProcessorUpdate,r.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return R(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((i=e.processorElement)===null||i===void 0||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(H.TrackProcessorUpdate))}()})}}class C8 extends sr.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:s,data:o}=n.data;switch(s){case"error":fe.error(o.error.message),this.emit(Gr.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==o.enabled&&o.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Gr.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(o.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(Gr.ParticipantEncryptionStatusChanged,o.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(ii.KeyRatcheted,o.material,o.keyIndex);break}},this.onWorkerError=n=>{fe.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Gr.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!qN())throw new av("tried to setup end-to-end encryption on an unsupported browser");if(fe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:wN.getLevel()}};this.worker&&(fe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){fe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?fe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(G.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(L.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==dn.NONE,i.identity)),e.on(L.ConnectionStateChanged,r=>{r===me.Connected&&e.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==dn.NONE,i.identity)})})}).on(L.TrackUnsubscribed,(r,i,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(L.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(L.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(U.LocalTrackPublished,r=>R(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(ii.SetKey,r=>this.postKey(r)).on(ii.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?fu(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof Fi)||!n){n||fe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return R(this,void 0,void 0,function*(){if(this.worker){if(Xp()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(kl in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const c=e.createEncodedStreams();e.writableStream=c.writable,s=c.writable,e.readableStream=c.readable,o=c.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[o,s])}e[kl]=!0}})}handleSender(e,n,r){var i;if(!(kl in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Xp()){fe.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{fe.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(o,[s.readable,s.writable])}e[kl]=!0}}}var Na;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Na||(Na={}));class x8{constructor(){this.pendingTasks=new Map,this.taskMutex=new mn,this.nextTaskIndex=0}run(e){return R(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Na.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Na.RUNNING,yield e()}finally{n.status=Na.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return R(this,void 0,void 0,function*(){return this.run(()=>R(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const T8=["syncState","trickle","offer","answer","simulate","leave"];function w8(t){const e=T8.indexOf(t.case)>=0;return fe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Ae;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Ae||(Ae={}));class uv{get currentState(){return this.state}get isDisconnected(){return this.state===Ae.DISCONNECTING||this.state===Ae.DISCONNECTED}get isEstablishingConnection(){return this.state===Ae.CONNECTING||this.state===Ae.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Ae.DISCONNECTED,this.log=fe,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Pr((r=n.loggerName)!==null&&r!==void 0?r:Un.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new x8,this.queuedRequests=[],this.closingLock=new mn,this.connectionLock=new mn,this.state=Ae.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return R(this,void 0,void 0,function*(){return this.state=Ae.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return R(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Ae.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=b8(e),e=e.replace(/\/$/,""),e+="/rtc";const s=v8(),o=E8(n,s,r);return new Promise((a,c)=>R(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>R(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new Re("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new Re("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+o),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=f=>R(this,void 0,void 0,function*(){if(this.state!==Ae.CONNECTED){this.state=Ae.DISCONNECTED,clearTimeout(d);try{const h=yield fetch("http".concat(e.substring(2),"/validate").concat(o));if(h.status.toFixed(0).startsWith("4")){const p=yield h.text();c(new Re(p,0,h.status))}else c(new Re("Internal error",2,h.status))}catch{c(new Re("server was not reachable",1))}return}this.handleWSError(f)}),this.ws.onmessage=f=>R(this,void 0,void 0,function*(){var h,p,y;let k;if(typeof f.data=="string"){const v=JSON.parse(f.data);k=L1.fromJson(v,{ignoreUnknownFields:!0})}else if(f.data instanceof ArrayBuffer)k=L1.fromBinary(new Uint8Array(f.data));else{this.log.error("could not decode websocket message: ".concat(typeof f.data),this.logContext);return}if(this.state!==Ae.CONNECTED){let v=!1;if(((h=k.message)===null||h===void 0?void 0:h.case)==="join"?(this.state=Ae.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=k.message.value.pingTimeout,this.pingIntervalDuration=k.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(k.message.value)):this.state===Ae.RECONNECTING&&k.message.case!=="leave"?(this.state=Ae.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=k.message)===null||p===void 0?void 0:p.case)==="reconnect"?a(k.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),a(void 0),v=!0)):this.isEstablishingConnection&&k.message.case==="leave"?c(new Re("Received leave request while trying to (re)connect",4)):r.reconnect||c(new Re("did not receive join response, got ".concat((y=k.message)===null||y===void 0?void 0:y.case," instead"))),!v)return}this.signalLatency&&(yield Zn(this.signalLatency)),this.handleSignalResponse(k)}),this.ws.onclose=f=>{this.isEstablishingConnection&&c(new Re("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:f.reason,code:f.code,wasClean:f.wasClean,state:this.state})),this.handleOnClose(f.reason)}}finally{l()}}))}close(){return R(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Ae.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const i=new Promise(s=>{e.ws?e.ws.onclose=()=>{s()}:s()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([i,Zn(250)])),e.ws=void 0}}finally{n&&(e.state=Ae.DISCONNECTED),r()}}()})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:ed(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:ed(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new tv({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new nv({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return R(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=s.getNextRequestId();return yield s.sendRequest({case:"updateMetadata",value:new BT({requestId:a,metadata:r,name:i,attributes:o})}),a}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new FT({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new VT({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:it.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new WT({timestamp:it.parse(Date.now()),rtt:it.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new UT({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Vd({reason:Js.CLIENT_INITIATED,action:Ys.DISCONNECT})})}sendRequest(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!w8(n)&&r.state===Ae.RECONNECTING){r.queuedRequests.push(()=>R(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield Zn(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n==null?void 0:n.case),r.logContext);return}const o=new nN({message:n});try{r.useJSON?r.ws.send(o.toJsonString()):r.ws.send(o.toBinary())}catch(a){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:a}))}}()})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=nb(i.value);this.onAnswer&&this.onAnswer(o)}else if(i.case==="offer"){const o=nb(i.value);this.onOffer&&this.onOffer(o)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return R(this,void 0,void 0,function*(){if(this.state===Ae.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=dt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&dt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=dt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&dt.clearInterval(this.pingInterval)}}function nb(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function ed(t){return new Gi({sdp:t.sdp,type:t.type})}function E8(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Or()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var Vw={},qw={exports:{}},rb=qw.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(rb).forEach(function(t){var e=rb[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var Hw=qw.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=Hw,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[f]||[]).length;p+=1){var y=i[f][p];if(y.reg.test(h))return r(y,u,h)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(Vw);var sh=Hw,_8=/%[sdv%]/g,P8=function(t){var e=1,n=arguments,r=n.length;return t.replace(_8,function(i){if(e>=r)return i;var s=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},ra=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var s=0;s<e.names.length;s+=1){var o=e.names[s];e.name?i.push(n[e.name][o]):i.push(n[e.names[s]])}else i.push(n[e.name]);return P8.apply(null,i)},R8=["v","o","s","i","u","e","p","c","b","t","r","z","a"],O8=["i","c","b","a"],M8=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=e.outerOrder||R8,r=e.innerOrder||O8,i=[];return n.forEach(function(s){sh[s].forEach(function(o){o.name in t&&t[o.name]!=null?i.push(ra(s,o,t)):o.push in t&&t[o.push]!=null&&t[o.push].forEach(function(a){i.push(ra(s,o,a))})})}),t.media.forEach(function(s){i.push(ra("m",sh.m[0],s)),r.forEach(function(o){sh[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(ra(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(ra(o,a,c))})})})}),i.join(`\r
`)+`\r
`},I8=Vw,N8=M8,oh=N8,ma=I8.parse;const D8=.7,A8=20,to={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ib extends sr.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=fe,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=cv(i=>R(this,void 0,void 0,function*(){this.emit(to.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(i)i(s);else throw s}}),A8),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Pr((r=n.loggerName)!==null&&r!==void 0?r:Un.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return R(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return R(this,void 0,void 0,function*(){var n;let r;if(e.type==="offer"){let{stereoMids:i,nackMids:s}=j8(e);this.remoteStereoMids=i,this.remoteNackMids=s}else if(e.type==="answer"){const i=ma((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||s.mid!=o.transceiver.mid)return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of s.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),c=!0;break}return c||o.maxbr>0&&s.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),r=oh(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(to.NegotiationComplete),e.sdp&&ma(e.sdp).media.forEach(s=>{s.type==="video"&&this.emit(to.RTPVideoPayloadTypes,s.rtp)}))})}createAndSendOffer(e){return R(this,void 0,void 0,function*(){var n;if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const s=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&s)yield this._pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:r.sdp},this.logContext));const i=ma((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"?sb(s,[],[]):s.type==="video"&&this.trackBitrates.some(o=>{if(!s.msid||!o.cid||!s.msid.includes(o.cid))return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0||(Ia(o.codec)&&L8(s),o.codec!=="av1"))return!0;const c=Math.round(o.maxbr*D8);for(const l of s.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(c));break}return!0})}),yield this.setMungedSDP(r,oh(i)),this.onOffer(r)})}createAndSetAnswer(){return R(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=ma((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&sb(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,oh(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Ze("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Ze("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return R(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,n,r){return R(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new Zp(s)}})}}function sb(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function L8(t){var e,n;let r=0;((e=t.ext)===null||e===void 0?void 0:e.some(s=>s.uri===J1?!0:(s.value>r&&(r=s.value),!1)))||(n=t.ext)===null||n===void 0||n.push({value:r+1,uri:J1})}function j8(t){var e;const n=[],r=[],i=ma((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(o=>{var a;o.type==="audio"&&(o.rtp.some(c=>c.codec==="opus"?(s=c.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===s&&c.type==="nack")&&r.push(o.mid),o.fmtp.some(c=>c.payload===s?(c.config.includes("sprop-stereo=1")&&n.push(o.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const am="vp8",U8={audioPreset:em.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:lv.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:am,backupCodec:!0},Ww={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},Kw={resolution:vc.h720.resolution},F8={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new _N,disconnectOnPageLeave:!0,webAudioMix:!1},dv={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var qe;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(qe||(qe={}));class B8{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=dv.peerConnectionTimeout,this.log=fe,this.updateState=()=>{var s;const o=this.state,a=this.requiredTransports.map(c=>c.getConnectionState());a.every(c=>c==="connected")?this.state=qe.CONNECTED:a.some(c=>c==="failed")?this.state=qe.FAILED:a.some(c=>c==="connecting")?this.state=qe.CONNECTING:a.every(c=>c==="closed")?this.state=qe.CLOSED:a.some(c=>c==="closed")?this.state=qe.CLOSING:a.every(c=>c==="new")&&(this.state=qe.NEW),o!==this.state&&(this.log.debug("pc state change: from ".concat(qe[o]," to ").concat(qe[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Pr((i=r.loggerName)!==null&&i!==void 0?i:Un.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new ib(e,r),this.subscriber=new ib(e,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,Mn.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,s,Mn.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,s)},this.subscriber.onTrack=s=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,s)},this.publisher.onOffer=s=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,s)},this.state=qe.NEW,this.connectionLock=new mn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return R(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return R(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return R(this,void 0,void 0,function*(){n===Mn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return R(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return R(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return R(this,void 0,void 0,function*(){return new Promise((n,r)=>R(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(to.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(to.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Mn.PUBLISHER?this.publisher.getConnectedAddress():e===Mn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return R(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((c,l)=>R(s,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),dt.clearTimeout(d),l(new Re("room connection has been cancelled",3))};i!=null&&i.signal.aborted&&u(),i==null||i.signal.addEventListener("abort",u);const d=dt.setTimeout(()=>{i==null||i.signal.removeEventListener("abort",u),l(new Re("could not establish pc connection"))},o);for(;this.state!==qe.CONNECTED;)if(yield Zn(50),i!=null&&i.signal.aborted){l(new Re("room connection has been cancelled",3));return}dt.clearTimeout(d),i==null||i.signal.removeEventListener("abort",u),c()}))}()})}}const fv=2e3;function Kd(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class yt extends Fi{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,D.Kind.Audio,n,r,s),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>R(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=Kd(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(H.AudioTrackFeatureUpdate,this,Wn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(H.AudioTrackFeatureUpdate,this,Wn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}setDeviceId(e){return R(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===kr(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||kr(e)===this._mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===D.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==kr(this._constraints.deviceId);return this.source===D.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return R(this,void 0,void 0,function*(){let n;if(e){const r=Wd({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return R(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){tn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},fv)))}setProcessor(e){return R(this,void 0,void 0,function*(){var n;const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(H.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return R(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return R(this,void 0,void 0,function*(){const e=yield n8(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(H.AudioSilenceDetected)),e})}}function Qw(t,e,n){switch(t.kind){case"audio":return new yt(t,e,!1,void 0,n);case"video":return new Mt(t,e,!1,n);default:throw new Kn("unsupported track type: ".concat(t.kind))}}const z8=Object.values(vc),$8=Object.values(tm),V8=Object.values(lv),q8=[vc.h180,vc.h360],H8=[tm.h180,tm.h360],W8=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new xe(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),cm=["q","h","f"];function lm(t,e,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;t&&(o=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!o&&!a&&!c||!e||!n)return[{}];o||(o=Q8(t,e,n,l),fe.debug("using video encoding",o));const u=new xe(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(c&&Ia(l)){const h=new Gw(c),p=[];if(h.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));const y=Rr();if(Ji()||Or()||(y==null?void 0:y.name)==="Chrome"&&yc(y==null?void 0:y.version,"113")<0){const k=h.suffix=="h"?2:3;for(let v=0;v<h.spatial;v+=1)p.push({rid:cm[2-v],maxBitrate:o.maxBitrate/Math.pow(k,v),maxFramerate:u.encoding.maxFramerate});p[0].scalabilityMode=c}else p.push({maxBitrate:o.maxBitrate,maxFramerate:u.encoding.maxFramerate,scalabilityMode:c});return u.encoding.priority&&(p[0].priority=u.encoding.priority,p[0].networkPriority=u.encoding.priority),fe.debug("using svc encoding",{encodings:p}),p}if(!a)return[o];let d=[];t?d=(i=ab(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:ob(t,u):d=(s=ab(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:ob(t,u);let f;if(d.length>0){const h=d[0];d.length>1&&([,f]=d);const p=Math.max(e,n);if(p>=960&&f)return ah(e,n,[h,f,u]);if(p>=480)return ah(e,n,[h,u])}return ah(e,n,[u])}function K8(t,e,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&fe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(s=a.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return lm(t.source===D.Source.ScreenShare,c,l,n)}function Q8(t,e,n,r){const i=G8(t,e,n);let{encoding:s}=i[0];const o=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(s=c.encoding,c.width>=o)break}if(r)switch(r){case"av1":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function G8(t,e,n){if(t)return V8;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?z8:$8}function ob(t,e){if(t)return W8(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?q8:H8}function ah(t,e,n){const r=[];if(n.forEach((i,s)=>{if(s>=cm.length)return;const o=Math.min(t,e),c={rid:cm[s],scaleResolutionDownBy:Math.max(1,o/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=yo()||s===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),Or()&&zw()==="ios"){let i;r.forEach(o=>{i?o.maxFramerate&&o.maxFramerate>i&&(i=o.maxFramerate):i=o.maxFramerate});let s=!0;r.forEach(o=>{var a;o.maxFramerate!=i&&(s&&(s=!1,fe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),fe.info('Setting framerate of encoding "'.concat((a=o.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),o.maxFramerate=i)})}return r}function ab(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class Gw{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function J8(t){return t.source===D.Source.ScreenShare||t.constraints.height&&kr(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const Y8=5e3;class Mt extends Fi{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,D.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>R(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const o=new Map(s.map(a=>[a.rid,a]));if(this.prevStats){let a=0;o.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=Kd(c,d)}),this._currentBitrate=a}this.prevStats=o}),this.senderLock=new mn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!tn())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},fv))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return R(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.pauseUpstream.call(this);try{for(var a=!0,c=xs(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)s=l.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return R(this,void 0,void 0,function*(){var n,r,i,s,o;yield e.resumeUpstream.call(this);try{for(var a=!0,c=xs(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;yield(o=u.sender)===null||o===void 0?void 0:o.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===D.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===D.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return R(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},a=r.get(i.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n.sort((i,s)=>{var o,a;return((o=s.frameWidth)!==null&&o!==void 0?o:0)-((a=i.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(e){const n=[];for(let r=pn.LOW;r<=pn.HIGH;r+=1)n.push(new iv({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return R(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===kr(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||kr(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){return R(this,void 0,void 0,function*(){var n,r,i,s;let o;if(e){const u=Wd({video:e});typeof u.video!="boolean"&&(o=u.video)}yield this.restart(o);try{for(var a=!0,c=xs(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return R(this,arguments,void 0,function(r){var i=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,a,c,l,u,d;if(yield n.setProcessor.call(i,r,s),!((u=i.processor)===null||u===void 0)&&u.processedTrack)try{for(var f=!0,h=xs(i.simulcastCodecs.values()),p;p=yield h.next(),o=p.done,!o;f=!0)l=p.value,f=!1,yield(d=l.sender)===null||d===void 0?void 0:d.replaceTrack(i.processor.processedTrack)}catch(y){a={error:y}}finally{try{!f&&!o&&(c=h.return)&&(yield c.call(h))}finally{if(a)throw a.error}}}()})}setDegradationPreference(e){return R(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},Y8))}setPublishingCodecs(e){return R(this,void 0,void 0,function*(){var n,r,i,s,o,a,c;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=xs(e);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield cb(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return l})}setPublishingLayers(e){return R(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield cb(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),Fw()&&this.isInBackground&&this.source===D.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function cb(t,e,n,r,i,s){return R(this,void 0,void 0,function*(){const o=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},s),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},s),{encodings:c,senderEncodings:e}));return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,f)=>{var h;let p=(h=d.rid)!==null&&h!==void 0?h:"";p===""&&(p="q");const y=Jw(p),k=n.find(v=>v.quality===y);k&&d.active!==k.enabled&&(l=!0,d.active=k.enabled,i.debug("setting layer ".concat(k.quality," to ").concat(d.active?"enabled":"disabled"),s),yo()&&(k.enabled?(d.scaleResolutionDownBy=e[f].scaleResolutionDownBy,d.maxBitrate=e[f].maxBitrate,d.maxFrameRate=e[f].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},s),{encodings:a.encodings})),yield t.setParameters(a))}finally{o()}})}function Jw(t){switch(t){case"f":return pn.HIGH;case"h":return pn.MEDIUM;case"q":return pn.LOW;default:return pn.HIGH}}function lb(t,e,n,r){if(!n)return[new Ui({quality:pn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new Gw(i),o=[],a=s.suffix=="h"?1.5:2,c=s.suffix=="h"?2:3;for(let l=0;l<s.spatial;l+=1)o.push(new Ui({quality:Math.min(pn.HIGH,s.spatial-1)-l,width:Math.ceil(t/Math.pow(a,l)),height:Math.ceil(e/Math.pow(a,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(c,l)):0,ssrc:0}));return o}return n.map(i=>{var s,o,a;const c=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let l=Jw((o=i.rid)!==null&&o!==void 0?o:"");return new Ui({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const ub="_lossy",db="_reliable",X8=2*1e3,ch="leave-reconnect";var xn;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(xn||(xn={}));class Z8 extends sr.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=dv.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=xn.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=fe,this.handleDataChannel=r=>R(this,[r],void 0,function(i){var s=this;let{channel:o}=i;return function*(){if(o){if(o.label===db)s.reliableDCSub=o;else if(o.label===ub)s.lossyDCSub=o;else return;s.log.debug("on data channel ".concat(o.id,", ").concat(o.label),s.logContext),o.onmessage=s.handleDataMessage}}()}),this.handleDataMessage=r=>R(this,void 0,void 0,function*(){var i,s;const o=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=RT.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(G.ActiveSpeakersUpdate,c.value.value.speakers):(((s=c.value)===null||s===void 0?void 0:s.case)==="user"&&tD(c,c.value.value),this.emit(G.DataPacketReceived,c))}finally{o()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?Rt.LOSSY:Rt.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(G.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){s(o);return}r===ch&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=dt.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===xn.Connected&&r();const s=()=>{this.off(G.Disconnected,o),r()},o=()=>{this.off(G.Restarted,s),i()};this.once(G.Restarted,s),this.once(G.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(G.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Ae.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Ss.RR_SIGNAL_DISCONNECTED))},this.log=Pr((n=e.loggerName)!==null&&n!==void 0?n:Un.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new uv(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new mn,this.dataProcessLock=new mn,this.dcBufferStatus=new Map([[Rt.LOSSY,!0],[Rt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(G.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(G.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(G.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(G.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(G.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(G.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(G.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(G.SignalRequestResponse,r)}get logContext(){var e,n,r,i,s,o,a,c;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity,pID:(c=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||c===void 0?void 0:c.sid}}join(e,n,r,i){return R(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),(!this.subscriberPrimary||s.fastPublish)&&this.negotiate(),this.clientConfiguration=s.clientConfiguration,s}catch(s){if(s instanceof Re&&s.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return R(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(G.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return R(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return R(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Kn("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new Re("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return R(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return R(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==qe.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new B8(i,e.subscriberPrimary,this.loggerOptions),this.emit(G.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(s,o)=>{this.client.sendIceCandidate(s,o)},this.pcManager.onPublisherOffer=s=>{this.client.sendOffer(s)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(s,o,a)=>R(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(s),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),s===qe.CONNECTED){const u=this.pcState===xn.New;this.pcState=xn.Connected,u&&this.emit(G.Connected,e)}else s===qe.FAILED&&this.pcState===xn.Connected&&(this.pcState=xn.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?Ss.RR_SUBSCRIBER_FAILED:Ss.RR_PUBLISHER_FAILED));const c=this.client.isDisconnected||this.client.currentState===Ae.RECONNECTING,l=[qe.FAILED,qe.CLOSING,qe.CLOSED].includes(s);c&&l&&!this._isClosed&&this.emit(G.Offline)}),this.pcManager.onTrack=s=>{this.emit(G.MediaTrackAdded,s.track,s.streams[0],s.receiver)},eD((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>R(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>R(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(G.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(G.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(G.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(G.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Ss.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Ys.DISCONNECT:this.emit(G.Disconnected,e==null?void 0:e.reason),this.close();break;case Ys.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(ch);break;case Ys.RESUME:this.handleDisconnect(ch)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===pc.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(ub,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(db,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return R(this,void 0,void 0,function*(){if(rm())return yield this.createTransceiverRTCRtpSender(e,n,r);if(im())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Ze("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return R(this,void 0,void 0,function*(){if(rm())return this.createSimulcastTransceiverSender(e,n,r,i);if(im())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Ze("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ze("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),e instanceof Mt&&(e.codec=n.videoCodec);const s={direction:"sendonly",streams:i};return r&&(s.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s)).sender})}createSimulcastTransceiverSender(e,n,r,i){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ze("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ze("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return R(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){fe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===pc.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:qe.NEW)===qe.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof Ze?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof ks||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",Ss.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(G.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return R(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new Ze("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(G.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new ks;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Re&&o.reason===0?new Ze("could not reconnect, token might be expired"):new ks}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(G.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==Ae.CONNECTED)throw new ks("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(G.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){return R(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Ze("could not reconnect, url or token not saved");if(!this.pcManager)throw new Ze("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(G.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let s="";throw i instanceof Error&&(s=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof Re&&i.reason===0?new Ze("could not reconnect, token might be expired"):i instanceof Re&&i.reason===4?i:new ks(s)}if(this.emit(G.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Ae.CONNECTED)throw new ks("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(G.Resumed)})}waitForPCInitialConnection(e,n){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new Ze("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return R(this,void 0,void 0,function*(){this.pcState=xn.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Zn(X8),!this.pcManager)throw new Ze("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=xn.Connected}catch(e){throw this.pcState=xn.Disconnected,new Re("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return R(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var s;if(!r.pcManager)throw new Ze("PC manager is closed");const o=i?r.pcManager.subscriber:r.pcManager.publisher,a=i?"Subscriber":"Publisher";if(!o)throw new Re("".concat(a," connection not set"));let c=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),c=!0),!c&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(c=!0),c&&r.negotiate();const l=r.dataChannelForKind(n,i);if((l==null?void 0:l.readyState)==="open")return;const u=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<u;){if(o.isICEConnected&&((s=r.dataChannelForKind(n,i))===null||s===void 0?void 0:s.readyState)==="open")return;yield Zn(50)}throw new Re("could not establish ".concat(a," connection, state: ").concat(o.getICEConnectionState()))}()})}ensurePublisherConnected(e){return R(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==qe.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return R(this,void 0,void 0,function*(){return new Promise((e,n)=>R(this,void 0,void 0,function*(){if(!this.pcManager){n(new Zp("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(G.Closing,i),this.pcManager.publisher.once(to.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const c=a.codec.toLowerCase();y8(c)&&o.set(a.payload,c)}),this.emit(G.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof Zp&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Ss.RR_UNKNOWN),n(s)}finally{this.off(G.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===Rt.LOSSY)return this.lossyDCSub;if(e===Rt.RELIABLE)return this.reliableDCSub}else{if(e===Rt.LOSSY)return this.lossyDC;if(e===Rt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array,l=new Array;e.forEach(u=>{u.isDesired!==a&&c.push(u.trackSid),u.isEnabled||l.push(u.trackSid)}),this.client.sendSyncState(new qT({answer:s?ed({sdp:s.sdp,type:s.type}):void 0,offer:o?ed({sdp:o.sdp,type:o.type}):void 0,subscription:new $d({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:s8(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new HT({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(Rt.LOSSY),Mn.PUBLISHER),n(this.dataChannelForKind(Rt.RELIABLE),Mn.PUBLISHER),n(this.dataChannelForKind(Rt.LOSSY,!0),Mn.SUBSCRIBER),n(this.dataChannelForKind(Rt.RELIABLE,!0),Mn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&dt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){tn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){tn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class ks extends Error{}function eD(t){return t!==void 0&&t>13}function tD(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class fb{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return om(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return R(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),fe.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return R(this,void 0,void 0,function*(){const n=yield fetch("".concat(nD(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Re("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function nD(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class Yw extends D{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?H.Muted:H.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(H.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return R(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),fv)),o8()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:s}=r;s&&this.rtpTimestamp!==s&&(this.emit(H.TimeSyncUpdate,{timestamp:i,rtpTimestamp:s}),this.rtpTimestamp=s)}};e()}}class no extends Yw{constructor(e,n,r,i,s,o){super(e,n,D.Kind.Audio,r,o),this.monitorReceiver=()=>R(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Kd(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Or()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Or())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return R(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(sm(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&sm(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(H.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(H.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return R(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const lh=100;class Da extends Yw{constructor(e,n,r,i,s){super(e,n,D.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>R(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=Kd(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=cv(()=>{this.updateDimensions()},lh),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?eo(this._mediaStreamTrack,n):Fs(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new rD(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return R(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(a=>a.pictureInPicture),o=this.elementInfos.some(a=>a.visible)&&!i||s;if(this.lastVisible!==o){if(!o&&Date.now()-r<lh){dt.setTimeout(()=>{this.updateVisibility()},lh);return}this.lastVisible=o,this.emit(H.VisibilityChanged,o,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,c=o.height()*s;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(H.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?Y1():n||(Y1()>2?2:1)}}class rD{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??hb(e),this.isPiP=tn()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=hb(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Z1().observe(this.element),X1().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=Z1())===null||e===void 0||e.unobserve(this.element),(n=X1())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function hb(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:s}=t,{opacity:o,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!s&&(o!==""?parseFloat(o)>0:!0)&&a!=="none"}class pr extends sr.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=dn.NONE,this.log=fe,this.handleMuted=()=>{this.emit(H.Muted)},this.handleUnmuted=()=>{this.emit(H.Unmuted)},this.log=Pr((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:Un.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=D.Source.Unknown}setTrack(e){this.track&&(this.track.off(H.Muted,this.handleMuted),this.track.off(H.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(H.Muted,this.handleMuted),e.on(H.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ee(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==dn.NONE}get audioTrack(){if(this.track instanceof yt||this.track instanceof no)return this.track}get videoTrack(){if(this.track instanceof Mt||this.track instanceof Da)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=D.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===D.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(pr||(pr={}));class bc extends pr{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(H.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(H.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(H.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){return R(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return R(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return R(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return R(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(this.track instanceof yt){const n=this.track.mediaStreamTrack.getSettings(),r=new Set;return n.autoGainControl&&r.add(Wn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(Wn.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(Wn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(Wn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(Wn.TF_STEREO),this.track.enhancedNoiseCancellation&&r.add(Wn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}var fn;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(fn||(fn={}));function iD(t){switch(t){case pa.EXCELLENT:return fn.Excellent;case pa.GOOD:return fn.Good;case pa.POOR:return fn.Poor;case pa.LOST:return fn.Lost;default:return fn.Unknown}}class Xw extends sr.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Zu.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Zu.STANDARD;var a;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=fn.Unknown,this.log=fe,this.log=Pr((a=s==null?void 0:s.loggerName)!==null&&a!==void 0?a:Un.Participant),this.loggerOptions=s,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=o,this._attributes={}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(D.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(D.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(D.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(U.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(U.ParticipantNameChanged,e)}_setAttributes(e){const n=a8(e,this.attributes);this._attributes=e,Object.keys(n).length>0&&this.emit(U.AttributesChanged,n)}setPermissions(e){var n,r,i,s,o;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(U.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(U.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=iD(e),n!==this._connectionQuality&&this.emit(U.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>(n.track instanceof no||n.track instanceof yt)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(H.Muted,()=>{this.emit(U.TrackMuted,e)}),e.on(H.Unmuted,()=>{this.emit(U.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case D.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case D.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function sD(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new $T({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class Sc extends Xw{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=dn.NONE,this.enabledPublishVideoCodecs=[],this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new $w)},this.handleReconnected=()=>{var s,o;(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.resolve)===null||o===void 0||o.call(s),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var s,o;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.reject)===null||o===void 0||o.call(s,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=s=>{const{requestId:o,reason:a,message:c}=s,l=this.pendingSignalRequests.get(o);l&&(a!==KT.OK&&l.reject(new Q1(c,a)),this.pendingSignalRequests.delete(o))},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(s=>sD(s)))},this.onTrackUnmuted=s=>{this.onTrackMuted(s,s.isUpstreamPaused)},this.onTrackMuted=(s,o)=>{if(o===void 0&&(o=!0),!s.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ee(s)));return}this.engine.updateMuteStatus(s.sid,o)},this.onTrackUpstreamPaused=s=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ee(s))),this.onTrackMuted(s,!0)},this.onTrackUpstreamResumed=s=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ee(s))),this.onTrackMuted(s,s.isMuted)},this.onTrackFeatureUpdate=s=>{const o=this.audioTrackPublications.get(s.sid);if(!o){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(s.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(o.trackSid,o.getTrackFeatures())},this.handleSubscribedQualityUpdate=s=>R(this,void 0,void 0,function*(){var o,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const f=this.videoTrackPublications.get(s.trackSid);if(!f){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}if(s.subscribedCodecs.length>0){if(!f.videoTrack)return;const k=yield f.videoTrack.setPublishingCodecs(s.subscribedCodecs);try{for(var h=!0,p=xs(k),y;y=yield p.next(),o=y.done,!o;h=!0){l=y.value,h=!1;const v=l;ZN(v)&&(this.log.debug("publish ".concat(v," for ").concat(f.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ee(f))),yield this.publishAdditionalCodecForTrack(f.videoTrack,v,f.options))}}catch(v){a={error:v}}finally{try{!h&&!o&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else s.subscribedQualities.length>0&&(yield(d=f.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(s.subscribedQualities))}),this.handleLocalTrackUnpublished=s=>{const o=this.trackPublications.get(s.trackSid);if(!o){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}this.unpublishTrack(o.track)},this.handleTrackEnded=s=>R(this,void 0,void 0,function*(){if(s.source===D.Source.ScreenShare||s.source===D.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ee(s))),this.unpublishTrack(s);else if(s.isUserProvided)yield s.mute();else if(s instanceof yt||s instanceof Mt)try{if(tn())try{const o=yield navigator==null?void 0:navigator.permissions.query({name:s.source===D.Source.Camera?"camera":"microphone"});if(o&&o.state==="denied")throw this.log.warn("user has revoked access to ".concat(s.source),Object.assign(Object.assign({},this.logContext),Ee(s))),o.onchange=()=>{o.state!=="denied"&&(s.isMuted||s.restartTrack(),o.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}s.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ee(s))),yield s.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ee(s))),yield s.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map,this.pendingSignalRequests=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==dn.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(G.RemoteMute,(n,r)=>{const i=this.trackPublications.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(G.Connected,this.handleReconnected).on(G.SignalRestarted,this.handleReconnected).on(G.SignalResumed,this.handleReconnected).on(G.Restarting,this.handleReconnecting).on(G.Resuming,this.handleReconnecting).on(G.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(G.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(G.Disconnected,this.handleDisconnected).on(G.SignalRequestResponse,this.handleSignalRequestResponse)}setMetadata(e){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return R(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:s,attributes:o}=n;return function*(){return new Promise((a,c)=>R(r,void 0,void 0,function*(){var l,u;try{let d=!1;const f=yield this.engine.client.sendUpdateLocalMetadata((l=i??this.metadata)!==null&&l!==void 0?l:"",(u=s??this.name)!==null&&u!==void 0?u:"",o),h=performance.now();for(this.pendingSignalRequests.set(f,{resolve:a,reject:p=>{c(p),d=!0},values:{name:s,metadata:i,attributes:o}});performance.now()-h<5e3&&!d;){if((!s||this.name===s)&&(!i||this.metadata===i)&&(!o||Object.entries(o).every(p=>{let[y,k]=p;return this.attributes[y]===k}))){this.pendingSignalRequests.delete(f),a();return}yield Zn(50)}c(new Q1("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&c(d)}}))}()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(D.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(D.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(D.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(U.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return R(this,void 0,void 0,function*(){this.encryptionType=e?dn.GCM:dn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){return R(this,void 0,void 0,function*(){var s,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrackPublication(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case D.Source.Camera:c=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case D.Source.Microphone:c=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case D.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Kn(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ee(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof Kn)&&this.emit(U.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===D.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrackPublication(D.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return R(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(D.Source.Camera)||this.pendingPublishing.has(D.Source.Microphone))){this.pendingPublishing.add(D.Source.Camera),this.pendingPublishing.add(D.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(D.Source.Camera),this.pendingPublishing.delete(D.Source.Microphone)}}})}createTracks(e){return R(this,void 0,void 0,function*(){var n,r;const i=jw(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),s=Wd(i);let o;try{o=yield navigator.mediaDevices.getUserMedia(s)}catch(a){throw a instanceof Error&&(s.audio&&(this.microphoneError=a),s.video&&(this.cameraError=a)),a}return s.audio&&(this.microphoneError=void 0,this.emit(U.AudioStreamAcquired)),s.video&&(this.cameraError=void 0),Promise.all(o.getTracks().map(a=>R(this,void 0,void 0,function*(){const c=a.kind==="audio";let l=c?i.audio:i.video;(typeof l=="boolean"||!l)&&(l={});let u;const d=c?s.audio:s.video;typeof d!="boolean"&&(u=d);const f=Qw(a,u,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return f.kind===D.Kind.Video?f.source=D.Source.Camera:f.kind===D.Kind.Audio&&(f.source=D.Source.Microphone,f.setAudioContext(this.audioContext)),f.mediaStream=o,l.processor&&(f instanceof yt?yield f.setProcessor(l.processor):yield f.setProcessor(l.processor)),f})))})}createScreenTracks(e){return R(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new av("getDisplayMedia not supported");e.resolution===void 0&&!h8()&&(e.resolution=lv.h1080fps30.resolution);const n=i8(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Kn("no video track found");const s=new Mt(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=D.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(U.AudioStreamAcquired);const a=new yt(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=D.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,n){return R(this,void 0,void 0,function*(){var r,i,s,o;e instanceof yt&&e.setAudioContext(this.audioContext),yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof Fi&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let h;switch(e.source){case D.Source.Microphone:h="audioinput";break;case D.Source.Camera:h="videoinput"}h&&this.activeDeviceMap.has(h)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(h)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new yt(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new Mt(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new Kn("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});let c;if(this.trackPublications.forEach(h=>{h.track&&h.track===e&&(c=h)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),Ee(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),Ee(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(s=n.dtx)!==null&&s!==void 0||(n.dtx=!1),(o=n.red)!==null&&o!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);!p8()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const f=this.publish(e,d,u);this.pendingPublishPromises.set(e,f);try{return yield f}catch(h){throw h}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){return R(this,void 0,void 0,function*(){var i,s,o,a,c,l,u,d,f,h;Array.from(this.trackPublications.values()).find(T=>e instanceof Fi&&T.source===e.source)&&e.source!==D.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Ee(e))),n.stopMicTrackOnMute&&e instanceof yt&&(e.stopOnMute=!0),e.source===D.Source.ScreenShare&&yo()&&(n.simulcast=!1),n.videoCodec==="av1"&&!u8()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!d8()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=am),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(T=>n.videoCodec===fu(T.mime))||(n.videoCodec=fu(this.enabledPublishVideoCodecs[0].mime)));const y=n.videoCodec;e.on(H.Muted,this.onTrackMuted),e.on(H.Unmuted,this.onTrackUnmuted),e.on(H.Ended,this.handleTrackEnded),e.on(H.UpstreamPaused,this.onTrackUpstreamPaused),e.on(H.UpstreamResumed,this.onTrackUpstreamResumed),e.on(H.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const k=new qp({cid:e.mediaStreamTrack.id,name:n.name,type:D.kindToProto(e.kind),muted:e.isMuted,source:D.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream});let v;if(e.kind===D.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const w=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:vc.h720.resolution;T={width:w.width,height:w.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ee(e)),{dims:T}))}k.width=T.width,k.height=T.height,e instanceof Mt&&(Ia(y)&&(e.source===D.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ee(e))))),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),k.simulcastCodecs=[new Vp({codec:y,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:am}),n.backupCodec&&y!==n.backupCodec.codec&&k.encryption===dn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),k.simulcastCodecs.push(new Vp({codec:n.backupCodec.codec,cid:""})))),v=lm(e.source===D.Source.ScreenShare,k.width,k.height,n),k.layers=lb(k.width,k.height,v,Ia(n.videoCodec))}else e.kind===D.Kind.Audio&&(v=[{maxBitrate:(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(h=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&h!==void 0?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new Ze("cannot publish track when not connected");const b=()=>R(this,void 0,void 0,function*(){var T,x,w;if(!this.engine.pcManager)throw new Ze("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,v),e instanceof Mt&&((T=n.degradationPreference)!==null&&T!==void 0||(n.degradationPreference=J8(e)),e.setDegradationPreference(n.degradationPreference)),v)if(yo()&&e.kind===D.Kind.Audio){let E;for(const P of this.engine.pcManager.publisher.getTransceivers())if(P.sender===e.sender){E=P;break}E&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:E,codec:"opus",maxbr:!((x=v[0])===null||x===void 0)&&x.maxBitrate?v[0].maxBitrate/1e3:0})}else e.codec&&Ia(e.codec)&&(!((w=v[0])===null||w===void 0)&&w.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:k.cid,codec:e.codec,maxbr:v[0].maxBitrate/1e3});yield this.engine.negotiate()});let S;if(this.enabledPublishVideoCodecs.length>0)S=(yield Promise.all([this.engine.addTrack(k),b()]))[0];else{S=yield this.engine.addTrack(k);let T;if(S.codecs.forEach(x=>{T===void 0&&(T=x.mimeType)}),T&&e.kind===D.Kind.Video){const x=fu(T);x!==y&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ee(e)),{codec:x})),n.videoCodec=x,v=lm(e.source===D.Source.ScreenShare,k.width,k.height,n))}yield b()}const C=new bc(e.kind,S,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return C.options=n,e.sid=S.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:v,trackInfo:S})),e instanceof Mt?e.startMonitor(this.engine.client):e instanceof yt&&e.startMonitor(),this.addTrackPublication(C),this.emit(U.LocalTrackPublished,C),C})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return R(this,void 0,void 0,function*(){var i;if(this.encryptionType!==dn.NONE)return;let s;if(this.trackPublications.forEach(h=>{h.track&&h.track===e&&(s=h)}),!s)throw new Kn("track is not published");if(!(e instanceof Mt))throw new Kn("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=K8(e,n,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ee(e)));return}const c=e.addSimulcastTrack(n,a);if(!c)return;const l=new qp({cid:c.mediaStreamTrack.id,type:D.kindToProto(e.kind),muted:e.isMuted,source:D.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=lb(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new Ze("cannot publish track when not connected");const u=()=>R(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,c,o,a),yield this.engine.negotiate()}),f=(yield Promise.all([this.engine.addTrack(l),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:f}))})}unpublishTrack(e,n){return R(this,void 0,void 0,function*(){var r,i;if(e instanceof Fi){const l=this.pendingPublishPromises.get(e);l&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ee(e))),yield l)}const s=this.getPublicationForTrack(e),o=s?Ee(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(H.Muted,this.onTrackMuted),e.off(H.Unmuted,this.onTrackUnmuted),e.off(H.Ended,this.handleTrackEnded),e.off(H.UpstreamPaused,this.onTrackUpstreamPaused),e.off(H.UpstreamResumed,this.onTrackUpstreamResumed),e.off(H.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<qe.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof Mt){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:l}))}switch(this.trackPublications.delete(s.trackSid),s.kind){case D.Kind.Audio:this.audioTrackPublications.delete(s.trackSid);break;case D.Kind.Video:this.videoTrackPublications.delete(s.trackSid);break}return this.emit(U.LocalTrackUnpublished,s),s.setTrack(void 0),a&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return R(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof bc)})}republishAllTracks(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){const s=[];r.trackPublications.forEach(o=>{o.track&&(n&&(o.options=Object.assign(Object.assign({},o.options),n)),s.push(o))}),yield Promise.all(s.map(o=>R(r,void 0,void 0,function*(){const a=o.track;yield this.unpublishTrack(a,!1),i&&!a.isMuted&&a.source!==D.Source.ScreenShare&&a.source!==D.Source.ScreenShareAudio&&(a instanceof yt||a instanceof Mt)&&!a.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:o.trackSid})),yield a.restartTrack()),yield this.publishTrack(a,o.options)})))}()})}publishData(e){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const s=i.reliable?Rt.RELIABLE:Rt.LOSSY,o=i.destinationIdentities,a=i.topic,c=new RT({kind:s,value:{case:"user",value:new MT({participantIdentity:r.identity,payload:n,destinationIdentities:o,topic:a})}});yield r.engine.sendDataPacket(c,s)}()})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const s=this.trackPublications.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ee(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof yt||i instanceof Mt)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}class kc extends pr{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=pn.HIGH,this.handleEnded=s=>{this.setTrack(void 0),this.emit(H.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensions=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new $d({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new IT({participantSid:"",trackSids:[this.trackSid]})]});this.emit(H.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?pr.SubscriptionStatus.Unsubscribed:super.isSubscribed?pr.SubscriptionStatus.Subscribed:pr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?pr.PermissionStatus.Allowed:pr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof Da&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof Da&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(H.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(H.VisibilityChanged,this.handleVisibilityChange),i.off(H.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(H.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(H.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(H.VisibilityChanged,this.handleVisibilityChange),e.on(H.Ended,this.handleEnded),this.emit(H.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(H.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?H.Muted:H.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(H.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(H.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===D.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof Da&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new jT({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=pn.HIGH,this.emit(H.UpdateSettings,e)}}class td extends Xw{static fromParticipantInfo(e,n,r){return new td(e,n.sid,n.identity,n.name,n.metadata,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,i,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Zu.STANDARD;super(n,r||"",i,s,o,a),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(H.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Ee(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(H.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(H.SubscriptionPermissionChanged,n=>{this.emit(U.TrackSubscriptionPermissionChanged,e,n)}),e.on(H.SubscriptionStatusChanged,n=>{this.emit(U.TrackSubscriptionStatusChanged,e,n)}),e.on(H.Subscribed,n=>{this.emit(U.TrackSubscribed,n,e)}),e.on(H.Unsubscribed,n=>{this.emit(U.TrackUnsubscribed,n,e)}),e.on(H.SubscriptionFailed,n=>{this.emit(U.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,o){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(U.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ee(a))),this.emit(U.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new Da(e,n,i,s):l=new no(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof no&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,o;let a=this.getTrackPublicationBySid(i.sid);if(a)a.updateInfo(i);else{const c=D.kindFromProto(i.type);if(!c)return;a=new kc(c,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.trackPublications.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==D.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ee(l),newTrack:Ee(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ee(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(U.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case D.Kind.Audio:this.audioTrackPublications.delete(e);break;case D.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(U.TrackUnpublished,r)}setAudioOutput(e){return R(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var i;r.track instanceof no&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var me;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(me||(me={}));const oD=4*1e3;class nd extends sr.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=me.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=fe,this.bufferedEvents=[],this.isResuming=!1,this.connect=(s,o,a)=>R(this,void 0,void 0,function*(){var c;if(!f8())throw Or()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const l=yield this.disconnectLock.lock();if(this.state===me.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(me.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==s&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),om(new URL(s))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new fb(s,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().then(f=>{var h;(h=this.regionUrlProvider)===null||h===void 0||h.setServerReportedRegions(f)}).catch(f=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:f}))}));const u=(f,h,p)=>R(this,void 0,void 0,function*(){var y,k;this.abortController&&this.abortController.abort();const v=new AbortController;this.abortController=v,l==null||l();try{yield this.attemptConnection(p??s,o,a,v),this.abortController=void 0,f()}catch(b){if(this.regionUrlProvider&&b instanceof Re&&b.reason!==3&&b.reason!==0){let S=null;try{S=yield this.regionUrlProvider.getNextBestRegionUrl((y=this.abortController)===null||y===void 0?void 0:y.signal)}catch(C){if(C instanceof Re&&(C.status===401||C.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(C);return}}S&&!(!((k=this.abortController)===null||k===void 0)&&k.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(b.message,". Retrying with another region: ").concat(S),this.logContext),this.recreateEngine(),yield u(f,h,S)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(b))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(b)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new $w((f,h)=>{u(f,h,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(s,o,a,c,l,u)=>R(this,void 0,void 0,function*(){var d,f,h;const p=yield a.join(s,o,{autoSubscribe:c.autoSubscribe,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let y=p.serverInfo;if(y||(y={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(y).map(k=>{let[v,b]=k;return"".concat(v,": ").concat(b)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(f=p.room)===null||f===void 0?void 0:f.sid,identity:(h=p.participant)===null||h===void 0?void 0:h.identity}),!p.serverVersion)throw new WN("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),p}),this.applyJoinResponse=s=>{const o=s.participant;if(this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.localParticipant.setEnabledPublishCodecs(s.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(s.sifTrailer)}catch(a){this.log.error(a instanceof Error?a.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:a}))}this.handleParticipantUpdates([o,...s.otherParticipants]),s.room&&this.handleRoomUpdate(s.room)},this.attemptConnection=(s,o,a,c)=>R(this,void 0,void 0,function*(){var l,u,d;this.state===me.Reconnecting||this.isResuming||!((l=this.engine)===null||l===void 0)&&l.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((u=this.regionUrlProvider)===null||u===void 0)&&u.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},dv),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const f=yield this.connectSignal(s,o,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(f),this.setupLocalParticipantEvents(),this.emit(L.SignalConnected)}catch(f){yield this.engine.close(),this.recreateEngine();const h=new Re("could not establish signal connection");throw f instanceof Error&&(h.message="".concat(h.message,": ").concat(f.message)),f instanceof Re&&(h.reason=f.reason,h.status=f.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:f})),h}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Re("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(f){throw yield this.engine.close(),this.recreateEngine(),f}tn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),tn()&&(document.addEventListener("freeze",this.onPageLeave),(d=navigator.mediaDevices)===null||d===void 0||d.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(me.Connected),this.emit(L.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return R(n,[...o],void 0,function(){var c=this;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var u,d,f,h;const p=yield c.disconnectLock.lock();try{if(c.state===me.Disconnected){c.log.debug("already disconnected",c.logContext);return}c.log.info("disconnect from room",Object.assign({},c.logContext)),(c.state===me.Connecting||c.state===me.Reconnecting||c.isResuming)&&(c.log.warn("abort connection attempt",c.logContext),(u=c.abortController)===null||u===void 0||u.abort(),(f=(d=c.connectFuture)===null||d===void 0?void 0:d.reject)===null||f===void 0||f.call(d,new Re("Client initiated disconnect")),c.connectFuture=void 0),!((h=c.engine)===null||h===void 0)&&h.client.isDisconnected||(yield c.engine.client.sendLeave()),c.engine&&(yield c.engine.close()),c.handleDisconnect(l,Js.CLIENT_INITIATED),c.engine=void 0}finally{p()}}()})},this.onPageLeave=()=>R(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>R(this,void 0,void 0,function*(){const s=[],o=Rr();if(o&&o.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=rh();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(L.Disconnected,()=>{c==null||c.remove(),c=null})}s.push(c)}this.remoteParticipants.forEach(a=>{a.audioTrackPublications.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{s.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...s.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>R(this,void 0,void 0,function*(){const s=[];for(const o of this.remoteParticipants.values())o.videoTrackPublications.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{s.includes(l)||s.push(l)})});yield Promise.all(s.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const s of this.remoteParticipants.values())this.handleParticipantDisconnected(s.identity,s);this.setAndEmitConnectionState(me.Reconnecting)&&this.emit(L.Reconnecting)},this.handleSignalRestarted=s=>R(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(s.serverRegion),Object.assign(Object.assign({},this.logContext),{region:s.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(s);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:s.serverRegion}))}catch{return}this.setAndEmitConnectionState(me.Connected),this.emit(L.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=s=>{s.forEach(o=>{var a;if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}o.identity===""&&(o.identity=(a=this.sidToIdentity.get(o.sid))!==null&&a!==void 0?a:"");let c=this.remoteParticipants.get(o.identity);o.state===zp.DISCONNECTED?this.handleParticipantDisconnected(o.identity,c):c=this.getOrCreateParticipant(o.identity,o)})},this.handleActiveSpeakersUpdate=s=>{const o=[],a={};s.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const l=this.getRemoteParticipantBySid(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),o.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(L.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=s=>{const o=new Map;this.activeSpeakers.forEach(c=>{const l=this.remoteParticipants.get(c.identity);l&&l.sid!==c.sid||o.set(c.sid,c)}),s.forEach(c=>{let l=this.getRemoteParticipantBySid(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?o.set(c.sid,l):o.delete(c.sid))});const a=Array.from(o.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(L.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=s=>{s.streamStates.forEach(o=>{const a=this.getRemoteParticipantBySid(o.participantSid);if(!a)return;const c=a.getTrackPublicationBySid(o.trackSid);!c||!c.track||(c.track.streamState=D.streamStateFromProto(o.state),a.emit(U.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(L.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=s=>{const o=this.getRemoteParticipantBySid(s.participantSid);if(!o)return;const a=o.getTrackPublicationBySid(s.trackSid);a&&a.setAllowed(s.allowed)},this.handleSubscriptionError=s=>{const o=Array.from(this.remoteParticipants.values()).find(c=>c.trackPublications.has(s.trackSid));if(!o)return;const a=o.getTrackPublicationBySid(s.trackSid);a&&a.setSubscriptionError(s.err)},this.handleDataPacket=s=>{const o=this.remoteParticipants.get(s.participantIdentity);s.value.case==="user"?this.handleUserPacket(o,s.value.value,s.kind):s.value.case==="transcription"?this.handleTranscription(o,s.value.value):s.value.case==="sipDtmf"&&this.handleSipDtmf(o,s.value.value)},this.handleUserPacket=(s,o,a)=>{this.emit(L.DataReceived,o.payload,s,a,o.topic),s==null||s.emit(U.DataReceived,o.payload,a)},this.handleSipDtmf=(s,o)=>{this.emit(L.SipDTMFReceived,o,s),s==null||s.emit(U.SipDTMFReceived,o)},this.bufferedSegments=new Map,this.handleTranscription=(s,o)=>{const a=o.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(o.transcribedParticipantIdentity),c=a==null?void 0:a.trackPublications.get(o.trackId),l=S8(o,this.transcriptionReceivedTimes);c==null||c.emit(H.TranscriptionReceived,l),a==null||a.emit(U.TranscriptionReceived,l,c),this.emit(L.TranscriptionReceived,l,a,c)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(L.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=s=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:s})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(L.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(L.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(L.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>R(this,void 0,void 0,function*(){this.emit(L.MediaDevicesChanged)}),this.handleRoomUpdate=s=>{const o=this.roomInfo;this.roomInfo=s,o&&o.metadata!==s.metadata&&this.emitWhenConnected(L.RoomMetadataChanged,s.metadata),(o==null?void 0:o.activeRecording)!==s.activeRecording&&this.emitWhenConnected(L.RecordingStatusChanged,s.activeRecording)},this.handleConnectionQualityUpdate=s=>{s.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const a=this.getRemoteParticipantBySid(o.participantSid);a&&a.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=s=>{this.emit(L.ParticipantMetadataChanged,s,this.localParticipant)},this.onLocalParticipantNameChanged=s=>{this.emit(L.ParticipantNameChanged,s,this.localParticipant)},this.onLocalAttributesChanged=s=>{this.emit(L.ParticipantAttributesChanged,s,this.localParticipant)},this.onLocalTrackMuted=s=>{this.emit(L.TrackMuted,s,this.localParticipant)},this.onLocalTrackUnmuted=s=>{this.emit(L.TrackUnmuted,s,this.localParticipant)},this.onTrackProcessorUpdate=s=>{var o;(o=s==null?void 0:s.onPublish)===null||o===void 0||o.call(s,this)},this.onLocalTrackPublished=s=>R(this,void 0,void 0,function*(){var o,a,c,l,u;(o=s.track)===null||o===void 0||o.on(H.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=(c=(a=s.track)===null||a===void 0?void 0:a.getProcessor())===null||c===void 0?void 0:c.onPublish)===null||l===void 0||l.call(c,this),this.emit(L.LocalTrackPublished,s,this.localParticipant),s.track instanceof yt&&(yield s.track.checkForSilence())&&this.emit(L.LocalAudioSilenceDetected,s);const d=yield(u=s.track)===null||u===void 0?void 0:u.getDeviceId(),f=r8(s.source);f&&d&&d!==this.localParticipant.activeDeviceMap.get(f)&&(this.localParticipant.activeDeviceMap.set(f,d),this.emit(L.ActiveDeviceChanged,f,d))}),this.onLocalTrackUnpublished=s=>{var o;(o=s.track)===null||o===void 0||o.off(H.TrackProcessorUpdate,this.onTrackProcessorUpdate),this.emit(L.LocalTrackUnpublished,s,this.localParticipant)},this.onLocalConnectionQualityChanged=s=>{this.emit(L.ConnectionQualityChanged,s,this.localParticipant)},this.onMediaDevicesError=s=>{this.emit(L.MediaDevicesError,s)},this.onLocalParticipantPermissionsChanged=s=>{this.emit(L.ParticipantPermissionsChanged,s,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},F8),e),this.log=Pr((r=this.options.loggerName)!==null&&r!==void 0?r:Un.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},Ww),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},Kw),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},U8),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new mn,this.localParticipant=new Sc("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",kr(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",kr(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",kr(this.options.audioOutput.deviceId)).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return R(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new C8(this.options.e2ee),this.e2eeManager.on(Gr.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof Sc&&(this.isE2EEEnabled=n),this.emit(L.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Gr.EncryptionError,n=>this.emit(L.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return R(this,void 0,void 0,function*(){return this.state===me.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(G.RoomUpdate,r),e(i.sid))};this.engine.on(G.RoomUpdate,r),this.once(L.Disconnected,()=>{this.engine.off(G.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Z8(this.options),this.engine.on(G.ParticipantUpdate,this.handleParticipantUpdates).on(G.RoomUpdate,this.handleRoomUpdate).on(G.SpeakersChanged,this.handleSpeakersChanged).on(G.StreamStateChanged,this.handleStreamStateUpdate).on(G.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(G.SubscriptionError,this.handleSubscriptionError).on(G.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(G.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(G.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(G.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(G.DataPacketReceived,this.handleDataPacket).on(G.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(me.SignalReconnecting)&&this.emit(L.SignalReconnecting)}).on(G.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(me.Connected)&&this.emit(L.Reconnected)}).on(G.SignalResumed,()=>{this.bufferedEvents=[],(this.state===me.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(G.Restarting,this.handleRestarting).on(G.SignalRestarted,this.handleSignalRestarted).on(G.Offline,()=>{this.setAndEmitConnectionState(me.Reconnecting)&&this.emit(L.Reconnecting)}).on(G.DCBufferStatusChanged,(e,n)=>{this.emit(L.DCBufferStatusChanged,e,n)}).on(G.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(U.LocalTrackSubscribed,n),this.emitWhenConnected(L.LocalTrackSubscribed,n,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return St.getInstance().getDevices(e,n)}prepareConnection(e,n){return R(this,void 0,void 0,function*(){if(this.state===me.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(om(new URL(e))&&n){this.regionUrlProvider=new fb(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===me.Disconnected&&(this.regionUrl=r,yield fetch(tb(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(tb(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return R(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Vn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Vn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Vn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Vn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>R(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Vn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>R(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Vn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Vn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>R(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new Vd({reason:Js.CLIENT_INITIATED,action:Ys.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Vn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break;case"leave-full-reconnect":i=new Vn({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return R(this,arguments,void 0,function(r,i){var s=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,c,l,u;let d=!1,f=!0;const h=o?{exact:i}:i;if(r==="audioinput"){const p=s.options.audioCaptureDefaults.deviceId;s.options.audioCaptureDefaults.deviceId=h,d=p!==h;const y=Array.from(s.localParticipant.audioTrackPublications.values()).filter(k=>k.source===D.Source.Microphone);try{f=(yield Promise.all(y.map(k=>{var v;return(v=k.audioTrack)===null||v===void 0?void 0:v.setDeviceId(h)}))).every(k=>k===!0)}catch(k){throw s.options.audioCaptureDefaults.deviceId=p,k}}else if(r==="videoinput"){const p=s.options.videoCaptureDefaults.deviceId;s.options.videoCaptureDefaults.deviceId=h,d=p!==h;const y=Array.from(s.localParticipant.videoTrackPublications.values()).filter(k=>k.source===D.Source.Camera);try{f=(yield Promise.all(y.map(k=>{var v;return(v=k.videoTrack)===null||v===void 0?void 0:v.setDeviceId(h)}))).every(k=>k===!0)}catch(k){throw s.options.videoCaptureDefaults.deviceId=p,k}}else if(r==="audiooutput"){if(!sm()&&!s.options.webAudioMix||s.options.webAudioMix&&s.audioContext&&!("setSinkId"in s.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");s.options.webAudioMix&&(i=(a=yield St.getInstance().normalizeDeviceId("audiooutput",i))!==null&&a!==void 0?a:""),(c=(u=s.options).audioOutput)!==null&&c!==void 0||(u.audioOutput={});const p=s.options.audioOutput.deviceId;s.options.audioOutput.deviceId=i,d=p!==h;try{s.options.webAudioMix&&((l=s.audioContext)===null||l===void 0||l.setSinkId(i)),yield Promise.all(Array.from(s.remoteParticipants.values()).map(y=>y.setAudioOutput({deviceId:i})))}catch(y){throw s.options.audioOutput.deviceId=p,y}}return d&&f&&(s.localParticipant.activeDeviceMap.set(r,i),s.emit(L.ActiveDeviceChanged,r,i)),f}()})}setupLocalParticipantEvents(){this.localParticipant.on(U.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(U.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(U.AttributesChanged,this.onLocalAttributesChanged).on(U.TrackMuted,this.onLocalTrackMuted).on(U.TrackUnmuted,this.onLocalTrackUnmuted).on(U.LocalTrackPublished,this.onLocalTrackPublished).on(U.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(U.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(U.MediaDevicesError,this.onMediaDevicesError).on(U.AudioStreamAcquired,this.startAudio).on(U.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===me.Connecting||this.state===me.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(L.Reconnected,u),this.off(L.Connected,u),this.off(L.Disconnected,d)};this.once(L.Reconnected,u),this.once(L.Connected,u),this.once(L.Disconnected,d);return}if(this.state===me.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=l8(n.id),s=i[0];let o=i[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=Array.from(this.remoteParticipants.values()).find(u=>u.sid===s);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==me.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var s,o;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop())}),this.localParticipant.off(U.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(U.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(U.AttributesChanged,this.onLocalAttributesChanged).off(U.TrackMuted,this.onLocalTrackMuted).off(U.TrackUnmuted,this.onLocalTrackUnmuted).off(U.LocalTrackPublished,this.onLocalTrackPublished).off(U.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(U.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(U.MediaDevicesError,this.onMediaDevicesError).off(U.AudioStreamAcquired,this.startAudio).off(U.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),tn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(me.Disconnected),this.emit(L.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(L.ParticipantDisconnected,n))}acquireAudioContext(){return R(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=Uw())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(L.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=td.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new td(this.engine.client,"",e,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const i=this.remoteParticipants.get(e);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(L.ParticipantConnected,r),r.on(U.TrackPublished,i=>{this.emitWhenConnected(L.TrackPublished,i,r)}).on(U.TrackSubscribed,(i,s)=>{i.kind===D.Kind.Audio?(i.on(H.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(H.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===D.Kind.Video&&(i.on(H.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(H.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(L.TrackSubscribed,i,s,r)}).on(U.TrackUnpublished,i=>{this.emit(L.TrackUnpublished,i,r)}).on(U.TrackUnsubscribed,(i,s)=>{this.emit(L.TrackUnsubscribed,i,s,r)}).on(U.TrackSubscriptionFailed,i=>{this.emit(L.TrackSubscriptionFailed,i,r)}).on(U.TrackMuted,i=>{this.emitWhenConnected(L.TrackMuted,i,r)}).on(U.TrackUnmuted,i=>{this.emitWhenConnected(L.TrackUnmuted,i,r)}).on(U.ParticipantMetadataChanged,i=>{this.emitWhenConnected(L.ParticipantMetadataChanged,i,r)}).on(U.ParticipantNameChanged,i=>{this.emitWhenConnected(L.ParticipantNameChanged,i,r)}).on(U.AttributesChanged,i=>{this.emitWhenConnected(L.ParticipantAttributesChanged,i,r)}).on(U.ConnectionQualityChanged,i=>{this.emitWhenConnected(L.ConnectionQualityChanged,i,r)}).on(U.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(L.ParticipantPermissionsChanged,i,r)}).on(U.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(L.TrackSubscriptionStatusChanged,i,s,r)}).on(U.TrackSubscriptionFailed,(i,s)=>{this.emit(L.TrackSubscriptionFailed,i,r,s)}).on(U.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(L.TrackSubscriptionPermissionChanged,i,s,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&n instanceof kc&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=dt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Js.STATE_MISMATCH))):e=0},oD)}clearConnectionReconcile(){this.connectionReconcileInterval&&dt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(L.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===me.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===me.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return R(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new ev({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:it.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new mc({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(L.SignalConnected),this.emit(L.Connected),this.setAndEmitConnectionState(me.Connected),i.video){const o=new bc(D.Kind.Video,new Us({source:vt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:On.AUDIO,name:"video-dummy"}),new Mt(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:eb(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(U.LocalTrackPublished,o)}if(i.audio){const o=new bc(D.Kind.Audio,new Us({source:vt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:On.AUDIO}),new yt(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:rh(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(U.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new mc({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:zp.ACTIVE,tracks:[],joinedAt:it.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(s.video){const l=eb(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new Us({source:vt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:On.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}if(s.audio){const l=rh(),u=new Us({source:vt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:On.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==L.ActiveSpeakersChanged){const s=Zw(r).filter(o=>o!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}}function Zw(t){return t.map(e=>{if(e)return Array.isArray(e)?Zw(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var Pn;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Pn||(Pn={}));class Mo extends sr.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Pn.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new nd(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return R(this,void 0,void 0,function*(){if(this.status!==Pn.IDLE)throw Error("check is running already");this.setStatus(Pn.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Pn.SKIPPED&&this.setStatus(this.isSuccess()?Pn.SUCCESS:Pn.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return R(this,void 0,void 0,function*(){return this.room.state===me.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return R(this,void 0,void 0,function*(){this.room&&this.room.state!==me.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Pn.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function eE(t){return R(this,void 0,void 0,function*(){var e,n;t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=jw(t,Ww,Kw),i=Wd(r),s=navigator.mediaDevices.getUserMedia(i);t.audio&&(St.userMediaPromiseMap.set("audioinput",s),s.catch(()=>St.userMediaPromiseMap.delete("audioinput"))),t.video&&(St.userMediaPromiseMap.set("videoinput",s),s.catch(()=>St.userMediaPromiseMap.delete("videoinput")));const o=yield s;return Promise.all(o.getTracks().map(a=>R(this,void 0,void 0,function*(){const c=a.kind==="audio";let l=c?t.audio:t.video;(typeof l=="boolean"||!l)&&(l={});let u;const d=c?i.audio:i.video;typeof d!="boolean"&&(u=d),u?u.deviceId=a.getSettings().deviceId:u={deviceId:a.getSettings().deviceId};const f=Qw(a,u);return f.kind===D.Kind.Video?f.source=D.Source.Camera:f.kind===D.Kind.Audio&&(f.source=D.Source.Microphone),f.mediaStream=o,l.processor&&(f instanceof yt?yield f.setProcessor(l.processor):f instanceof Mt&&(yield f.setProcessor(l.processor))),f})))})}function aD(t){return R(this,void 0,void 0,function*(){return(yield eE({audio:!1,video:t}))[0]})}function cD(t){return R(this,void 0,void 0,function*(){return(yield eE({audio:t,video:!1}))[0]})}class lD extends Mo{get description(){return"Can publish audio"}perform(){return R(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield cD();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="audio"||!o.kind&&o.mediaType==="audio")&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," audio packets"))})}}class uD extends Mo{get description(){return"Can publish video"}perform(){return R(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield aD();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,5e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(s+=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}}class dD extends Mo{get description(){return"Resuming connection after interruption"}perform(){return R(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(l=>{setTimeout(l,5e3),s=l}),a=()=>{r=!0};n.on(L.SignalReconnecting,a).on(L.Reconnecting,a).on(L.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const c=n.engine.client.onClose;if(c&&c(""),yield o,r){if(!i||n.state!==me.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class fD extends Mo{get description(){return"Can connect via TURN"}perform(){return R(this,void 0,void 0,function*(){var e,n;const r=new uv,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,o=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(o=!0,a=!0):l.startsWith("turns:")&&(o=!0,a=!0,s=!0),l.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class hD extends Mo{get description(){return"Establishing WebRTC connection"}perform(){return R(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(L.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,s)=>{if(i.candidate){const o=new RTCIceCandidate(i);let a="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(pD(o.address)?a+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(e=!0,a+=" (passive)"):o.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),fe.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function pD(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class mD extends Mo{get description(){return"Connecting to signal connection via WebSocket"}perform(){return R(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new uv;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===NT.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class z9 extends sr.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Pn.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Pn.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return R(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(mD)})}checkWebRTC(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(hD)})}checkTURN(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(fD)})}checkReconnect(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(dD)})}checkPublishAudio(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(lD)})}checkPublishVideo(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(uD)})}}function gD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof Fi?t.mediaStreamTrack:t,i=r.getSettings();let s={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const o=i.facingMode;fe.trace("rawFacingMode",{rawFacingMode:o}),o&&typeof o=="string"&&bD(o)&&(s={facingMode:o,confidence:"high"})}if(["low","medium"].includes(s.confidence)){fe.trace("Try to get facing mode from device label: (".concat(r.label,")"));const o=yD(r.label);o!==void 0&&(s=o)}return s}const pb=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),vD=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function yD(t){var e;const n=t.trim().toLowerCase();if(n!=="")return pb.has(n)?pb.get(n):(e=Array.from(vD.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function bD(t){return t===void 0||["user","environment","left","right"].includes(t)}const um=Math.min,ro=Math.max,rd=Math.round,di=t=>({x:t,y:t}),SD={left:"right",right:"left",bottom:"top",top:"bottom"},kD={start:"end",end:"start"};function mb(t,e,n){return ro(t,um(e,n))}function Qd(t,e){return typeof t=="function"?t(e):t}function Yi(t){return t.split("-")[0]}function Gd(t){return t.split("-")[1]}function tE(t){return t==="x"?"y":"x"}function nE(t){return t==="y"?"height":"width"}function bo(t){return["top","bottom"].includes(Yi(t))?"y":"x"}function rE(t){return tE(bo(t))}function CD(t,e,n){n===void 0&&(n=!1);const r=Gd(t),i=rE(t),s=nE(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=id(o)),[o,id(o)]}function xD(t){const e=id(t);return[dm(t),e,dm(e)]}function dm(t){return t.replace(/start|end/g,e=>kD[e])}function TD(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function wD(t,e,n,r){const i=Gd(t);let s=TD(Yi(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(dm)))),s}function id(t){return t.replace(/left|right|bottom|top/g,e=>SD[e])}function ED(t){return{top:0,right:0,bottom:0,left:0,...t}}function _D(t){return typeof t!="number"?ED(t):{top:t,right:t,bottom:t,left:t}}function sd(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function gb(t,e,n){let{reference:r,floating:i}=t;const s=bo(e),o=rE(e),a=nE(o),c=Yi(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Gd(e)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const PD=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=gb(l,r,c),f=r,h={},p=0;for(let y=0;y<a.length;y++){const{name:k,fn:v}=a[y],{x:b,y:S,data:C,reset:T}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:t,floating:e}});u=b??u,d=S??d,h={...h,[k]:{...h[k],...C}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:u,y:d}=gb(l,f,c)),y=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function iE(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Qd(e,t),p=_D(h),k=a[f?d==="floating"?"reference":"floating":d],v=sd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},T=sd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:S,strategy:c}):b);return{top:(v.top-T.top+p.top)/C.y,bottom:(T.bottom-v.bottom+p.bottom)/C.y,left:(v.left-T.left+p.left)/C.x,right:(T.right-v.right+p.right)/C.x}}const RD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:y=!0,...k}=Qd(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Yi(i),b=bo(a),S=Yi(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(l.floating)),T=f||(S||!y?[id(a)]:xD(a)),x=p!=="none";!f&&x&&T.push(...wD(a,y,p,C));const w=[a,...T],E=await iE(e,k),P=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(E[v]),d){const V=CD(i,o,C);P.push(E[V[0]],E[V[1]])}if(M=[...M,{placement:i,overflows:P}],!P.every(V=>V<=0)){var I,A;const V=(((I=s.flip)==null?void 0:I.index)||0)+1,ne=w[V];if(ne)return{data:{index:V,overflows:M},reset:{placement:ne}};let ee=(A=M.filter(Z=>Z.overflows[0]<=0).sort((Z,z)=>Z.overflows[1]-z.overflows[1])[0])==null?void 0:A.placement;if(!ee)switch(h){case"bestFit":{var q;const Z=(q=M.filter(z=>{if(x){const Q=bo(z.placement);return Q===b||Q==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Q=>Q>0).reduce((Q,W)=>Q+W,0)]).sort((z,Q)=>z[1]-Q[1])[0])==null?void 0:q[0];Z&&(ee=Z);break}case"initialPlacement":ee=a;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};async function OD(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yi(n),a=Gd(n),c=bo(n)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,d=Qd(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const MD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await OD(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},ID=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:v,y:b}=k;return{x:v,y:b}}},...c}=Qd(t,e),l={x:n,y:r},u=await iE(e,c),d=bo(Yi(i)),f=tE(d);let h=l[f],p=l[d];if(s){const k=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=h+u[k],S=h-u[v];h=mb(b,h,S)}if(o){const k=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=p+u[k],S=p-u[v];p=mb(b,p,S)}const y=a.fn({...e,[f]:h,[d]:p});return{...y,data:{x:y.x-n,y:y.y-r}}}}};function Io(t){return sE(t)?(t.nodeName||"").toLowerCase():"#document"}function nn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ki(t){var e;return(e=(sE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sE(t){return t instanceof Node||t instanceof nn(t).Node}function Fn(t){return t instanceof Element||t instanceof nn(t).Element}function rr(t){return t instanceof HTMLElement||t instanceof nn(t).HTMLElement}function vb(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof nn(t).ShadowRoot}function jc(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Bn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function ND(t){return["table","td","th"].includes(Io(t))}function Jd(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function hv(t){const e=pv(),n=Fn(t)?Bn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function DD(t){let e=fi(t);for(;rr(e)&&!So(e);){if(hv(e))return e;if(Jd(e))return null;e=fi(e)}return null}function pv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function So(t){return["html","body","#document"].includes(Io(t))}function Bn(t){return nn(t).getComputedStyle(t)}function Yd(t){return Fn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fi(t){if(Io(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vb(t)&&t.host||ki(t);return vb(e)?e.host:e}function oE(t){const e=fi(t);return So(e)?t.ownerDocument?t.ownerDocument.body:t.body:rr(e)&&jc(e)?e:oE(e)}function fm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=oE(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=nn(i);if(s){const a=AD(o);return e.concat(o,o.visualViewport||[],jc(i)?i:[],a&&n?fm(a):[])}return e.concat(i,fm(i,[],n))}function AD(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aE(t){const e=Bn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=rr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=rd(n)!==s||rd(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function cE(t){return Fn(t)?t:t.contextElement}function io(t){const e=cE(t);if(!rr(e))return di(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=aE(e);let o=(s?rd(n.width):n.width)/r,a=(s?rd(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LD=di(0);function lE(t){const e=nn(t);return!pv()||!e.visualViewport?LD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==nn(t)?!1:e}function Cc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=cE(t);let o=di(1);e&&(r?Fn(r)&&(o=io(r)):o=io(t));const a=jD(s,n,r)?lE(s):di(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=nn(s),h=r&&Fn(r)?nn(r):r;let p=f,y=p.frameElement;for(;y&&r&&h!==p;){const k=io(y),v=y.getBoundingClientRect(),b=Bn(y),S=v.left+(y.clientLeft+parseFloat(b.paddingLeft))*k.x,C=v.top+(y.clientTop+parseFloat(b.paddingTop))*k.y;c*=k.x,l*=k.y,u*=k.x,d*=k.y,c+=S,l+=C,p=nn(y),y=p.frameElement}}return sd({width:u,height:d,x:c,y:l})}function UD(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ki(r),a=e?Jd(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=di(1);const u=di(0),d=rr(r);if((d||!d&&!s)&&((Io(r)!=="body"||jc(o))&&(c=Yd(r)),rr(r))){const f=Cc(r);l=io(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function FD(t){return Array.from(t.getClientRects())}function uE(t){return Cc(ki(t)).left+Yd(t).scrollLeft}function BD(t){const e=ki(t),n=Yd(t),r=t.ownerDocument.body,i=ro(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ro(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uE(t);const a=-n.scrollTop;return Bn(r).direction==="rtl"&&(o+=ro(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function zD(t,e){const n=nn(t),r=ki(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=pv();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function $D(t,e){const n=Cc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=rr(t)?io(t):di(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function yb(t,e,n){let r;if(e==="viewport")r=zD(t,n);else if(e==="document")r=BD(ki(t));else if(Fn(e))r=$D(e,n);else{const i=lE(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return sd(r)}function dE(t,e){const n=fi(t);return n===e||!Fn(n)||So(n)?!1:Bn(n).position==="fixed"||dE(n,e)}function VD(t,e){const n=e.get(t);if(n)return n;let r=fm(t,[],!1).filter(a=>Fn(a)&&Io(a)!=="body"),i=null;const s=Bn(t).position==="fixed";let o=s?fi(t):t;for(;Fn(o)&&!So(o);){const a=Bn(o),c=hv(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||jc(o)&&!c&&dE(t,o))?r=r.filter(u=>u!==o):i=a,o=fi(o)}return e.set(t,r),r}function qD(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Jd(e)?[]:VD(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=yb(e,u,i);return l.top=ro(d.top,l.top),l.right=um(d.right,l.right),l.bottom=um(d.bottom,l.bottom),l.left=ro(d.left,l.left),l},yb(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HD(t){const{width:e,height:n}=aE(t);return{width:e,height:n}}function WD(t,e,n){const r=rr(e),i=ki(e),s=n==="fixed",o=Cc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=di(0);if(r||!r&&!s)if((Io(e)!=="body"||jc(i))&&(a=Yd(e)),r){const d=Cc(e,!0,s,e);c.x=d.x+e.clientLeft,c.y=d.y+e.clientTop}else i&&(c.x=uE(i));const l=o.left+a.scrollLeft-c.x,u=o.top+a.scrollTop-c.y;return{x:l,y:u,width:o.width,height:o.height}}function uh(t){return Bn(t).position==="static"}function bb(t,e){return!rr(t)||Bn(t).position==="fixed"?null:e?e(t):t.offsetParent}function fE(t,e){const n=nn(t);if(Jd(t))return n;if(!rr(t)){let i=fi(t);for(;i&&!So(i);){if(Fn(i)&&!uh(i))return i;i=fi(i)}return n}let r=bb(t,e);for(;r&&ND(r)&&uh(r);)r=bb(r,e);return r&&So(r)&&uh(r)&&!hv(r)?n:r||DD(t)||n}const KD=async function(t){const e=this.getOffsetParent||fE,n=this.getDimensions,r=await n(t.floating);return{reference:WD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QD(t){return Bn(t).direction==="rtl"}const GD={convertOffsetParentRelativeRectToViewportRelativeRect:UD,getDocumentElement:ki,getClippingRect:qD,getOffsetParent:fE,getElementRects:KD,getClientRects:FD,getDimensions:HD,getScale:io,isElement:Fn,isRTL:QD},JD=MD,YD=ID,XD=RD,ZD=(t,e,n)=>{const r=new Map,i={platform:GD,...n},s={...i.platform,_c:r};return PD(t,e,{...i,platform:s})};var hE={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(sa,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(y,k){var v=y[k];if(typeof v.bind=="function")return v.bind(y);try{return Function.prototype.bind.call(v,y)}catch{return function(){return Function.prototype.apply.apply(v,[y,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(y){return y==="debug"&&(y="log"),typeof console===n?!1:y==="trace"&&r?c:console[y]!==void 0?a(console,y):console.log!==void 0?a(console,"log"):e}function u(){for(var y=this.getLevel(),k=0;k<i.length;k++){var v=i[k];this[v]=k<y?e:this.methodFactory(v,y,this.name)}if(this.log=this.debug,typeof console===n&&y<this.levels.SILENT)return"No console available for logging"}function d(y){return function(){typeof console!==n&&(u.call(this),this[y].apply(this,arguments))}}function f(y,k,v){return l(y)||d.apply(this,arguments)}function h(y,k){var v=this,b,S,C,T="loglevel";typeof y=="string"?T+=":"+y:typeof y=="symbol"&&(T=void 0);function x(I){var A=(i[I]||"silent").toUpperCase();if(!(typeof window===n||!T)){try{window.localStorage[T]=A;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+A+";"}catch{}}}function w(){var I;if(!(typeof window===n||!T)){try{I=window.localStorage[T]}catch{}if(typeof I===n)try{var A=window.document.cookie,q=encodeURIComponent(T),V=A.indexOf(q+"=");V!==-1&&(I=/^([^;]+)/.exec(A.slice(V+q.length+1))[1])}catch{}return v.levels[I]===void 0&&(I=void 0),I}}function E(){if(!(typeof window===n||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(I){var A=I;if(typeof A=="string"&&v.levels[A.toUpperCase()]!==void 0&&(A=v.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=v.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+I)}v.name=y,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=k||f,v.getLevel=function(){return C??S??b},v.setLevel=function(I,A){return C=P(I),A!==!1&&x(C),u.call(v)},v.setDefaultLevel=function(I){S=P(I),w()||v.setLevel(I,!1)},v.resetLevel=function(){C=null,E(),u.call(v)},v.enableAll=function(I){v.setLevel(v.levels.TRACE,I)},v.disableAll=function(I){v.setLevel(v.levels.SILENT,I)},v.rebuild=function(){if(o!==v&&(b=P(o.getLevel())),u.call(v),o===v)for(var I in s)s[I].rebuild()},b=P(o?o.getLevel():"WARN");var M=w();M!=null&&(C=P(M)),u.call(v)}o=new h,o.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var v=s[k];return v||(v=s[k]=new h(k,o.methodFactory)),v};var p=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(hE);var eA=hE.exports;const tA=To(eA);var hm=function(t,e){return hm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},hm(t,e)};function Nr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function nA(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function pE(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ko(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function xc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function so(t){return this instanceof so?(this.v=t,this):new so(t)}function rA(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(y){return new Promise(function(k,v){s.push([h,y,k,v])>1||c(h,y)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(y){f(s[0][3],y)}}function l(h){h.value instanceof so?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function iA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ko=="function"?ko(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Me(t){return typeof t=="function"}function mv(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var dh=mv(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function od(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Uc=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ko(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(y){e={error:y}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(Me(u))try{u()}catch(y){s=y instanceof dh?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=ko(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{Sb(p)}catch(y){s=s??[],y instanceof dh?s=xc(xc([],Co(s)),Co(y.errors)):s.push(y)}}}catch(y){r={error:y}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new dh(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Sb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&od(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&od(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),mE=Uc.EMPTY;function gE(t){return t instanceof Uc||t&&"closed"in t&&Me(t.remove)&&Me(t.add)&&Me(t.unsubscribe)}function Sb(t){Me(t)?t():t.unsubscribe()}var vE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yE={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,xc([t,e],Co(n)))},clearTimeout:function(t){var e=yE.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function bE(t){yE.setTimeout(function(){throw t})}function pm(){}function hu(t){t()}var gv=function(t){Nr(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,gE(n)&&n.add(r)):r.destination=cA,r}return e.create=function(n,r,i){return new mm(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Uc),sA=Function.prototype.bind;function fh(t,e){return sA.call(t,e)}var oA=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Cl(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Cl(r)}else Cl(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Cl(n)}},t}(),mm=function(t){Nr(e,t);function e(n,r,i){var s=t.call(this)||this,o;if(Me(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&vE.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&fh(n.next,a),error:n.error&&fh(n.error,a),complete:n.complete&&fh(n.complete,a)}):o=n}return s.destination=new oA(o),s}return e}(gv);function Cl(t){bE(t)}function aA(t){throw t}var cA={closed:!0,next:pm,error:aA,complete:pm},vv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function yv(t){return t}function lA(t){return t.length===0?yv:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Tt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=dA(e)?e:new mm(e,n,r);return hu(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=kb(n),new n(function(i,s){var o=new mm({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[vv]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return lA(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=kb(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function kb(t){var e;return(e=t??vE.Promise)!==null&&e!==void 0?e:Promise}function uA(t){return t&&Me(t.next)&&Me(t.error)&&Me(t.complete)}function dA(t){return t&&t instanceof gv||uA(t)&&gE(t)}function fA(t){return Me(t==null?void 0:t.lift)}function or(t){return function(e){if(fA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mr(t,e,n,r,i){return new hA(t,e,n,r,i)}var hA=function(t){Nr(e,t);function e(n,r,i,s,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=s?function(l){try{s(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(gv),pA=mv(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),xo=function(t){Nr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Cb(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new pA},e.prototype.next=function(n){var r=this;hu(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=ko(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;hu(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;hu(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?mE:(this.currentObservers=null,a.push(n),new Uc(function(){r.currentObservers=null,od(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Tt;return n.source=this,n},e.create=function(n,r){return new Cb(n,r)},e}(Tt),Cb=function(t){Nr(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:mE},e}(xo),mA=function(t){Nr(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(xo),gA={now:function(){return Date.now()},delegate:void 0},vA=function(t){Nr(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(Uc),gm={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,xc([t,e],Co(n)))},clearInterval:function(t){var e=gm.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},yA=function(t){Nr(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),gm.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&gm.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,od(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(vA),xb=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=gA.now,t}(),bA=function(t){Nr(e,t);function e(n,r){r===void 0&&(r=xb.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(xb),SA=new bA(yA);function kA(t){return t&&Me(t.schedule)}function CA(t){return t[t.length-1]}function bv(t){return kA(CA(t))?t.pop():void 0}var Sv=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function SE(t){return Me(t==null?void 0:t.then)}function kE(t){return Me(t[vv])}function CE(t){return Symbol.asyncIterator&&Me(t==null?void 0:t[Symbol.asyncIterator])}function xE(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function xA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var TE=xA();function wE(t){return Me(t==null?void 0:t[TE])}function EE(t){return rA(this,arguments,function(){var n,r,i,s;return pE(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,so(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,so(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,so(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function _E(t){return Me(t==null?void 0:t.getReader)}function Ci(t){if(t instanceof Tt)return t;if(t!=null){if(kE(t))return TA(t);if(Sv(t))return wA(t);if(SE(t))return EA(t);if(CE(t))return PE(t);if(wE(t))return _A(t);if(_E(t))return PA(t)}throw xE(t)}function TA(t){return new Tt(function(e){var n=t[vv]();if(Me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wA(t){return new Tt(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function EA(t){return new Tt(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,bE)})}function _A(t){return new Tt(function(e){var n,r;try{for(var i=ko(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function PE(t){return new Tt(function(e){RA(t,e).catch(function(n){return e.error(n)})})}function PA(t){return PE(EE(t))}function RA(t,e){var n,r,i,s;return nA(this,void 0,void 0,function(){var o,a;return pE(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=iA(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function si(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function RE(t,e){return e===void 0&&(e=0),or(function(n,r){n.subscribe(Mr(r,function(i){return si(r,t,function(){return r.next(i)},e)},function(){return si(r,t,function(){return r.complete()},e)},function(i){return si(r,t,function(){return r.error(i)},e)}))})}function OE(t,e){return e===void 0&&(e=0),or(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function OA(t,e){return Ci(t).pipe(OE(e),RE(e))}function MA(t,e){return Ci(t).pipe(OE(e),RE(e))}function IA(t,e){return new Tt(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function NA(t,e){return new Tt(function(n){var r;return si(n,e,function(){r=t[TE](),si(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return Me(r==null?void 0:r.return)&&r.return()}})}function ME(t,e){if(!t)throw new Error("Iterable cannot be null");return new Tt(function(n){si(n,e,function(){var r=t[Symbol.asyncIterator]();si(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function DA(t,e){return ME(EE(t),e)}function AA(t,e){if(t!=null){if(kE(t))return OA(t,e);if(Sv(t))return IA(t,e);if(SE(t))return MA(t,e);if(CE(t))return ME(t,e);if(wE(t))return NA(t,e);if(_E(t))return DA(t,e)}throw xE(t)}function IE(t,e){return e?AA(t,e):Ci(t)}function Tb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bv(t);return IE(t,n)}function LA(t){return t instanceof Date&&!isNaN(t)}var jA=mv(function(t){return function(n){n===void 0&&(n=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}});function UA(t,e){var n=LA(t)?{first:t}:typeof t=="number"?{each:t}:t,r=n.first,i=n.each,s=n.with,o=s===void 0?FA:s,a=n.scheduler,c=a===void 0?SA:a,l=n.meta,u=l===void 0?null:l;if(r==null&&i==null)throw new TypeError("No timeout provided.");return or(function(d,f){var h,p,y=null,k=0,v=function(b){p=si(f,c,function(){try{h.unsubscribe(),Ci(o({meta:u,lastValue:y,seen:k})).subscribe(f)}catch(S){f.error(S)}},b)};h=d.subscribe(Mr(f,function(b){p==null||p.unsubscribe(),k++,f.next(y=b),i>0&&v(i)},void 0,void 0,function(){p!=null&&p.closed||p==null||p.unsubscribe(),y=null})),!k&&v(r!=null?typeof r=="number"?r:+r-c.now():i)})}function FA(t){throw new jA(t)}function pt(t,e){return or(function(n,r){var i=0;n.subscribe(Mr(r,function(s){r.next(t.call(e,s,i++))}))})}var BA=Array.isArray;function zA(t,e){return BA(e)?t.apply(void 0,xc([],Co(e))):t(e)}function $A(t){return pt(function(e){return zA(t,e)})}function VA(t,e,n,r,i,s,o,a){var c=[],l=0,u=0,d=!1,f=function(){d&&!c.length&&!l&&e.complete()},h=function(y){return l<r?p(y):c.push(y)},p=function(y){l++;var k=!1;Ci(n(y,u++)).subscribe(Mr(e,function(v){e.next(v)},function(){k=!0},void 0,function(){if(k)try{l--;for(var v=function(){var b=c.shift();o||p(b)};c.length&&l<r;)v();f()}catch(b){e.error(b)}}))};return t.subscribe(Mr(e,h,function(){d=!0,f()})),function(){}}function kv(t,e,n){return n===void 0&&(n=1/0),Me(e)?kv(function(r,i){return pt(function(s,o){return e(r,s,i,o)})(Ci(t(r,i)))},n):(typeof e=="number"&&(n=e),or(function(r,i){return VA(r,i,t,n)}))}function qA(t){return kv(yv,t)}function HA(){return qA(1)}function ad(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return HA()(IE(t,bv(t)))}var WA=["addListener","removeListener"],KA=["addEventListener","removeEventListener"],QA=["on","off"];function vm(t,e,n,r){if(Me(n)&&(r=n,n=void 0),r)return vm(t,e,n).pipe($A(r));var i=Co(YA(t)?KA.map(function(a){return function(c){return t[a](e,c,n)}}):GA(t)?WA.map(wb(t,e)):JA(t)?QA.map(wb(t,e)):[],2),s=i[0],o=i[1];if(!s&&Sv(t))return kv(function(a){return vm(a,e,n)})(Ci(t));if(!s)throw new TypeError("Invalid event target");return new Tt(function(a){var c=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a.next(1<l.length?l:l[0])};return s(c),function(){return o(c)}})}function wb(t,e){return function(n){return function(r){return t[n](e,r)}}}function GA(t){return Me(t.addListener)&&Me(t.removeListener)}function JA(t){return Me(t.on)&&Me(t.off)}function YA(t){return Me(t.addEventListener)&&Me(t.removeEventListener)}function NE(t,e){return or(function(n,r){var i=0;n.subscribe(Mr(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}function XA(t,e){return e===void 0&&(e=yv),t=t??ZA,or(function(n,r){var i,s=!0;n.subscribe(Mr(r,function(o){var a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function ZA(t,e){return t===e}function eL(t){return or(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function tL(t){return or(function(e,n){var r=!1,i=Mr(n,function(){i==null||i.unsubscribe(),r=!0},pm);Ci(t).subscribe(i),e.subscribe(Mr(n,function(s){return r&&n.next(s)}))})}function Sn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=bv(t);return or(function(r,i){(n?ad(t,r,n):ad(t,r)).subscribe(i)})}var nL=Object.defineProperty,Eb=Object.getOwnPropertySymbols,rL=Object.prototype.hasOwnProperty,iL=Object.prototype.propertyIsEnumerable,_b=(t,e,n)=>e in t?nL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pb=(t,e)=>{for(var n in e||(e={}))rL.call(e,n)&&_b(t,n,e[n]);if(Eb)for(var n of Eb(e))iL.call(e,n)&&_b(t,n,e[n]);return t},as=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())}),DE="lk";function Vt(t){return typeof t>"u"?!1:sL(t)||oL(t)}function sL(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function oL(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Tc(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function kt(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Tc(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Vt(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function AE(t,e){return typeof e>"u"?!1:Vt(t)?e.some(n=>n.participant.identity===t.participant.identity&&Vt(n)&&n.publication.trackSid===t.publication.trackSid):Tc(t)?e.some(n=>n.participant.identity===t.participant.identity&&Tc(n)&&n.source===t.source):!1}function aL(t,e){return Tc(t)&&Vt(e)&&e.participant.identity===t.participant.identity&&e.source===t.source}function LE(t){return t instanceof Sc}function cL(t,e){return as(this,null,function*(){const{x:n,y:r}=yield ZD(t,e,{placement:"top",middleware:[JD(6),XD(),YD({padding:5})]});return{x:n,y:r}})}function lL(t,e){return!t.contains(e.target)}var uL=[L.ConnectionStateChanged,L.RoomMetadataChanged,L.ActiveSpeakersChanged,L.ConnectionQualityChanged,L.ParticipantConnected,L.ParticipantDisconnected,L.ParticipantPermissionsChanged,L.ParticipantMetadataChanged,L.TrackMuted,L.TrackUnmuted,L.TrackPublished,L.TrackUnpublished,L.TrackStreamStateChanged,L.TrackSubscriptionFailed,L.TrackSubscriptionPermissionChanged,L.TrackSubscriptionStatusChanged],dL=[...uL,L.LocalTrackPublished,L.LocalTrackUnpublished];U.TrackPublished,U.TrackUnpublished,U.TrackMuted,U.TrackUnmuted,U.TrackStreamStateChanged,U.TrackSubscribed,U.TrackUnsubscribed,U.TrackSubscriptionPermissionChanged,U.TrackSubscriptionFailed,U.LocalTrackPublished,U.LocalTrackUnpublished;var fL=[U.ConnectionQualityChanged,U.IsSpeakingChanged,U.ParticipantMetadataChanged,U.ParticipantPermissionsChanged,U.TrackMuted,U.TrackUnmuted,U.TrackPublished,U.TrackUnpublished,U.TrackStreamStateChanged,U.TrackSubscriptionFailed,U.TrackSubscriptionPermissionChanged,U.TrackSubscriptionStatusChanged];[...fL,U.LocalTrackPublished,U.LocalTrackUnpublished];var ge=tA.getLogger("lk-components-js");ge.setDefaultLevel("WARN");var hL=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function jE(t,e,n,r){if(t.length<1)throw new Error("At least one grid layout definition must be provided.");const i=pL(t);if(n<=0||r<=0)return i[0];let s=0;const o=n/r>1?"landscape":"portrait";let a=i.find((c,l,u)=>{s=l;const d=u.findIndex((f,h)=>{const p=!f.orientation||f.orientation===o,y=h>l,k=f.maxTiles===c.maxTiles;return y&&k&&p})!==-1;return c.maxTiles>=e&&!d});if(a===void 0)if(a=i[i.length-1],a)ge.warn(`No layout found for: participantCount: ${e}, width/height: ${n}/${r} fallback to biggest available layout (${a}).`);else throw new Error("No layout or fallback layout found.");if((n<a.minWidth||r<a.minHeight)&&s>0){const c=i[s-1];a=jE(i.slice(0,s),c.maxTiles,n,r)}return a}function pL(t){return[...t].map(e=>{var n,r;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:(n=e.minWidth)!=null?n:0,minHeight:(r=e.minHeight)!=null?r:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:e.minWidth!==0||n.minWidth!==0?e.minWidth-n.minWidth:e.minHeight!==0||n.minHeight!==0?e.minHeight-n.minHeight:0)}function mL(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}function UE(t){return typeof t=="object"}function FE(t){return Array.isArray(t)&&t.filter(UE).length>0}function gL(t,e){return e.audioLevel-t.audioLevel}function vL(t,e){return t.isSpeaking===e.isSpeaking?0:t.isSpeaking?-1:1}function yL(t,e){var n,r,i,s;return t.lastSpokeAt!==void 0||e.lastSpokeAt!==void 0?((r=(n=e.lastSpokeAt)==null?void 0:n.getTime())!=null?r:0)-((s=(i=t.lastSpokeAt)==null?void 0:i.getTime())!=null?s:0):0}function ym(t,e){var n,r,i,s;return((r=(n=t.joinedAt)==null?void 0:n.getTime())!=null?r:0)-((s=(i=e.joinedAt)==null?void 0:i.getTime())!=null?s:0)}function bL(t,e){return Vt(t)?Vt(e)?0:-1:Vt(e)?1:0}function SL(t,e){const n=t.participant.isCameraEnabled,r=e.participant.isCameraEnabled;return n!==r?n?-1:1:0}function kL(t){const e=[],n=[],r=[],i=[];t.forEach(a=>{a.participant.isLocal&&a.source===D.Source.Camera?e.push(a):a.source===D.Source.ScreenShare?n.push(a):a.source===D.Source.Camera?r.push(a):i.push(a)});const s=CL(n),o=xL(r);return[...e,...s,...o,...i]}function CL(t){const e=[],n=[];return t.forEach(i=>{i.participant.isLocal?e.push(i):n.push(i)}),e.sort((i,s)=>ym(i.participant,s.participant)),n.sort((i,s)=>ym(i.participant,s.participant)),[...n,...e]}function xL(t){const e=[],n=[];return t.forEach(r=>{r.participant.isLocal?e.push(r):n.push(r)}),n.sort((r,i)=>r.participant.isSpeaking&&i.participant.isSpeaking?gL(r.participant,i.participant):r.participant.isSpeaking!==i.participant.isSpeaking?vL(r.participant,i.participant):r.participant.lastSpokeAt!==i.participant.lastSpokeAt?yL(r.participant,i.participant):Vt(r)!==Vt(i)?bL(r,i):r.participant.isCameraEnabled!==i.participant.isCameraEnabled?SL(r,i):ym(r.participant,i.participant)),[...e,...n]}function TL(t,e){return t.reduce((n,r,i)=>i%e===0?[...n,[r]]:[...n.slice(0,-1),[...n.slice(-1)[0],r]],[])}function Rb(t,e){const n=Math.max(t.length,e.length);return new Array(n).fill([]).map((r,i)=>[t[i],e[i]])}function cd(t,e,n){return t.filter(r=>!e.map(i=>n(i)).includes(n(r)))}function bm(t){return t.map(e=>typeof e=="string"||typeof e=="number"?`${e}`:kt(e))}function wL(t,e){return{dropped:cd(t,e,kt),added:cd(e,t,kt)}}function EL(t){return t.added.length!==0||t.dropped.length!==0}function Sm(t,e){const n=e.findIndex(r=>kt(r)===kt(t));if(n===-1)throw new Error(`Element not part of the array: ${kt(t)} not in ${bm(e)}`);return n}function _L(t,e,n){const r=Sm(t,n),i=Sm(e,n);return n.splice(r,1,e),n.splice(i,1,t),n}function PL(t,e){const n=Sm(t,e);return e.splice(n,1),e}function RL(t,e){return[...e,t]}function hh(t,e){return TL(t,e)}function OL(t,e,n){let r=ML(t,e);if(r.length<e.length){const o=cd(e,r,kt);r=[...r,...o]}const i=hh(r,n),s=hh(e,n);if(Rb(i,s).forEach(([o,a],c)=>{if(o&&a){const l=hh(r,n)[c],u=wL(l,a);EL(u)&&(ge.debug(`Detected visual changes on page: ${c}, current: ${bm(o)}, next: ${bm(a)}`,{changes:u}),u.added.length===u.dropped.length&&Rb(u.added,u.dropped).forEach(([d,f])=>{if(d&&f)r=_L(d,f,r);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${d}, ${f}`)}),u.added.length===0&&u.dropped.length>0&&u.dropped.forEach(d=>{r=PL(d,r)}),u.added.length>0&&u.dropped.length===0&&u.added.forEach(d=>{r=RL(d,r)}))}}),r.length>e.length){const o=cd(r,e,kt);r=r.filter(a=>!o.map(kt).includes(kt(a)))}return r}function ML(t,e){return t.map(n=>{const r=e.find(i=>kt(n)===kt(i)||typeof n!="number"&&Tc(n)&&Vt(i)&&aL(n,i));return r??n})}function Ht(t){return`${DE}-${t}`}function IL(t){const e=km(t),n=BE(t.participant).pipe(pt(()=>km(t)),Sn(e));return{className:Ht(t.source===D.Source.Camera||t.source===D.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function km(t){if(Vt(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTrackPublications().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(e)return r.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function Cv(t,...e){return new Tt(r=>{const i=()=>{r.next(t)};return e.forEach(o=>{t.on(o,i)}),()=>{e.forEach(o=>{t.off(o,i)})}}).pipe(Sn(t))}function xv(t,e){return new Tt(r=>{const i=(...o)=>{r.next(o)};return t.on(e,i),()=>{t.off(e,i)}})}function NL(t){return xv(t,L.ConnectionStateChanged).pipe(pt(([e])=>e),Sn(t.state))}function DL(t,e,n=!0){var r;const i=()=>as(this,null,function*(){try{const a=yield nd.getLocalDevices(t,n);s.next(a)}catch(a){e==null||e(a)}}),s=new xo,o=s.pipe(eL(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return ad(nd.getLocalDevices(t,n).catch(a=>(e==null||e(a),[])),o)}function AL(t){return Cv(t,L.AudioPlaybackStatusChanged).pipe(pt(n=>({canPlayAudio:n.canPlaybackAudio})))}function LL(t){return Cv(t,L.VideoPlaybackStatusChanged).pipe(pt(n=>({canPlayVideo:n.canPlaybackVideo})))}function jL(t,e){return xv(t,L.ActiveDeviceChanged).pipe(NE(([n])=>n===e),pt(([n,r])=>(ge.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Sn(t.getActiveDevice(e)))}function UL(t,e){return xv(t,L.ParticipantEncryptionStatusChanged).pipe(NE(([,n])=>e.identity===(n==null?void 0:n.identity)||!n&&e.identity===t.localParticipant.identity),pt(([n])=>n),Sn(e instanceof Sc?e.isE2EEEnabled:e.isEncrypted))}function Tv(t,...e){return new Tt(r=>{const i=()=>{r.next(t)};return e.forEach(o=>{t.on(o,i)}),()=>{e.forEach(o=>{t.off(o,i)})}}).pipe(Sn(t))}function BE(t){return Tv(t,U.TrackMuted,U.TrackUnmuted,U.ParticipantPermissionsChanged,U.TrackPublished,U.TrackUnpublished,U.LocalTrackPublished,U.LocalTrackUnpublished,U.MediaDevicesError,U.TrackSubscriptionStatusChanged).pipe(pt(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:s}=n,o=n.getTrackPublication(D.Source.Microphone),a=n.getTrackPublication(D.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:s,cameraTrack:a,microphoneTrack:o,participant:n}}))}function FL(t){return Tv(t,U.ParticipantMetadataChanged,U.ParticipantNameChanged).pipe(pt(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),Sn({name:t.name,identity:t.identity,metadata:t.metadata}))}function BL(t){return wv(t,U.ConnectionQualityChanged).pipe(pt(([n])=>n),Sn(t.connectionQuality))}function wv(t,e){return new Tt(r=>{const i=(...o)=>{r.next(o)};return t.on(e,i),()=>{t.off(e,i)}})}function zE(t){var e,n,r,i;return Tv(t.participant,U.TrackMuted,U.TrackUnmuted,U.TrackSubscribed,U.TrackUnsubscribed,U.LocalTrackPublished,U.LocalTrackUnpublished).pipe(pt(s=>{var o,a;const c=(o=t.publication)!=null?o:s.getTrackPublication(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),Sn((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrackPublication(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function zL(t){return wv(t,U.IsSpeakingChanged).pipe(pt(([e])=>e))}function $L(t){return wv(t,U.ParticipantPermissionsChanged).pipe(pt(()=>t.permissions),Sn(t.permissions))}function VL(t,e,n,r,i){const{localParticipant:s}=e,o=(d,f)=>{let h=!1;switch(d){case D.Source.Camera:h=f.isCameraEnabled;break;case D.Source.Microphone:h=f.isMicrophoneEnabled;break;case D.Source.ScreenShare:h=f.isScreenShareEnabled;break}return h},a=BE(s).pipe(pt(d=>o(t,d.participant)),Sn(o(t,s))),c=new xo,l=(d,f)=>as(this,null,function*(){try{switch(f??(f=n),c.next(!0),t){case D.Source.Camera:yield s.setCameraEnabled(d??!s.isCameraEnabled,f,r);break;case D.Source.Microphone:yield s.setMicrophoneEnabled(d??!s.isMicrophoneEnabled,f,r);break;case D.Source.ScreenShare:yield s.setScreenShareEnabled(d??!s.isScreenShareEnabled,f,r);break;default:break}}catch(h){if(i&&h instanceof Error)i==null||i(h);else throw h}finally{c.next(!1)}});return{className:Ht("button"),toggle:l,enabledObserver:a,pendingObserver:c.asObservable()}}function qL(){let t=!1;const e=new xo,n=new xo,r=s=>as(this,null,function*(){n.next(!0),t=s??!t,e.next(t),n.next(!1)});return{className:Ht("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function HL(t,e,n){const r=new mA(void 0),i=e?jL(e,t):r.asObservable(),s=(a,...c)=>as(this,[a,...c],function*(l,u={}){var d,f,h;if(e){ge.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:l;p!==l&&l!=="default"&&ge.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let y;t==="audioinput"?y=(f=e.localParticipant.getTrackPublication(D.Source.Microphone))==null?void 0:f.track:t==="videoinput"&&(y=(h=e.localParticipant.getTrackPublication(D.Source.Camera))==null?void 0:h.track);const k=l==="default"&&!y||l==="default"&&(y==null?void 0:y.mediaStreamTrack.label.startsWith("Default"));r.next(k?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(ge.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:Ht("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}function WL(t){const e=r=>{t.disconnect(r)};return{className:Ht("disconnect-button"),disconnect:e}}function KL(t){const e=Ht("connection-quality"),n=BL(t);return{className:e,connectionQualityObserver:n}}function QL(t){let e="track-muted-indicator-camera";switch(t.source){case D.Source.Camera:e="track-muted-indicator-camera";break;case D.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Ht(e),r=zE(t);return{className:n,mediaMutedObserver:r}}function GL(t){return{className:"lk-participant-name",infoObserver:FL(t)}}function JL(){return{className:Ht("participant-tile")}}new TextEncoder;new TextDecoder;function YL(){const t=n=>as(this,null,function*(){ge.info("Start Audio for room: ",n),yield n.startAudio()});return{className:Ht("start-audio-button"),roomAudioPlaybackAllowedObservable:AL,handleStartAudioPlayback:t}}function XL(){const t=n=>as(this,null,function*(){ge.info("Start Video for room: ",n),yield n.startVideo()});return{className:Ht("start-audio-button"),roomVideoPlaybackAllowedObservable:LL,handleStartVideoPlayback:t}}function ZL(){return{className:[Ht("button"),Ht("chat-toggle")].join(" ")}}function ej(){return{className:[Ht("button"),Ht("focus-toggle-button")].join(" ")}}function tj(){return{className:"lk-room-container"}}function Ob(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],s=[];return i.forEach(o=>{e.forEach(a=>{const c=Array.from(o.trackPublications.values()).filter(l=>l.source===a&&(!n||l.track)).map(l=>({participant:o,publication:l,source:l.source}));s.push(...c)})}),{trackReferences:s,participants:i}}function nj(t,e,n){var r,i;const s=(r=n.additionalRoomEvents)!=null?r:dL,o=(i=n.onlySubscribed)!=null?i:!0,a=Array.from(new Set([L.ParticipantConnected,L.ParticipantDisconnected,L.ConnectionStateChanged,L.LocalTrackPublished,L.LocalTrackUnpublished,L.TrackPublished,L.TrackUnpublished,L.TrackSubscriptionStatusChanged,...s]).values());return Cv(t,...a).pipe(pt(l=>{const u=Ob(l,e,o);return ge.debug(`TrackReference[] was updated. (length ${u.trackReferences.length})`,u),u}),Sn(Ob(t,e,o)))}function rj(t,e=1e3){if(t===null)return Tb(!1);const n=vm(t,"mousemove",{passive:!0}).pipe(pt(()=>!0)),r=n.pipe(UA({each:e,with:()=>ad(Tb(!1),r.pipe(tL(n)))}),XA());return r}function ij(t,e){if(typeof localStorage>"u"){ge.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){ge.error(`Error setting item to local storage: ${n}`)}}function sj(t){if(typeof localStorage>"u"){ge.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){ge.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){ge.error(`Error getting item from local storage: ${e}`);return}}function oj(t){return{load:()=>sj(t),save:e=>ij(t,e)}}var aj=`${DE}-user-choices`,ia={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:""},{load:cj,save:lj}=oj(aj);function uj(t,e=!1){e!==!0&&lj(t)}function dj(t,e=!1){var n,r,i,s,o;const a={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:ia.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:ia.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:ia.videoDeviceId,audioDeviceId:(s=t==null?void 0:t.audioDeviceId)!=null?s:ia.audioDeviceId,username:(o=t==null?void 0:t.username)!=null?o:ia.username};if(e)return a;{const c=cj();return Pb(Pb({},a),c??{})}}function $E(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=$E(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fj(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=$E(t))&&(r&&(r+=" "),r+=e);return r}var hj="Expected a function",Mb=NaN,pj="[object Symbol]",mj=/^\s+|\s+$/g,gj=/^[-+]0x[0-9a-f]+$/i,vj=/^0b[01]+$/i,yj=/^0o[0-7]+$/i,bj=parseInt,Sj=typeof sa=="object"&&sa&&sa.Object===Object&&sa,kj=typeof self=="object"&&self&&self.Object===Object&&self,Cj=Sj||kj||Function("return this")(),xj=Object.prototype,Tj=xj.toString,wj=Math.max,Ej=Math.min,ph=function(){return Cj.Date.now()};function _j(t,e,n){var r,i,s,o,a,c,l=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(hj);e=Ib(e)||0,Cm(n)&&(u=!!n.leading,d="maxWait"in n,s=d?wj(Ib(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(x){var w=r,E=i;return r=i=void 0,l=x,o=t.apply(E,w),o}function p(x){return l=x,a=setTimeout(v,e),u?h(x):o}function y(x){var w=x-c,E=x-l,P=e-w;return d?Ej(P,s-E):P}function k(x){var w=x-c,E=x-l;return c===void 0||w>=e||w<0||d&&E>=s}function v(){var x=ph();if(k(x))return b(x);a=setTimeout(v,y(x))}function b(x){return a=void 0,f&&r?h(x):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),l=0,r=c=i=a=void 0}function C(){return a===void 0?o:b(ph())}function T(){var x=ph(),w=k(x);if(r=arguments,i=this,c=x,w){if(a===void 0)return p(c);if(d)return a=setTimeout(v,e),h(c)}return a===void 0&&(a=setTimeout(v,e)),o}return T.cancel=S,T.flush=C,T}function Cm(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Pj(t){return!!t&&typeof t=="object"}function Rj(t){return typeof t=="symbol"||Pj(t)&&Tj.call(t)==pj}function Ib(t){if(typeof t=="number")return t;if(Rj(t))return Mb;if(Cm(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Cm(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(mj,"");var n=vj.test(t);return n||yj.test(t)?bj(t.slice(2),n?2:8):gj.test(t)?Mb:+t}var Oj=_j;const Nb=To(Oj);function Mj(t){const e=g.useRef(t);e.current=t,g.useEffect(()=>()=>{e.current()},[])}function Ij(t,e=500,n){const r=g.useRef();Mj(()=>{r.current&&r.current.cancel()});const i=g.useMemo(()=>{const s=Nb(t,e,n),o=(...a)=>s(...a);return o.cancel=()=>{s.cancel()},o.isPending=()=>!!r.current,o.flush=()=>s.flush(),o},[t,e,n]);return g.useEffect(()=>{r.current=Nb(t,e,n)},[t,e,n]),i}function Nj(t,e,n){const r=(l,u)=>l===u,i=t instanceof Function?t():t,[s,o]=g.useState(i),a=g.useRef(i),c=Ij(o,e,n);return r(a.current,i)||(c(i),a.current=i),[s,c]}function Dj({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:s}={}){var o;const[a,c]=g.useState(null),[l,u]=g.useState(()=>({isIntersecting:i,entry:void 0})),d=g.useRef();d.current=s;const f=((o=l.entry)==null?void 0:o.isIntersecting)&&r;g.useEffect(()=>{if(!a||!("IntersectionObserver"in window)||f)return;let y;const k=new IntersectionObserver(v=>{const b=Array.isArray(k.thresholds)?k.thresholds:[k.thresholds];v.forEach(S=>{const C=S.isIntersecting&&b.some(T=>S.intersectionRatio>=T);u({isIntersecting:C,entry:S}),d.current&&d.current(C,S),C&&r&&y&&(y(),y=void 0)})},{threshold:t,root:e,rootMargin:n});return k.observe(a),()=>{k.disconnect()}},[a,JSON.stringify(t),e,n,f,r]);const h=g.useRef(null);g.useEffect(()=>{var y;!a&&((y=l.entry)!=null&&y.target)&&!r&&!f&&h.current!==l.entry.target&&(h.current=l.entry.target,u({isIntersecting:i,entry:void 0}))},[a,l.entry,r,f,i]);const p=[c,!!l.isIntersecting,l.entry];return p.ref=p[0],p.isIntersecting=p[1],p.entry=p[2],p}var Aj=Object.defineProperty,Lj=Object.defineProperties,jj=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,VE=Object.prototype.hasOwnProperty,qE=Object.prototype.propertyIsEnumerable,Db=(t,e,n)=>e in t?Aj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,se=(t,e)=>{for(var n in e||(e={}))VE.call(e,n)&&Db(t,n,e[n]);if(ld)for(var n of ld(e))qE.call(e,n)&&Db(t,n,e[n]);return t},In=(t,e)=>Lj(t,jj(e)),wt=(t,e)=>{var n={};for(var r in t)VE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ld)for(var r of ld(t))e.indexOf(r)<0&&qE.call(t,r)&&(n[r]=t[r]);return n},Uj=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())}),Fj=t=>{const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),e};function Bj(t,e){const n=$j(),r=Fj(e);return g.useLayoutEffect(()=>{let i=!1;const s=t.current;if(!s)return;function o(a,c){i||r.current(a,c)}return n==null||n.subscribe(s,o),()=>{i=!0,n==null||n.unsubscribe(s,o)}},[t.current,n,r]),n==null?void 0:n.observer}function zj(){let t=!1,e=[];const n=new Map;if(typeof window>"u")return;const r=new ResizeObserver((i,s)=>{e=e.concat(i),t||window.requestAnimationFrame(()=>{const o=new Set;for(let a=0;a<e.length;a++){if(o.has(e[a].target))continue;o.add(e[a].target);const c=n.get(e[a].target);c==null||c.forEach(l=>l(e[a],s))}e=[],t=!1}),t=!0});return{observer:r,subscribe(i,s){var o;r.observe(i);const a=(o=n.get(i))!=null?o:[];a.push(s),n.set(i,a)},unsubscribe(i,s){var o;const a=(o=n.get(i))!=null?o:[];if(a.length===1){r.unobserve(i),n.delete(i);return}const c=a.indexOf(s);c!==-1&&a.splice(c,1),n.set(i,a)}}}var mh,$j=()=>mh||(mh=zj()),Vj=t=>{const[e,n]=g.useState({width:0,height:0});g.useLayoutEffect(()=>{if(t.current){const{width:i,height:s}=t.current.getBoundingClientRect();n({width:i,height:s})}},[t.current]);const r=g.useCallback(i=>n(i.contentRect),[]);return Bj(t,r),e};function bn(t,e,n=!0){const[r,i]=g.useState(e);return g.useEffect(()=>{if(n&&i(e),typeof window>"u"||!t)return;const s=t.subscribe(i);return()=>s.unsubscribe()},[t,n]),r}function qj(t){const e=s=>typeof window<"u"?window.matchMedia(s).matches:!1,[n,r]=g.useState(e(t));function i(){r(e(t))}return g.useEffect(()=>{const s=window.matchMedia(t);return i(),s.addListener?s.addListener(i):s.addEventListener("change",i),()=>{s.removeListener?s.removeListener(i):s.removeEventListener("change",i)}},[t]),n}var Ev=g.createContext(void 0);function HE(){const t=g.useContext(Ev);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function _v(){return g.useContext(Ev)}var Pv=g.createContext(void 0);function Xd(){return g.useContext(Pv)}function No(t){const e=Xd(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}var WE=g.createContext(void 0);function KE(){return g.useContext(WE)}function Fc(t){var e;const n=KE(),r=Xd(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var Rv=g.createContext(void 0);function Ov(){const t=g.useContext(Rv);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Zd(){return g.useContext(Rv)}function Bc(t){const e=Zd(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var QE=g.createContext(void 0);function Hj(t){return g.useContext(QE)}function Wj(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(r){console.error(r)}}}function ar(...t){const e=se({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const s=e[i],o=r[i];typeof s=="function"&&typeof o=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=Wj(s,o):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?e[i]=fj(s,o):e[i]=o!==void 0?o:s}}return e}function Kj(t={}){const e=Fc(t.participant),{className:n,connectionQualityObserver:r}=g.useMemo(()=>KL(e),[e]),i=bn(r,fn.Unknown);return{className:n,quality:i}}function Qj(t){const e=Bc(t),n=g.useMemo(()=>NL(e),[e]);return bn(n,e.state)}function Gj(t){const e=Ov(),n=Qj(e);return{buttonProps:g.useMemo(()=>{const{className:i,disconnect:s}=WL(e);return ar(t,{className:i,onClick:()=>{var a;return s((a=t.stopTracks)!=null?a:!0)},disabled:n===me.Disconnected})},[e,t,n])}}function Jj(t){if(t.publication instanceof bc){const e=t.publication.track;if(e){const{facingMode:n}=gD(e);return n}}return"undefined"}function Yj({trackRef:t,props:e}){const n=No(t),r=_v(),{className:i}=g.useMemo(()=>ej(),[]),s=g.useMemo(()=>AE(n,r==null?void 0:r.pin.state),[n,r==null?void 0:r.pin.state]);return{mergedProps:g.useMemo(()=>ar(e,{className:i,onClick:a=>{var c,l,u,d,f;(c=e.onClick)==null||c.call(e,a),s?(u=r==null?void 0:(l=r.pin).dispatch)==null||u.call(l,{msg:"clear_pin"}):(f=r==null?void 0:(d=r.pin).dispatch)==null||f.call(d,{msg:"set_pin",trackReference:n})}}),[e,i,n,s,r==null?void 0:r.pin]),inFocus:s}}function Xj(t,e,n={}){var r;const i=(r=n.gridLayouts)!=null?r:hL,{width:s,height:o}=Vj(t),a=jE(i,e,s,o);return g.useEffect(()=>{t.current&&a&&(t.current.style.setProperty("--lk-col-count",a==null?void 0:a.columns.toString()),t.current.style.setProperty("--lk-row-count",a==null?void 0:a.rows.toString()))},[t,a]),{layout:a,containerWidth:s,containerHeight:o}}function Ab(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,s=Fc(i),o=typeof t=="string"?{participant:s,source:t}:t,[a,c]=g.useState(!!((n=o.publication)!=null&&n.isMuted||(r=s.getTrackPublication(o.source))!=null&&r.isMuted));return g.useEffect(()=>{const l=zE(o).subscribe(c);return()=>l.unsubscribe()},[kt(o)]),a}function Zj(t){const e=Fc(t),n=g.useMemo(()=>zL(e),[e]);return bn(n,e.isSpeaking)}var e7={connect:!0,audio:!1,video:!1};function t7(t){const e=se(se({},e7),t),{token:n,serverUrl:r,options:i,room:s,connectOptions:o,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:f,onError:h,onMediaDeviceFailure:p,onEncryptionError:y,simulateParticipants:k}=e,v=wt(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&s&&ge.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[b,S]=g.useState();g.useEffect(()=>{S(s??new nd(i))},[s]);const C=g.useMemo(()=>{const{className:T}=tj();return ar(v,{className:T})},[v]);return g.useEffect(()=>{if(!b)return;const T=()=>{const E=b.localParticipant;ge.debug("trying to publish local tracks"),Promise.all([E.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),E.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),E.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(P=>{ge.warn(P),h==null||h(P)})},x=E=>{const P=gc.getFailure(E);p==null||p(P)},w=E=>{y==null||y(E)};return b.on(L.SignalConnected,T).on(L.MediaDevicesError,x).on(L.EncryptionError,w),()=>{b.off(L.SignalConnected,T).off(L.MediaDevicesError,x).off(L.EncryptionError,w)}},[b,c,l,u,h,y,p]),g.useEffect(()=>{if(b){if(k){b.simulateParticipants({participants:{count:k},publish:{audio:!0,useRealTracks:!0}});return}if(!n){ge.debug("no token yet");return}if(!r){ge.warn("no livekit url provided"),h==null||h(Error("no livekit url provided"));return}a?(ge.debug("connecting"),b.connect(r,n,o).catch(T=>{ge.warn(T),h==null||h(T)})):(ge.debug("disconnecting because connect is false"),b.disconnect())}},[a,n,JSON.stringify(o),b,h,r,k]),g.useEffect(()=>{if(!b)return;const T=x=>{switch(x){case me.Disconnected:f&&f();break;case me.Connected:d&&d();break}};return b.on(L.ConnectionStateChanged,T),()=>{b.off(L.ConnectionStateChanged,T)}},[n,d,f,b]),g.useEffect(()=>{if(b)return()=>{ge.info("disconnecting on onmount"),b.disconnect()}},[b]),{room:b,htmlProps:C}}function n7(){const t=Ov(),e=g.useMemo(()=>$L(t.localParticipant),[t]);return bn(e,t.localParticipant.permissions)}function r7({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const s=Zd(),o=g.useMemo(()=>DL(t,i,r),[t,r,i]),a=bn(o,[]),[c,l]=g.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:f}=g.useMemo(()=>HL(t,e??s,n),[t,e,s,n]);return g.useEffect(()=>{const h=d.subscribe(p=>{ge.info("setCurrentDeviceId",p),p&&l(p)});return()=>{h==null||h.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:f}}function i7(t,e,n={}){const r=g.useRef([]),i=g.useRef(-1),s=e!==i.current,o=typeof n.customSortFunction=="function"?n.customSortFunction(t):kL(t);let a=[...o];if(s===!1)try{a=OL(r.current,o,e)}catch(c){ge.error("Error while running updatePages(): ",c)}return s?r.current=o:r.current=a,i.current=e,a}function s7(t,e){const[n,r]=g.useState(1),i=Math.max(Math.ceil(e.length/t),1);n>i&&r(i);const s=n*t,o=s-t,a=d=>{r(f=>d==="next"?f===i?f:f+1:f===1?f:f-1)},c=d=>{d>i?r(i):d<1?r(1):r(d)},u=i7(e,t).slice(o,s);return{totalPageCount:i,nextPage:()=>a("next"),prevPage:()=>a("previous"),setPage:c,firstItemIndex:o,lastItemIndex:s,tracks:u,currentPage:n}}function o7({trackRef:t,onParticipantClick:e,disableSpeakingIndicator:n,htmlProps:r}){const i=No(t),s=g.useMemo(()=>{const{className:f}=JL();return ar(r,{className:f,onClick:h=>{var p,y;if((p=r.onClick)==null||p.call(r,h),typeof e=="function"){const k=(y=i.publication)!=null?y:i.participant.getTrackPublication(i.source);e({participant:i.participant,track:k})}}})},[r,e,i.publication,i.source,i.participant]),o=i.participant.getTrackPublication(D.Source.Microphone),a=g.useMemo(()=>({participant:i.participant,source:D.Source.Microphone,publication:o}),[o,i.participant]),c=Ab(i),l=Ab(a),u=Zj(i.participant),d=Jj(i);return{elementProps:se({"data-lk-audio-muted":l,"data-lk-video-muted":c,"data-lk-speaking":n===!0?!1:u,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":d},s)}}function a7({room:t,props:e}){const n=Bc(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:s}=g.useMemo(()=>YL(),[]),o=g.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=bn(o,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:g.useMemo(()=>ar(e,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[e,r,a,s,n]),canPlayAudio:a}}function c7({room:t,props:e}){const n=Bc(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:s}=g.useMemo(()=>XL(),[]),o=g.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=bn(o,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:g.useMemo(()=>ar(e,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[e,r,a,s,n]),canPlayVideo:a}}function l7(t,e={}){var n;const r=g.useRef(null),i=g.useRef(null),s=(n=e.minSwipeDistance)!=null?n:50,o=l=>{i.current=null,r.current=l.targetTouches[0].clientX},a=l=>{i.current=l.targetTouches[0].clientX},c=g.useCallback(()=>{if(!r.current||!i.current)return;const l=r.current-i.current,u=l>s,d=l<-s;u&&e.onLeftSwipe&&e.onLeftSwipe(),d&&e.onRightSwipe&&e.onRightSwipe()},[s,e]);g.useEffect(()=>{const l=t.current;return l&&(l.addEventListener("touchstart",o,{passive:!0}),l.addEventListener("touchmove",a,{passive:!0}),l.addEventListener("touchend",c,{passive:!0})),()=>{l&&(l.removeEventListener("touchstart",o),l.removeEventListener("touchmove",a),l.removeEventListener("touchend",c))}},[t,c])}function u7({props:t}){const{dispatch:e,state:n}=HE().widget,{className:r}=g.useMemo(()=>ZL(),[]);return{mergedProps:g.useMemo(()=>ar(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function d7(t){var e,n;const r=No(t),{className:i,mediaMutedObserver:s}=g.useMemo(()=>QL(r),[kt(r)]);return{isMuted:bn(s,!!((e=r.publication)!=null&&e.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:i}}function f7(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:s,publishOptions:o,onDeviceError:a}=e,c=wt(e,["source","onChange","initialState","captureOptions","publishOptions","onDeviceError"]),l;const u=Zd(),d=(l=u==null?void 0:u.localParticipant)==null?void 0:l.getTrackPublication(n),f=g.useRef(!1),{toggle:h,className:p,pendingObserver:y,enabledObserver:k}=g.useMemo(()=>u?VL(n,u,s,o,a):qL(),[u,n,JSON.stringify(s),o]),v=bn(y,!1),b=bn(k,i??!!(d!=null&&d.isEnabled));g.useEffect(()=>{r==null||r(b,f.current),f.current=!1},[b,r]),g.useEffect(()=>{i!==void 0&&(ge.debug("forcing initial toggle state",n,i),h(i))},[]);const S=g.useMemo(()=>ar(c,{className:p}),[c,p]),C=g.useCallback(T=>{var x;f.current=!0,h().finally(()=>f.current=!1),(x=c.onClick)==null||x.call(c,T)},[c,h]);return{toggle:h,enabled:b,pending:v,track:d,buttonProps:In(se({},S),{"aria-pressed":b,"data-lk-source":n,"data-lk-enabled":b,disabled:v,onClick:C})}}function GE(t=[D.Source.Camera,D.Source.Microphone,D.Source.ScreenShare,D.Source.ScreenShareAudio,D.Source.Unknown],e={}){const n=Bc(e.room),[r,i]=g.useState([]),[s,o]=g.useState([]),a=g.useMemo(()=>t.map(l=>UE(l)?l.source:l),[JSON.stringify(t)]);return g.useEffect(()=>{const l=nj(n,a,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:u,participants:d})=>{ge.debug("setting track bundles",u,d),i(u),o(d)});return()=>l.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),g.useMemo(()=>{if(FE(t)){const l=p7(t,s),u=Array.from(r);return s.forEach(d=>{var f;l.has(d.identity)&&((f=l.get(d.identity))!=null?f:[]).forEach(p=>{if(r.find(({participant:k,publication:v})=>d.identity===k.identity&&v.source===p))return;ge.debug(`Add ${p} placeholder for participant ${d.identity}.`);const y={participant:d,source:p};u.push(y)})}),u}else return r},[r,s,t])}function h7(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function p7(t,e){const n=new Map;if(FE(t)){const r=t.filter(i=>i.withPlaceholder).map(i=>i.source);e.forEach(i=>{const s=i.getTrackPublications().map(a=>{var c;return(c=a.track)==null?void 0:c.source}).filter(a=>a!==void 0),o=Array.from(h7(new Set(r),new Set(s)));o.length>0&&n.set(i.identity,o)})}return n}function m7(t={}){var e;const[n,r]=g.useState(dj(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=g.useCallback(l=>{r(u=>In(se({},u),{audioEnabled:l}))},[]),s=g.useCallback(l=>{r(u=>In(se({},u),{videoEnabled:l}))},[]),o=g.useCallback(l=>{r(u=>In(se({},u),{audioDeviceId:l}))},[]),a=g.useCallback(l=>{r(u=>In(se({},u),{videoDeviceId:l}))},[]),c=g.useCallback(l=>{r(u=>In(se({},u),{username:l}))},[]);return g.useEffect(()=>{var l;uj(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:s,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:c}}function g7(t,e={}){const n=Fc(t),r=Bc(e.room),i=g.useMemo(()=>UL(r,n),[r,n]);return bn(i,n instanceof Sc?n.isE2EEEnabled:n.isEncrypted)}var v7=g.forwardRef(function(e,n){const{mergedProps:r}=u7({props:e});return g.createElement("button",se({ref:n},r),e.children)}),y7=g.forwardRef(function(e,n){const{buttonProps:r}=Gj(e);return g.createElement("button",se({ref:n},r),e.children)}),b7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),g.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),g.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),S7=b7,k7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),g.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),C7=k7,x7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),T7=x7,w7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),Lb=w7,E7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),_7=E7,P7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),R7=P7,O7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),M7=O7,I7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),N7=I7,D7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),g.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),g.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),A7=D7,L7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),g.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),g.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),j7=L7,U7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),F7=U7,B7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),z7=B7,$7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),V7=$7,q7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),H7=q7,W7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),JE=W7,K7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),g.createElement("g",{fill:"currentColor"},g.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),g.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),Q7=K7,G7=t=>g.createElement("svg",se({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),J7=G7,Y7=g.forwardRef(function(e,n){var r=e,{trackRef:i}=r,s=wt(r,["trackRef"]);const o=Xd(),{mergedProps:a,inFocus:c}=Yj({trackRef:i??o,props:s});return g.createElement(Ev.Consumer,null,l=>l!==void 0&&g.createElement("button",se({ref:n},a),s.children?s.children:c?g.createElement(J7,null):g.createElement(_7,null)))});function X7(t){return t!==void 0}function cs(...t){return ar(...t.filter(X7))}function Z7(t,e,n){return g.Children.map(t,r=>g.isValidElement(r)&&g.Children.only(t)?g.cloneElement(r,In(se({},e),{key:n})):r)}var gh=g.forwardRef(function(e,n){var r=e,{kind:i,initialSelection:s,onActiveDeviceChange:o,onDeviceListChange:a,onDeviceSelectError:c,exactMatch:l,track:u,requestPermissions:d,onError:f}=r,h=wt(r,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const p=Zd(),y=g.useCallback(w=>{p&&p.emit(L.MediaDevicesError,w),f==null||f(w)},[p,f]),{devices:k,activeDeviceId:v,setActiveMediaDevice:b,className:S}=r7({kind:i,room:p,track:u,requestPermissions:d,onError:y});g.useEffect(()=>{s!==void 0&&b(s)},[b]),g.useEffect(()=>{typeof a=="function"&&a(k)},[a,k]),g.useEffect(()=>{v&&v!==""&&(o==null||o(v))},[v]);const C=w=>Uj(this,null,function*(){try{yield b(w,{exact:l})}catch(E){if(E instanceof Error)c==null||c(E);else throw E}}),T=g.useMemo(()=>cs(h,{className:S},{className:"lk-list"}),[S,h]);function x(w,E,P){return w===E||P===0&&E==="default"}return g.createElement("ul",se({ref:n},T),k.map((w,E)=>g.createElement("li",{key:w.deviceId,id:w.deviceId,"data-lk-active":x(w.deviceId,v,E),"aria-selected":x(w.deviceId,v,E),role:"option"},g.createElement("button",{className:"lk-button",onClick:()=>C(w.deviceId)},w.label))))});function YE(t,e){switch(t){case D.Source.Microphone:return e?g.createElement(j7,null):g.createElement(A7,null);case D.Source.Camera:return e?g.createElement(C7,null):g.createElement(S7,null);case D.Source.ScreenShare:return e?g.createElement(Q7,null):g.createElement(JE,null);default:return}}function e9(t){switch(t){case fn.Excellent:return g.createElement(F7,null);case fn.Good:return g.createElement(z7,null);case fn.Poor:return g.createElement(V7,null);default:return g.createElement(H7,null)}}var vh=g.forwardRef(function(e,n){var r=e,{showIcon:i}=r,s=wt(r,["showIcon"]);const{buttonProps:o,enabled:a}=f7(s);return g.createElement("button",se({ref:n},o),(i??!0)&&YE(s.source,a),s.children)}),t9=g.forwardRef(function(e,n){var r;const{className:i,quality:s}=Kj(e),o=g.useMemo(()=>In(se({},cs(e,{className:i})),{"data-lk-quality":s}),[s,e,i]);return g.createElement("div",se({ref:n},o),(r=e.children)!=null?r:e9(s))}),jb=g.forwardRef(function(e,n){var r=e,{participant:i}=r,s=wt(r,["participant"]);const o=Fc(i),{className:a,infoObserver:c}=g.useMemo(()=>GL(o),[o]),{identity:l,name:u}=bn(c,{name:o.name,identity:o.identity,metadata:o.metadata}),d=g.useMemo(()=>cs(s,{className:a,"data-lk-participant-name":u}),[s,a,u]);return g.createElement("span",se({ref:n},d),u!==""?u:l,s.children)}),n9=g.forwardRef(function(e,n){var r=e,{trackRef:i,show:s="always"}=r,o=wt(r,["trackRef","show"]),a;const{className:c,isMuted:l}=d7(i),u=s==="always"||s==="muted"&&l||s==="unmuted"&&!l,d=g.useMemo(()=>cs(o,{className:c}),[c,o]);return u?g.createElement("div",In(se({ref:n},d),{"data-lk-muted":l}),(a=o.children)!=null?a:YE(i.source,!l)):null}),r9=t=>g.createElement("svg",se({width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),g.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),g.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25})),i9=r9;function XE(t,e={}){var n;const[r,i]=g.useState(km(t)),[s,o]=g.useState(r==null?void 0:r.isMuted),[a,c]=g.useState(r==null?void 0:r.isSubscribed),[l,u]=g.useState(r==null?void 0:r.track),[d,f]=g.useState("landscape"),h=g.useRef(),{className:p,trackObserver:y}=g.useMemo(()=>IL(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,Vt(t)&&t.publication.trackSid]);return g.useEffect(()=>{const k=y.subscribe(v=>{ge.debug("update track",v),i(v),o(v==null?void 0:v.isMuted),c(v==null?void 0:v.isSubscribed),u(v==null?void 0:v.track)});return()=>k==null?void 0:k.unsubscribe()},[y]),g.useEffect(()=>{var k,v;return l&&(h.current&&l.detach(h.current),(k=e.element)!=null&&k.current&&!(LE(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),h.current=(v=e.element)==null?void 0:v.current,()=>{h.current&&(l==null||l.detach(h.current))}},[l,e.element]),g.useEffect(()=>{var k,v;if(typeof((k=r==null?void 0:r.dimensions)==null?void 0:k.width)=="number"&&typeof((v=r==null?void 0:r.dimensions)==null?void 0:v.height)=="number"){const b=r.dimensions.width>r.dimensions.height?"landscape":"portrait";f(b)}},[r]),{publication:r,isMuted:s,isSubscribed:a,track:l,elementProps:cs(e.props,se({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}var s9=g.forwardRef(function(e,n){var r=e,{onTrackClick:i,onClick:s,onSubscriptionStatusChanged:o,trackRef:a,manageSubscription:c}=r,l=wt(r,["onTrackClick","onClick","onSubscriptionStatusChanged","trackRef","manageSubscription"]);const u=No(a),d=g.useRef(null);g.useImperativeHandle(n,()=>d.current);const f=Dj({root:d.current}),[h]=Nj(f,3e3);g.useEffect(()=>{c&&u.publication instanceof kc&&(h==null?void 0:h.isIntersecting)===!1&&(f==null?void 0:f.isIntersecting)===!1&&u.publication.setSubscribed(!1)},[h,u,c]),g.useEffect(()=>{c&&u.publication instanceof kc&&(f==null?void 0:f.isIntersecting)===!0&&u.publication.setSubscribed(!0)},[f,u,c]);const{elementProps:p,publication:y,isSubscribed:k}=XE(u,{element:d,props:l});g.useEffect(()=>{o==null||o(!!k)},[k,o]);const v=b=>{s==null||s(b),i==null||i({participant:u==null?void 0:u.participant,track:y})};return g.createElement("video",In(se({ref:d},p),{muted:!0,onClick:v}))}),ZE=g.forwardRef(function(e,n){var r=e,{trackRef:i,onSubscriptionStatusChanged:s,volume:o,muted:a}=r,c=wt(r,["trackRef","onSubscriptionStatusChanged","volume","muted"]);const l=No(i),u=g.useRef(null);g.useImperativeHandle(n,()=>u.current);const{elementProps:d,isSubscribed:f,track:h,publication:p}=XE(l,{element:u,props:c});return g.useEffect(()=>{s==null||s(!!f)},[f,s]),g.useEffect(()=>{h===void 0||o===void 0||(h instanceof no?h.setVolume(o):ge.warn("Volume can only be set on remote audio tracks."))},[o,h]),g.useEffect(()=>{p===void 0||a===void 0||(p instanceof kc?p.setEnabled(!a):ge.warn("Can only call setEnabled on remote track publications."))},[a,p,h]),g.createElement("audio",se({ref:u},d))});function o9(t){const e=!!KE();return t.participant&&!e?g.createElement(WE.Provider,{value:t.participant},t.children):g.createElement(g.Fragment,null,t.children)}function a9(t){const e=!!Xd();return t.trackRef&&!e?g.createElement(Pv.Provider,{value:t.trackRef},t.children):g.createElement(g.Fragment,null,t.children)}var c9=g.forwardRef(function(e,n){var r=e,{trackRef:i,children:s,onParticipantClick:o,disableSpeakingIndicator:a}=r,c=wt(r,["trackRef","children","onParticipantClick","disableSpeakingIndicator"]),l,u;const d=No(i),{elementProps:f}=o7({htmlProps:c,disableSpeakingIndicator:a,onParticipantClick:o,trackRef:d}),h=g7(d.participant),p=_v(),y=(l=Hj())==null?void 0:l.autoSubscription,k=g.useCallback(v=>{d.source&&!v&&p&&p.pin.dispatch&&AE(d,p.pin.state)&&p.pin.dispatch({msg:"clear_pin"})},[d,p]);return g.createElement("div",se({ref:n,style:{position:"relative"}},f),g.createElement(a9,{trackRef:d},g.createElement(o9,{participant:d.participant},s??g.createElement(g.Fragment,null,Vt(d)&&(((u=d.publication)==null?void 0:u.kind)==="video"||d.source===D.Source.Camera||d.source===D.Source.ScreenShare)?g.createElement(s9,{trackRef:d,onSubscriptionStatusChanged:k,manageSubscription:y}):Vt(d)&&g.createElement(ZE,{trackRef:d,onSubscriptionStatusChanged:k}),g.createElement("div",{className:"lk-participant-placeholder"},g.createElement(i9,null)),g.createElement("div",{className:"lk-participant-metadata"},g.createElement("div",{className:"lk-participant-metadata-item"},d.source===D.Source.Camera?g.createElement(g.Fragment,null,h&&g.createElement(N7,{style:{marginRight:"0.25rem"}}),g.createElement(n9,{trackRef:{participant:d.participant,source:D.Source.Microphone},show:"muted"}),g.createElement(jb,null)):g.createElement(g.Fragment,null,g.createElement(JE,{style:{marginRight:"0.25rem"}}),g.createElement(jb,null,"'s screen"))),g.createElement(t9,{className:"lk-participant-metadata-item"}))),g.createElement(Y7,{trackRef:d}))))});function l9(t){var e=t,{tracks:n}=e,r=wt(e,["tracks"]);return g.createElement(g.Fragment,null,n.map(i=>g.createElement(Pv.Provider,{value:i,key:kt(i)},Z7(r.children))))}function u9({totalPageCount:t,nextPage:e,prevPage:n,currentPage:r,pagesContainer:i}){const[s,o]=g.useState(!1);return g.useEffect(()=>{let a;return i&&(a=rj(i.current,2e3).subscribe(o)),()=>{a&&a.unsubscribe()}},[i]),g.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":s},g.createElement("button",{className:"lk-button",onClick:n},g.createElement(Lb,null)),g.createElement("span",{className:"lk-pagination-count"},`${r} of ${t}`),g.createElement("button",{className:"lk-button",onClick:e},g.createElement(Lb,null)))}var d9=g.forwardRef(function({totalPageCount:e,currentPage:n},r){const i=new Array(e).fill("").map((s,o)=>o+1===n?g.createElement("span",{"data-lk-active":!0,key:o}):g.createElement("span",{key:o}));return g.createElement("div",{ref:r,className:"lk-pagination-indicator"},i)});function f9(t){var e=t,{tracks:n}=e,r=wt(e,["tracks"]);const i=g.createRef(),s=g.useMemo(()=>cs(r,{className:"lk-grid-layout"}),[r]),{layout:o}=Xj(i,n.length),a=s7(o.maxTiles,n);return l7(i,{onLeftSwipe:a.nextPage,onRightSwipe:a.prevPage}),g.createElement("div",se({ref:i,"data-lk-pagination":a.totalPageCount>1},s),g.createElement(l9,{tracks:a.tracks},r.children),n.length>o.maxTiles&&g.createElement(g.Fragment,null,g.createElement(d9,{totalPageCount:a.totalPageCount,currentPage:a.currentPage}),g.createElement(u9,se({pagesContainer:i},a))))}var h9=g.forwardRef(function(e,n){const{room:r,htmlProps:i}=t7(e);return g.createElement("div",se({ref:n},i),r&&g.createElement(Rv.Provider,{value:r},g.createElement(QE.Provider,{value:e.featureFlags},e.children)))});function p9({volume:t,muted:e}){const n=GE([D.Source.Microphone,D.Source.ScreenShareAudio,D.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(r=>!LE(r.participant)&&r.publication.kind===D.Kind.Audio);return g.createElement("div",{style:{display:"none"}},n.map(r=>g.createElement(ZE,{key:kt(r),trackRef:r,volume:t,muted:e})))}function Ub(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:s,requestPermissions:o=!1}=e,a=wt(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=g.useState(!1),[u,d]=g.useState([]),[f,h]=g.useState(!0),[p,y]=g.useState(o),k=(C,T)=>{ge.debug("handle device change"),l(!1),i==null||i(C,T)},v=g.useRef(null),b=g.useRef(null);g.useLayoutEffect(()=>{c&&y(!0)},[c]),g.useLayoutEffect(()=>{v.current&&b.current&&(u||f)&&cL(v.current,b.current).then(({x:C,y:T})=>{b.current&&Object.assign(b.current.style,{left:`${C}px`,top:`${T}px`})}),h(!1)},[v,b,u,f]);const S=g.useCallback(C=>{b.current&&C.target!==v.current&&c&&lL(b.current,C)&&l(!1)},[c,b,v]);return g.useEffect(()=>(document.addEventListener("click",S),window.addEventListener("resize",()=>h(!0)),()=>{document.removeEventListener("click",S),window.removeEventListener("resize",()=>h(!0))}),[S,h]),g.createElement(g.Fragment,null,g.createElement("button",In(se({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:v}),a.children),!a.disabled&&g.createElement("div",{className:"lk-device-menu",ref:b,style:{visibility:c?"visible":"hidden"}},n?g.createElement(gh,{initialSelection:r,onActiveDeviceChange:C=>k(n,C),onDeviceListChange:d,kind:n,track:s==null?void 0:s[n],requestPermissions:p}):g.createElement(g.Fragment,null,g.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),g.createElement(gh,{kind:"audioinput",onActiveDeviceChange:C=>k("audioinput",C),onDeviceListChange:d,track:s==null?void 0:s.audioinput,requestPermissions:p}),g.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),g.createElement(gh,{kind:"videoinput",onActiveDeviceChange:C=>k("videoinput",C),onDeviceListChange:d,track:s==null?void 0:s.videoinput,requestPermissions:p}))))}var m9=g.forwardRef(function(e,n){var r=e,{label:i}=r,s=wt(r,["label"]);const o=Ov(),{mergedProps:a,canPlayAudio:c}=a7({room:o,props:s}),{mergedProps:l,canPlayVideo:u}=c7({room:o,props:a}),d=l,{style:f}=d,h=wt(d,["style"]);return f.display=c&&u?"none":"block",g.createElement("button",se({ref:n,style:f},h),i??`Start ${c?"Video":"Audio"}`)});function g9({props:t}){const{dispatch:e,state:n}=HE().widget,r="lk-button lk-settings-toggle";return{mergedProps:g.useMemo(()=>ar(t,{className:r,onClick:()=>{e&&e({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[t,r,e,n])}}var v9=g.forwardRef(function(e,n){const{mergedProps:r}=g9({props:e});return g.createElement("button",se({ref:n},r),e.children)});function y9(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0,onDeviceError:s}=e,o=wt(e,["variation","controls","saveUserChoices","onDeviceError"]),a,c,l,u,d;const[f,h]=g.useState(!1),p=_v();g.useEffect(()=>{var ee,Z;((ee=p==null?void 0:p.widget.state)==null?void 0:ee.showChat)!==void 0&&h((Z=p==null?void 0:p.widget.state)==null?void 0:Z.showChat)},[(a=p==null?void 0:p.widget.state)==null?void 0:a.showChat]);const k=qj(`(max-width: ${f?1e3:760}px)`)?"minimal":"verbose";n??(n=k);const v=se({leave:!0},r),b=n7();b?((c=v.camera)!=null||(v.camera=b.canPublish),(l=v.microphone)!=null||(v.microphone=b.canPublish),(u=v.screenShare)!=null||(v.screenShare=b.canPublish),(d=v.chat)!=null||(v.chat=b.canPublishData&&(r==null?void 0:r.chat))):(v.camera=!1,v.chat=!1,v.microphone=!1,v.screenShare=!1);const S=g.useMemo(()=>n==="minimal"||n==="verbose",[n]),C=g.useMemo(()=>n==="textOnly"||n==="verbose",[n]),T=mL(),[x,w]=g.useState(!1),E=g.useCallback(ee=>{w(ee)},[w]),P=cs({className:"lk-control-bar"},o),{saveAudioInputEnabled:M,saveVideoInputEnabled:I,saveAudioInputDeviceId:A,saveVideoInputDeviceId:q}=m7({preventSave:!i}),V=g.useCallback((ee,Z)=>Z?M(ee):null,[M]),ne=g.useCallback((ee,Z)=>Z?I(ee):null,[I]);return g.createElement("div",se({},P),v.microphone&&g.createElement("div",{className:"lk-button-group"},g.createElement(vh,{source:D.Source.Microphone,showIcon:S,onChange:V,onDeviceError:ee=>s==null?void 0:s({source:D.Source.Microphone,error:ee})},C&&"Microphone"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(Ub,{kind:"audioinput",onActiveDeviceChange:(ee,Z)=>A(Z??"")}))),v.camera&&g.createElement("div",{className:"lk-button-group"},g.createElement(vh,{source:D.Source.Camera,showIcon:S,onChange:ne,onDeviceError:ee=>s==null?void 0:s({source:D.Source.Camera,error:ee})},C&&"Camera"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(Ub,{kind:"videoinput",onActiveDeviceChange:(ee,Z)=>q(Z??"")}))),v.screenShare&&T&&g.createElement(vh,{source:D.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:S,onChange:E,onDeviceError:ee=>s==null?void 0:s({source:D.Source.ScreenShare,error:ee})},C&&(x?"Stop screen share":"Share screen")),v.chat&&g.createElement(v7,null,S&&g.createElement(T7,null),C&&"Chat"),v.settings&&g.createElement(v9,null,S&&g.createElement(R7,null),C&&"Settings"),v.leave&&g.createElement(y7,null,S&&g.createElement(M7,null),C&&"Leave"),g.createElement(m9,null))}const b9="wss://study-live-6hvqlmts.livekit.cloud";function S9(){const{user:t}=g.useContext(Et),e=t==null?void 0:t.id,{data:n}=jd(`http://localhost:5000/getToken?userId=${e}`);return console.log(n),m.jsxs(h9,{video:!0,audio:!0,token:n??"",serverUrl:b9,"data-lk-theme":"default",style:{height:"100vh"},children:[m.jsx(k9,{}),m.jsx(p9,{}),m.jsx(y9,{})]})}function k9(){const t=GE([{source:D.Source.Camera,withPlaceholder:!0},{source:D.Source.ScreenShare,withPlaceholder:!1}],{onlySubscribed:!1});return m.jsx(f9,{tracks:t,style:{height:"calc(80vh - var(--lk-control-bar-height))"},children:m.jsx(c9,{})})}const C9=[{path:"/",element:m.jsx(BM,{})},{path:"/sign-up",element:m.jsx(LM,{})},{path:"/login",element:m.jsx(AM,{})},{path:"/pricing",element:m.jsx(zM,{})},{path:"/users",element:m.jsx($M,{})},{path:"/user/:id",element:m.jsx(qM,{})},{path:"/video/:id",element:m.jsx(Xl,{children:m.jsx(GM,{})})},{path:"/audio/:id",element:m.jsx(Xl,{children:m.jsx(lT,{})})},{path:"/video-live",element:m.jsx(Xl,{children:m.jsx(S9,{})})},{path:"/test",element:m.jsx(Yg,{})}];function x9(t){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Home"},child:[{tag:"path",attr:{d:"M19.37,10.22l-6.2-7.6a1.5,1.5,0,0,0-2.33-.01L4.63,10.22a2.5,2.5,0,0,0-.57,1.59v7.63a2.507,2.507,0,0,0,2.5,2.5H17.44a2.507,2.507,0,0,0,2.5-2.5V11.81A2.5,2.5,0,0,0,19.37,10.22ZM10,20.94v-5.5a1.5,1.5,0,0,1,1.5-1.5h1a1.5,1.5,0,0,1,1.5,1.5v5.5Zm8.94-1.5a1.511,1.511,0,0,1-1.5,1.5H15v-5.5a2.5,2.5,0,0,0-2.5-2.5h-1A2.5,2.5,0,0,0,9,15.44v5.5H6.56a1.511,1.511,0,0,1-1.5-1.5V11.81a1.474,1.474,0,0,1,.34-.95l6.22-7.61A.474.474,0,0,1,12,3.06a.479.479,0,0,1,.39.19l6.21,7.61a1.474,1.474,0,0,1,.34.95Z"},child:[]}]}]})(t)}function e2(){var a,c;const t=yi(),e=((a=t.pathname)==null?void 0:a.indexOf("/chat"))+6,n=(c=t.pathname)==null?void 0:c.slice(e),{user:r}=g.useContext(Et),{data:i,isLoading:s}=JC(void 0),o=i==null?void 0:i.data;return m.jsxs("div",{className:"border-r border-gray-300 min-w-full",children:[m.jsxs("header",{className:"p-4 border-b bg-[#1E1B22] border-gray-300 flex justify-between items-center  text-white",children:[m.jsx(Le,{to:"/",children:m.jsx(x9,{className:"text-2xl font-bold"})}),m.jsx("h1",{className:"text-2xl font-semibold",children:r==null?void 0:r.name})]}),m.jsxs("div",{className:"overflow-y-auto bg-secondary h-screen p-3 mb-9 pb-20  ",children:[s&&m.jsx(hc,{}),o==null?void 0:o.map(l=>{if(l.id!==(r==null?void 0:r.id))return m.jsxs(Le,{to:`/dashboard/chat/${l==null?void 0:l.id}`,className:`flex items-center mb-4 cursor-pointer hover:bg-gray-100 p-2 border rounded-md ${l.id===n?"bg-gray-200 hover:bg-gray-300 text-primary ":"text-white hover:text-slate-700"} `,children:[m.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full mr-3 ",children:m.jsx("img",{src:l!=null&&l.img?l==null?void 0:l.img:"https://placehold.co/200x/ad922e/ffffff.svg?text=&font=Lato",alt:"User Avatar",className:"w-12 h-12 rounded-full"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-lg font-semibold uppercase",children:(l==null?void 0:l.name)??"User"}),m.jsx("p",{className:`${l.id===n?"text-slate-700 ":"text-slate-200 hover:text-slate-500"}`,children:"That pizza place was amazing! We should go again sometime. "})]})]},l.id)})]})]})}function T9(){const{user:t}=g.useContext(Et);return m.jsx(_e.Fragment,{children:m.jsxs("div",{className:"flex h-screen overflow-hidden",children:[m.jsx("div",{className:"w-full lg:w-1/4 hidden lg:flex ",children:m.jsx(e2,{})}),m.jsxs("div",{className:"w-full lg:w-3/4",children:[(t==null?void 0:t.id)&&m.jsx(YC,{user:t}),m.jsx(hC,{})]})]})})}function w9({user:t,io:e,receiverId:n,newMessage:r}){const[i,s]=g.useState([]),[o,a]=g.useState(!1),c=g.useRef(null);g.useEffect(()=>{(async()=>{a(!0);const d=await(await fetch(`${es}/message/user?senderId=${t.id}&receiverId=${n}`)).json();a(!1),s(d.data),d.data&&c.current&&c.current.scrollIntoView({behavior:"smooth",block:"end"})})()},[n,t.id,r]);const l=u=>{u.preventDefault();const d=u.currentTarget,f=d.elements.namedItem("message").value;console.log(f),e.emit("send-message",{message:f,senderId:t.id,receiverId:n}),d.reset()};return m.jsxs("div",{className:"",children:[m.jsxs("div",{className:"h-screen  overflow-y-auto p-4   pb-[10rem]  ",children:[i==null?void 0:i.map(u=>u.senderId===(t==null?void 0:t.id)?m.jsxs("div",{className:"flex justify-end mb-4 cursor-pointer",children:[m.jsx("div",{className:"flex max-w-96 bg-indigo-500 text-white rounded-lg p-3 gap-3",children:m.jsx("p",{children:u.message})}),m.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center ml-2",children:m.jsx("img",{src:"https://placehold.co/200x/b7a8ff/ffffff.svg?text=&font=Lato",alt:"My Avatar",className:"w-8 h-8 rounded-full"})})]},u.id):m.jsxs("div",{className:"flex mb-4 cursor-pointer",children:[m.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-2",children:m.jsx("img",{src:"https://placehold.co/200x/ffa8e4/ffffff.svg?text=&font=Lato",alt:"User Avatar",className:"w-8 h-8 rounded-full"})}),m.jsx("div",{className:"flex max-w-96 bg-white rounded-lg p-3 gap-3",children:m.jsx("p",{className:"text-gray-700",children:u.message})})]},u.id)),o&&m.jsx(hc,{})]}),m.jsx("form",{onSubmit:l,className:"bg-white border-t border-gray-300 p-4 absolute bottom-0 w-full lg:w-3/4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"text",name:"message",placeholder:"Type a message...",className:"w-full p-2 rounded-md border border-gray-400 focus:outline-none focus:border-blue-500"}),m.jsx("button",{type:"submit",className:"bg-indigo-500 text-white px-4 py-2 rounded-md ml-2",children:"Send"})]})})]})}function E9({user:t,receiverId:e}){const[n,r]=g.useState(!1),i=()=>{console.log(e),r(!n)};return m.jsxs(_e.Fragment,{children:[m.jsxs("header",{className:"bg-primary p-4 text-white flex justify-between",children:[m.jsx("h1",{className:"text-2xl font-semibold",children:(t==null?void 0:t.name)??"UserName"}),m.jsx("div",{className:"flex space-x-4",children:m.jsx("button",{onClick:i,className:"text-4xl ms-2 text-black rounded-full flex lg:hidden  focus:outline-none",children:m.jsx(SC,{className:"text-white"})})})]}),m.jsxs("div",{id:"collapseMenu",className:`${n?"block lg:hidden":"hidden"} lg:flex lg:gap-x-5 max-lg:space-y-3 max-lg:fixed max-lg:bg-white max-lg:w-[80%] max-lg:min-w-[300px] max-lg:top-0 max-lg:left-0  max-lg:h-full max-lg:shadow-md overflow-hidden z-50 `,children:[m.jsx("button",{id:"toggleClose",onClick:i,className:"lg:hidden fixed top-3 right-4 z-[100] rounded-full bg-white text-5xl",children:m.jsx(QR,{})}),m.jsx("div",{className:"flex lg:hidden",children:m.jsx(e2,{})})]})]})}function _9(){var a;const{user:t}=g.useContext(Et),{io:e,newMessage:n,userAllData:r}=g.useContext(Ud),{id:i}=Od();Fd(t.id,1);const s=i==="1"?(a=r[0])==null?void 0:a.id:i,{data:o}=jd(`${es}/user/${s}`);return m.jsxs("div",{className:"flex-1",children:[m.jsx(E9,{user:o==null?void 0:o.data,receiverId:s}),m.jsx(w9,{newMessage:n,io:e,receiverId:s,user:t})]})}const P9=[{path:"audio/:id",element:m.jsx(lT,{})},{path:"chat/:id",element:m.jsx(_9,{})}],R9=gR([{path:"/",element:m.jsx($O,{}),children:C9},{path:"*",element:m.jsx(MR,{})},{path:"/dashboard",element:m.jsx(Xl,{children:m.jsx(T9,{})}),children:P9}]),O9={value:0},t2=Vr({name:"counter",initialState:O9,reducers:{increment:t=>{t.value+=1},decrement:t=>{t.value-=1},incrementByAmount:(t,e)=>{t.value+=e.payload}}});t2.actions;const M9=t2.reducer,I9={},n2=Vr({name:"video",initialState:I9,reducers:{addUserPeer:(t,e)=>{console.log(t),console.log(e);const{userId:n,stream:r}=e.payload;t[n]={...t[n],stream:r}},removeUserPeer:(t,e)=>{const{userId:n}=e.payload;t[n]&&(t[n].stream=void 0)},addAllUserPeer:(t,e)=>{const{peers:n}=e.payload;return{...t,...n}}}});n2.actions;const N9=n2.reducer,D9=A4({reducer:{counter:M9,video:N9,[jl.reducerPath]:jl.reducer},middleware:t=>t().concat(jl.middleware)});bh.createRoot(document.getElementById("root")).render(m.jsx(_e.StrictMode,{children:m.jsx(Q3,{store:D9,children:m.jsx(BR,{children:m.jsx(mO,{children:m.jsx(FO,{children:m.jsxs(BO,{children:[m.jsx(wR,{router:R9}),m.jsx(DM,{})]})})})})})}));
